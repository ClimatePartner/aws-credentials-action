var wt=Object.create;var Oe=Object.defineProperty,Ct=Object.defineProperties,Et=Object.getOwnPropertyDescriptor,Ot=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertyNames,er=Object.getOwnPropertySymbols,bt=Object.getPrototypeOf,tr=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable;var rr=(r,e,t)=>e in r?Oe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nr=(r,e)=>{for(var t in e||(e={}))tr.call(e,t)&&rr(r,t,e[t]);if(er)for(var t of er(e))Rt.call(e,t)&&rr(r,t,e[t]);return r},or=(r,e)=>Ct(r,Ot(e));var m=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports);var Mt=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of At(e))!tr.call(r,o)&&o!==t&&Oe(r,o,{get:()=>e[o],enumerable:!(n=Et(e,o))||n.enumerable});return r};var ir=(r,e,t)=>(t=r!=null?wt(bt(r)):{},Mt(e||!r||!r.__esModule?Oe(t,"default",{value:r,enumerable:!0}):t,r));var ur=m(Ae=>{var sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");Ae.encode=function(r){if(0<=r&&r<sr.length)return sr[r];throw new TypeError("Must be between 0 and 63: "+r)};Ae.decode=function(r){var e=65,t=90,n=97,o=122,i=48,s=57,u=43,a=47,l=26,c=52;return e<=r&&r<=t?r-e:n<=r&&r<=o?r-n+l:i<=r&&r<=s?r-i+c:r==u?62:r==a?63:-1}});var Me=m(Re=>{var ar=ur(),be=5,lr=1<<be,cr=lr-1,fr=lr;function Lt(r){return r<0?(-r<<1)+1:(r<<1)+0}function Tt(r){var e=(r&1)===1,t=r>>1;return e?-t:t}Re.encode=function(e){var t="",n,o=Lt(e);do n=o&cr,o>>>=be,o>0&&(n|=fr),t+=ar.encode(n);while(o>0);return t};Re.decode=function(e,t,n){var o=e.length,i=0,s=0,u,a;do{if(t>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(a=ar.decode(e.charCodeAt(t++)),a===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));u=!!(a&fr),a&=cr,i=i+(a<<s),s+=be}while(u);n.value=Tt(i),n.rest=t}});var K=m(C=>{function qt(r,e,t){if(e in r)return r[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}C.getArg=qt;var hr=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,xt=/^data:.+\,.+$/;function ne(r){var e=r.match(hr);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}C.urlParse=ne;function W(r){var e="";return r.scheme&&(e+=r.scheme+":"),e+="//",r.auth&&(e+=r.auth+"@"),r.host&&(e+=r.host),r.port&&(e+=":"+r.port),r.path&&(e+=r.path),e}C.urlGenerate=W;function Le(r){var e=r,t=ne(r);if(t){if(!t.path)return r;e=t.path}for(var n=C.isAbsolute(e),o=e.split(/\/+/),i,s=0,u=o.length-1;u>=0;u--)i=o[u],i==="."?o.splice(u,1):i===".."?s++:s>0&&(i===""?(o.splice(u+1,s),s=0):(o.splice(u,2),s--));return e=o.join("/"),e===""&&(e=n?"/":"."),t?(t.path=e,W(t)):e}C.normalize=Le;function pr(r,e){r===""&&(r="."),e===""&&(e=".");var t=ne(e),n=ne(r);if(n&&(r=n.path||"/"),t&&!t.scheme)return n&&(t.scheme=n.scheme),W(t);if(t||e.match(xt))return e;if(n&&!n.host&&!n.path)return n.host=e,W(n);var o=e.charAt(0)==="/"?e:Le(r.replace(/\/+$/,"")+"/"+e);return n?(n.path=o,W(n)):o}C.join=pr;C.isAbsolute=function(r){return r.charAt(0)==="/"||hr.test(r)};function Nt(r,e){r===""&&(r="."),r=r.replace(/\/$/,"");for(var t=0;e.indexOf(r+"/")!==0;){var n=r.lastIndexOf("/");if(n<0||(r=r.slice(0,n),r.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(r.length+1)}C.relative=Nt;var dr=function(){var r=Object.create(null);return!("__proto__"in r)}();function gr(r){return r}function Pt(r){return vr(r)?"$"+r:r}C.toSetString=dr?gr:Pt;function It(r){return vr(r)?r.slice(1):r}C.fromSetString=dr?gr:It;function vr(r){if(!r)return!1;var e=r.length;if(e<9||r.charCodeAt(e-1)!==95||r.charCodeAt(e-2)!==95||r.charCodeAt(e-3)!==111||r.charCodeAt(e-4)!==116||r.charCodeAt(e-5)!==111||r.charCodeAt(e-6)!==114||r.charCodeAt(e-7)!==112||r.charCodeAt(e-8)!==95||r.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(r.charCodeAt(t)!==36)return!1;return!0}function Ut(r,e,t){var n=Q(r.source,e.source);return n!==0||(n=r.originalLine-e.originalLine,n!==0)||(n=r.originalColumn-e.originalColumn,n!==0||t)||(n=r.generatedColumn-e.generatedColumn,n!==0)||(n=r.generatedLine-e.generatedLine,n!==0)?n:Q(r.name,e.name)}C.compareByOriginalPositions=Ut;function Dt(r,e,t){var n=r.generatedLine-e.generatedLine;return n!==0||(n=r.generatedColumn-e.generatedColumn,n!==0||t)||(n=Q(r.source,e.source),n!==0)||(n=r.originalLine-e.originalLine,n!==0)||(n=r.originalColumn-e.originalColumn,n!==0)?n:Q(r.name,e.name)}C.compareByGeneratedPositionsDeflated=Dt;function Q(r,e){return r===e?0:r===null?1:e===null?-1:r>e?1:-1}function Bt(r,e){var t=r.generatedLine-e.generatedLine;return t!==0||(t=r.generatedColumn-e.generatedColumn,t!==0)||(t=Q(r.source,e.source),t!==0)||(t=r.originalLine-e.originalLine,t!==0)||(t=r.originalColumn-e.originalColumn,t!==0)?t:Q(r.name,e.name)}C.compareByGeneratedPositionsInflated=Bt;function Gt(r){return JSON.parse(r.replace(/^\)]}'[^\n]*\n/,""))}C.parseSourceMapInput=Gt;function kt(r,e,t){if(e=e||"",r&&(r[r.length-1]!=="/"&&e[0]!=="/"&&(r+="/"),e=r+e),t){var n=ne(t);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");o>=0&&(n.path=n.path.substring(0,o+1))}e=pr(W(n),e)}return Le(e)}C.computeSourceURL=kt});var xe=m(mr=>{var Te=K(),qe=Object.prototype.hasOwnProperty,k=typeof Map<"u";function P(){this._array=[],this._set=k?new Map:Object.create(null)}P.fromArray=function(e,t){for(var n=new P,o=0,i=e.length;o<i;o++)n.add(e[o],t);return n};P.prototype.size=function(){return k?this._set.size:Object.getOwnPropertyNames(this._set).length};P.prototype.add=function(e,t){var n=k?e:Te.toSetString(e),o=k?this.has(e):qe.call(this._set,n),i=this._array.length;(!o||t)&&this._array.push(e),o||(k?this._set.set(e,i):this._set[n]=i)};P.prototype.has=function(e){if(k)return this._set.has(e);var t=Te.toSetString(e);return qe.call(this._set,t)};P.prototype.indexOf=function(e){if(k){var t=this._set.get(e);if(t>=0)return t}else{var n=Te.toSetString(e);if(qe.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};P.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};P.prototype.toArray=function(){return this._array.slice()};mr.ArraySet=P});var Sr=m(yr=>{var _r=K();function jt(r,e){var t=r.generatedLine,n=e.generatedLine,o=r.generatedColumn,i=e.generatedColumn;return n>t||n==t&&i>=o||_r.compareByGeneratedPositionsInflated(r,e)<=0}function fe(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}fe.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)};fe.prototype.add=function(e){jt(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};fe.prototype.toArray=function(){return this._sorted||(this._array.sort(_r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};yr.MappingList=fe});var Ne=m(wr=>{var oe=Me(),_=K(),he=xe().ArraySet,Ft=Sr().MappingList;function R(r){r||(r={}),this._file=_.getArg(r,"file",null),this._sourceRoot=_.getArg(r,"sourceRoot",null),this._skipValidation=_.getArg(r,"skipValidation",!1),this._sources=new he,this._names=new he,this._mappings=new Ft,this._sourcesContents=null}R.prototype._version=3;R.fromSourceMap=function(e){var t=e.sourceRoot,n=new R({file:e.file,sourceRoot:t});return e.eachMapping(function(o){var i={generated:{line:o.generatedLine,column:o.generatedColumn}};o.source!=null&&(i.source=o.source,t!=null&&(i.source=_.relative(t,i.source)),i.original={line:o.originalLine,column:o.originalColumn},o.name!=null&&(i.name=o.name)),n.addMapping(i)}),e.sources.forEach(function(o){var i=o;t!==null&&(i=_.relative(t,o)),n._sources.has(i)||n._sources.add(i);var s=e.sourceContentFor(o);s!=null&&n.setSourceContent(o,s)}),n};R.prototype.addMapping=function(e){var t=_.getArg(e,"generated"),n=_.getArg(e,"original",null),o=_.getArg(e,"source",null),i=_.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,n,o,i),o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:o,name:i})};R.prototype.setSourceContent=function(e,t){var n=e;this._sourceRoot!=null&&(n=_.relative(this._sourceRoot,n)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[_.toSetString(n)]=t):this._sourcesContents&&(delete this._sourcesContents[_.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};R.prototype.applySourceMap=function(e,t,n){var o=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var i=this._sourceRoot;i!=null&&(o=_.relative(i,o));var s=new he,u=new he;this._mappings.unsortedForEach(function(a){if(a.source===o&&a.originalLine!=null){var l=e.originalPositionFor({line:a.originalLine,column:a.originalColumn});l.source!=null&&(a.source=l.source,n!=null&&(a.source=_.join(n,a.source)),i!=null&&(a.source=_.relative(i,a.source)),a.originalLine=l.line,a.originalColumn=l.column,l.name!=null&&(a.name=l.name))}var c=a.source;c!=null&&!s.has(c)&&s.add(c);var p=a.name;p!=null&&!u.has(p)&&u.add(p)},this),this._sources=s,this._names=u,e.sources.forEach(function(a){var l=e.sourceContentFor(a);l!=null&&(n!=null&&(a=_.join(n,a)),i!=null&&(a=_.relative(i,a)),this.setSourceContent(a,l))},this)};R.prototype._validateMapping=function(e,t,n,o){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!n&&!o)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&n)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:n,original:t,name:o}))}};R.prototype._serializeMappings=function(){for(var e=0,t=1,n=0,o=0,i=0,s=0,u="",a,l,c,p,f=this._mappings.toArray(),g=0,y=f.length;g<y;g++){if(l=f[g],a="",l.generatedLine!==t)for(e=0;l.generatedLine!==t;)a+=";",t++;else if(g>0){if(!_.compareByGeneratedPositionsInflated(l,f[g-1]))continue;a+=","}a+=oe.encode(l.generatedColumn-e),e=l.generatedColumn,l.source!=null&&(p=this._sources.indexOf(l.source),a+=oe.encode(p-s),s=p,a+=oe.encode(l.originalLine-1-o),o=l.originalLine-1,a+=oe.encode(l.originalColumn-n),n=l.originalColumn,l.name!=null&&(c=this._names.indexOf(l.name),a+=oe.encode(c-i),i=c)),u+=a}return u};R.prototype._generateSourcesContent=function(e,t){return e.map(function(n){if(!this._sourcesContents)return null;t!=null&&(n=_.relative(t,n));var o=_.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)};R.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};R.prototype.toString=function(){return JSON.stringify(this.toJSON())};wr.SourceMapGenerator=R});var Cr=m(j=>{j.GREATEST_LOWER_BOUND=1;j.LEAST_UPPER_BOUND=2;function Pe(r,e,t,n,o,i){var s=Math.floor((e-r)/2)+r,u=o(t,n[s],!0);return u===0?s:u>0?e-s>1?Pe(s,e,t,n,o,i):i==j.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-r>1?Pe(r,s,t,n,o,i):i==j.LEAST_UPPER_BOUND?s:r<0?-1:r}j.search=function(e,t,n,o){if(t.length===0)return-1;var i=Pe(-1,t.length,e,t,n,o||j.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(t[i],t[i-1],!0)===0;)--i;return i}});var Or=m(Er=>{function Ie(r,e,t){var n=r[e];r[e]=r[t],r[t]=n}function $t(r,e){return Math.round(r+Math.random()*(e-r))}function Ue(r,e,t,n){if(t<n){var o=$t(t,n),i=t-1;Ie(r,o,n);for(var s=r[n],u=t;u<n;u++)e(r[u],s)<=0&&(i+=1,Ie(r,i,u));Ie(r,i+1,u);var a=i+1;Ue(r,e,t,a-1),Ue(r,e,a+1,n)}}Er.quickSort=function(r,e){Ue(r,e,0,r.length-1)}});var br=m(pe=>{var h=K(),De=Cr(),X=xe().ArraySet,Vt=Me(),ie=Or().quickSort;function v(r,e){var t=r;return typeof r=="string"&&(t=h.parseSourceMapInput(r)),t.sections!=null?new T(t,e):new S(t,e)}v.fromSourceMap=function(r,e){return S.fromSourceMap(r,e)};v.prototype._version=3;v.prototype.__generatedMappings=null;Object.defineProperty(v.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});v.prototype.__originalMappings=null;Object.defineProperty(v.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});v.prototype._charIsMappingSeparator=function(e,t){var n=e.charAt(t);return n===";"||n===","};v.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};v.GENERATED_ORDER=1;v.ORIGINAL_ORDER=2;v.GREATEST_LOWER_BOUND=1;v.LEAST_UPPER_BOUND=2;v.prototype.eachMapping=function(e,t,n){var o=t||null,i=n||v.GENERATED_ORDER,s;switch(i){case v.GENERATED_ORDER:s=this._generatedMappings;break;case v.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;s.map(function(a){var l=a.source===null?null:this._sources.at(a.source);return l=h.computeSourceURL(u,l,this._sourceMapURL),{source:l,generatedLine:a.generatedLine,generatedColumn:a.generatedColumn,originalLine:a.originalLine,originalColumn:a.originalColumn,name:a.name===null?null:this._names.at(a.name)}},this).forEach(e,o)};v.prototype.allGeneratedPositionsFor=function(e){var t=h.getArg(e,"line"),n={source:h.getArg(e,"source"),originalLine:t,originalColumn:h.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,De.LEAST_UPPER_BOUND);if(i>=0){var s=this._originalMappings[i];if(e.column===void 0)for(var u=s.originalLine;s&&s.originalLine===u;)o.push({line:h.getArg(s,"generatedLine",null),column:h.getArg(s,"generatedColumn",null),lastColumn:h.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var a=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==a;)o.push({line:h.getArg(s,"generatedLine",null),column:h.getArg(s,"generatedColumn",null),lastColumn:h.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return o};pe.SourceMapConsumer=v;function S(r,e){var t=r;typeof r=="string"&&(t=h.parseSourceMapInput(r));var n=h.getArg(t,"version"),o=h.getArg(t,"sources"),i=h.getArg(t,"names",[]),s=h.getArg(t,"sourceRoot",null),u=h.getArg(t,"sourcesContent",null),a=h.getArg(t,"mappings"),l=h.getArg(t,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=h.normalize(s)),o=o.map(String).map(h.normalize).map(function(c){return s&&h.isAbsolute(s)&&h.isAbsolute(c)?h.relative(s,c):c}),this._names=X.fromArray(i.map(String),!0),this._sources=X.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(c){return h.computeSourceURL(s,c,e)}),this.sourceRoot=s,this.sourcesContent=u,this._mappings=a,this._sourceMapURL=e,this.file=l}S.prototype=Object.create(v.prototype);S.prototype.consumer=v;S.prototype._findSourceIndex=function(r){var e=r;if(this.sourceRoot!=null&&(e=h.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==r)return t;return-1};S.fromSourceMap=function(e,t){var n=Object.create(S.prototype),o=n._names=X.fromArray(e._names.toArray(),!0),i=n._sources=X.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=t,n._absoluteSources=n._sources.toArray().map(function(g){return h.computeSourceURL(n.sourceRoot,g,t)});for(var s=e._mappings.toArray().slice(),u=n.__generatedMappings=[],a=n.__originalMappings=[],l=0,c=s.length;l<c;l++){var p=s[l],f=new Ar;f.generatedLine=p.generatedLine,f.generatedColumn=p.generatedColumn,p.source&&(f.source=i.indexOf(p.source),f.originalLine=p.originalLine,f.originalColumn=p.originalColumn,p.name&&(f.name=o.indexOf(p.name)),a.push(f)),u.push(f)}return ie(n.__originalMappings,h.compareByOriginalPositions),n};S.prototype._version=3;Object.defineProperty(S.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Ar(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}S.prototype._parseMappings=function(e,t){for(var n=1,o=0,i=0,s=0,u=0,a=0,l=e.length,c=0,p={},f={},g=[],y=[],O,ce,w,z,He;c<l;)if(e.charAt(c)===";")n++,c++,o=0;else if(e.charAt(c)===",")c++;else{for(O=new Ar,O.generatedLine=n,z=c;z<l&&!this._charIsMappingSeparator(e,z);z++);if(ce=e.slice(c,z),w=p[ce],w)c+=ce.length;else{for(w=[];c<z;)Vt.decode(e,c,f),He=f.value,c=f.rest,w.push(He);if(w.length===2)throw new Error("Found a source, but no line and column");if(w.length===3)throw new Error("Found a source and line, but no column");p[ce]=w}O.generatedColumn=o+w[0],o=O.generatedColumn,w.length>1&&(O.source=u+w[1],u+=w[1],O.originalLine=i+w[2],i=O.originalLine,O.originalLine+=1,O.originalColumn=s+w[3],s=O.originalColumn,w.length>4&&(O.name=a+w[4],a+=w[4])),y.push(O),typeof O.originalLine=="number"&&g.push(O)}ie(y,h.compareByGeneratedPositionsDeflated),this.__generatedMappings=y,ie(g,h.compareByOriginalPositions),this.__originalMappings=g};S.prototype._findMapping=function(e,t,n,o,i,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return De.search(e,t,i,s)};S.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(t.generatedLine===n.generatedLine){t.lastGeneratedColumn=n.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};S.prototype.originalPositionFor=function(e){var t={generatedLine:h.getArg(e,"line"),generatedColumn:h.getArg(e,"column")},n=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",h.compareByGeneratedPositionsDeflated,h.getArg(e,"bias",v.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===t.generatedLine){var i=h.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=h.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=h.getArg(o,"name",null);return s!==null&&(s=this._names.at(s)),{source:i,line:h.getArg(o,"originalLine",null),column:h.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};S.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};S.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var o=e;this.sourceRoot!=null&&(o=h.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=h.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(t)return null;throw new Error('"'+o+'" is not in the SourceMap.')};S.prototype.generatedPositionFor=function(e){var t=h.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var n={source:t,originalLine:h.getArg(e,"line"),originalColumn:h.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",h.compareByOriginalPositions,h.getArg(e,"bias",v.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===n.source)return{line:h.getArg(i,"generatedLine",null),column:h.getArg(i,"generatedColumn",null),lastColumn:h.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};pe.BasicSourceMapConsumer=S;function T(r,e){var t=r;typeof r=="string"&&(t=h.parseSourceMapInput(r));var n=h.getArg(t,"version"),o=h.getArg(t,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new X,this._names=new X;var i={line:-1,column:0};this._sections=o.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var u=h.getArg(s,"offset"),a=h.getArg(u,"line"),l=h.getArg(u,"column");if(a<i.line||a===i.line&&l<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=u,{generatedOffset:{generatedLine:a+1,generatedColumn:l+1},consumer:new v(h.getArg(s,"map"),e)}})}T.prototype=Object.create(v.prototype);T.prototype.constructor=v;T.prototype._version=3;Object.defineProperty(T.prototype,"sources",{get:function(){for(var r=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)r.push(this._sections[e].consumer.sources[t]);return r}});T.prototype.originalPositionFor=function(e){var t={generatedLine:h.getArg(e,"line"),generatedColumn:h.getArg(e,"column")},n=De.search(t,this._sections,function(i,s){var u=i.generatedLine-s.generatedOffset.generatedLine;return u||i.generatedColumn-s.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:t.generatedLine-(o.generatedOffset.generatedLine-1),column:t.generatedColumn-(o.generatedOffset.generatedLine===t.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};T.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};T.prototype.sourceContentFor=function(e,t){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],i=o.consumer.sourceContentFor(e,!0);if(i)return i}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};T.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var n=this._sections[t];if(n.consumer._findSourceIndex(h.getArg(e,"source"))!==-1){var o=n.consumer.generatedPositionFor(e);if(o){var i={line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};T.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var u=i[s],a=o.consumer._sources.at(u.source);a=h.computeSourceURL(o.consumer.sourceRoot,a,this._sourceMapURL),this._sources.add(a),a=this._sources.indexOf(a);var l=null;u.name&&(l=o.consumer._names.at(u.name),this._names.add(l),l=this._names.indexOf(l));var c={source:a,generatedLine:u.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(o.generatedOffset.generatedLine===u.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:l};this.__generatedMappings.push(c),typeof c.originalLine=="number"&&this.__originalMappings.push(c)}ie(this.__generatedMappings,h.compareByGeneratedPositionsDeflated),ie(this.__originalMappings,h.compareByOriginalPositions)};pe.IndexedSourceMapConsumer=T});var Mr=m(Rr=>{var Jt=Ne().SourceMapGenerator,de=K(),zt=/(\r?\n)/,Wt=10,Y="$$$isSourceNode$$$";function A(r,e,t,n,o){this.children=[],this.sourceContents={},this.line=r==null?null:r,this.column=e==null?null:e,this.source=t==null?null:t,this.name=o==null?null:o,this[Y]=!0,n!=null&&this.add(n)}A.fromStringWithSourceMap=function(e,t,n){var o=new A,i=e.split(zt),s=0,u=function(){var f=y(),g=y()||"";return f+g;function y(){return s<i.length?i[s++]:void 0}},a=1,l=0,c=null;return t.eachMapping(function(f){if(c!==null)if(a<f.generatedLine)p(c,u()),a++,l=0;else{var g=i[s]||"",y=g.substr(0,f.generatedColumn-l);i[s]=g.substr(f.generatedColumn-l),l=f.generatedColumn,p(c,y),c=f;return}for(;a<f.generatedLine;)o.add(u()),a++;if(l<f.generatedColumn){var g=i[s]||"";o.add(g.substr(0,f.generatedColumn)),i[s]=g.substr(f.generatedColumn),l=f.generatedColumn}c=f},this),s<i.length&&(c&&p(c,u()),o.add(i.splice(s).join(""))),t.sources.forEach(function(f){var g=t.sourceContentFor(f);g!=null&&(n!=null&&(f=de.join(n,f)),o.setSourceContent(f,g))}),o;function p(f,g){if(f===null||f.source===void 0)o.add(g);else{var y=n?de.join(n,f.source):f.source;o.add(new A(f.originalLine,f.originalColumn,y,g,f.name))}}};A.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[Y]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};A.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[Y]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};A.prototype.walk=function(e){for(var t,n=0,o=this.children.length;n<o;n++)t=this.children[n],t[Y]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})};A.prototype.join=function(e){var t,n,o=this.children.length;if(o>0){for(t=[],n=0;n<o-1;n++)t.push(this.children[n]),t.push(e);t.push(this.children[n]),this.children=t}return this};A.prototype.replaceRight=function(e,t){var n=this.children[this.children.length-1];return n[Y]?n.replaceRight(e,t):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,t):this.children.push("".replace(e,t)),this};A.prototype.setSourceContent=function(e,t){this.sourceContents[de.toSetString(e)]=t};A.prototype.walkSourceContents=function(e){for(var t=0,n=this.children.length;t<n;t++)this.children[t][Y]&&this.children[t].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),t=0,n=o.length;t<n;t++)e(de.fromSetString(o[t]),this.sourceContents[o[t]])};A.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e};A.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},n=new Jt(e),o=!1,i=null,s=null,u=null,a=null;return this.walk(function(l,c){t.code+=l,c.source!==null&&c.line!==null&&c.column!==null?((i!==c.source||s!==c.line||u!==c.column||a!==c.name)&&n.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:t.line,column:t.column},name:c.name}),i=c.source,s=c.line,u=c.column,a=c.name,o=!0):o&&(n.addMapping({generated:{line:t.line,column:t.column}}),i=null,o=!1);for(var p=0,f=l.length;p<f;p++)l.charCodeAt(p)===Wt?(t.line++,t.column=0,p+1===f?(i=null,o=!1):o&&n.addMapping({source:c.source,original:{line:c.line,column:c.column},generated:{line:t.line,column:t.column},name:c.name})):t.column++}),this.walkSourceContents(function(l,c){n.setSourceContent(l,c)}),{code:t.code,map:n}};Rr.SourceNode=A});var Lr=m(ge=>{ge.SourceMapGenerator=Ne().SourceMapGenerator;ge.SourceMapConsumer=br().SourceMapConsumer;ge.SourceNode=Mr().SourceNode});var qr=m((Ao,Tr)=>{var Qt=Object.prototype.toString,Be=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function Kt(r){return Qt.call(r).slice(8,-1)==="ArrayBuffer"}function Xt(r,e,t){e>>>=0;var n=r.byteLength-e;if(n<0)throw new RangeError("'offset' is out of bounds");if(t===void 0)t=n;else if(t>>>=0,t>n)throw new RangeError("'length' is out of bounds");return Be?Buffer.from(r.slice(e,e+t)):new Buffer(new Uint8Array(r.slice(e,e+t)))}function Yt(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return Be?Buffer.from(r,e):new Buffer(r,e)}function Zt(r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return Kt(r)?Xt(r,e,t):typeof r=="string"?Yt(r,e):Be?Buffer.from(r):new Buffer(r)}Tr.exports=Zt});var Gr=m(($,Fe)=>{var Ht=Lr().SourceMapConsumer,Ge=require("path"),x;try{x=require("fs"),(!x.existsSync||!x.readFileSync)&&(x=null)}catch{}var en=qr();function xr(r,e){return r.require(e)}var Nr=!1,Pr=!1,ke=!1,se="auto",F={},ue={},rn=/^data:application\/json[^,]+base64,/,U=[],D=[];function $e(){return se==="browser"?!0:se==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}function tn(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}function nn(){return typeof process=="object"&&process!==null?process.version:""}function on(){if(typeof process=="object"&&process!==null)return process.stderr}function sn(r){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(r)}function ve(r){return function(e){for(var t=0;t<r.length;t++){var n=r[t](e);if(n)return n}return null}}var Ve=ve(U);U.push(function(r){if(r=r.trim(),/^file:/.test(r)&&(r=r.replace(/file:\/\/\/(\w:)?/,function(n,o){return o?"":"/"})),r in F)return F[r];var e="";try{if(x)x.existsSync(r)&&(e=x.readFileSync(r,"utf8"));else{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),t.readyState===4&&t.status===200&&(e=t.responseText)}}catch{}return F[r]=e});function je(r,e){if(!r)return e;var t=Ge.dirname(r),n=/^\w+:\/\/[^\/]*/.exec(t),o=n?n[0]:"",i=t.slice(o.length);return o&&/^\/\w\:/.test(i)?(o+="/",o+Ge.resolve(t.slice(o.length),e).replace(/\\/g,"/")):o+Ge.resolve(t.slice(o.length),e)}function un(r){var e;if($e())try{var t=new XMLHttpRequest;t.open("GET",r,!1),t.send(null),e=t.readyState===4?t.responseText:null;var n=t.getResponseHeader("SourceMap")||t.getResponseHeader("X-SourceMap");if(n)return n}catch{}e=Ve(r);for(var o=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,i,s;s=o.exec(e);)i=s;return i?i[1]:null}var Je=ve(D);D.push(function(r){var e=un(r);if(!e)return null;var t;if(rn.test(e)){var n=e.slice(e.indexOf(",")+1);t=en(n,"base64").toString(),e=r}else e=je(r,e),t=Ve(e);return t?{url:e,map:t}:null});function ze(r){var e=ue[r.source];if(!e){var t=Je(r.source);t?(e=ue[r.source]={url:t.url,map:new Ht(t.map)},e.map.sourcesContent&&e.map.sources.forEach(function(o,i){var s=e.map.sourcesContent[i];if(s){var u=je(e.url,o);F[u]=s}})):e=ue[r.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var n=e.map.originalPositionFor(r);if(n.source!==null)return n.source=je(e.url,n.source),n}return r}function Ur(r){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(r);if(e){var t=ze({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+t.source+":"+t.line+":"+(t.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(r),e?"eval at "+e[1]+" ("+Ur(e[2])+")":r}function an(){var r,e="";if(this.isNative())e="native";else{r=this.getScriptNameOrSourceURL(),!r&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),r?e+=r:e+="<anonymous>";var t=this.getLineNumber();if(t!=null){e+=":"+t;var n=this.getColumnNumber();n&&(e+=":"+n)}}var o="",i=this.getFunctionName(),s=!0,u=this.isConstructor(),a=!(this.isToplevel()||u);if(a){var l=this.getTypeName();l==="[object Object]"&&(l="null");var c=this.getMethodName();i?(l&&i.indexOf(l)!=0&&(o+=l+"."),o+=i,c&&i.indexOf("."+c)!=i.length-c.length-1&&(o+=" [as "+c+"]")):o+=l+"."+(c||"<anonymous>")}else u?o+="new "+(i||"<anonymous>"):i?o+=i:(o+=e,s=!1);return s&&(o+=" ("+e+")"),o}function Ir(r){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(function(t){e[t]=/^(?:is|get)/.test(t)?function(){return r[t].call(r)}:r[t]}),e.toString=an,e}function Dr(r,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),r.isNative())return e.curPosition=null,r;var t=r.getFileName()||r.getScriptNameOrSourceURL();if(t){var n=r.getLineNumber(),o=r.getColumnNumber()-1,i=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,s=i.test(nn())?0:62;n===1&&o>s&&!$e()&&!r.isEval()&&(o-=s);var u=ze({source:t,line:n,column:o});e.curPosition=u,r=Ir(r);var a=r.getFunctionName;return r.getFunctionName=function(){return e.nextPosition==null?a():e.nextPosition.name||a()},r.getFileName=function(){return u.source},r.getLineNumber=function(){return u.line},r.getColumnNumber=function(){return u.column+1},r.getScriptNameOrSourceURL=function(){return u.source},r}var l=r.isEval()&&r.getEvalOrigin();return l&&(l=Ur(l),r=Ir(r),r.getEvalOrigin=function(){return l}),r}function ln(r,e){ke&&(F={},ue={});for(var t=r.name||"Error",n=r.message||"",o=t+": "+n,i={nextPosition:null,curPosition:null},s=[],u=e.length-1;u>=0;u--)s.push(`
    at `+Dr(e[u],i)),i.nextPosition=i.curPosition;return i.curPosition=i.nextPosition=null,o+s.reverse().join("")}function Br(r){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(r.stack);if(e){var t=e[1],n=+e[2],o=+e[3],i=F[t];if(!i&&x&&x.existsSync(t))try{i=x.readFileSync(t,"utf8")}catch{i=""}if(i){var s=i.split(/(?:\r\n|\r|\n)/)[n-1];if(s)return t+":"+n+`
`+s+`
`+new Array(o).join(" ")+"^"}}return null}function cn(r){var e=Br(r),t=on();t&&t._handle&&t._handle.setBlocking&&t._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(r.stack),sn(1)}function fn(){var r=process.emit;process.emit=function(e){if(e==="uncaughtException"){var t=arguments[1]&&arguments[1].stack,n=this.listeners(e).length>0;if(t&&!n)return cn(arguments[1])}return r.apply(this,arguments)}}var hn=U.slice(0),pn=D.slice(0);$.wrapCallSite=Dr;$.getErrorSource=Br;$.mapSourcePosition=ze;$.retrieveSourceMap=Je;$.install=function(r){if(r=r||{},r.environment&&(se=r.environment,["node","browser","auto"].indexOf(se)===-1))throw new Error("environment "+se+" was unknown. Available options are {auto, browser, node}");if(r.retrieveFile&&(r.overrideRetrieveFile&&(U.length=0),U.unshift(r.retrieveFile)),r.retrieveSourceMap&&(r.overrideRetrieveSourceMap&&(D.length=0),D.unshift(r.retrieveSourceMap)),r.hookRequire&&!$e()){var e=xr(Fe,"module"),t=e.prototype._compile;t.__sourceMapSupport||(e.prototype._compile=function(i,s){return F[s]=i,ue[s]=void 0,t.call(this,i,s)},e.prototype._compile.__sourceMapSupport=!0)}if(ke||(ke="emptyCacheBetweenOperations"in r?r.emptyCacheBetweenOperations:!1),Nr||(Nr=!0,Error.prepareStackTrace=ln),!Pr){var n="handleUncaughtExceptions"in r?r.handleUncaughtExceptions:!0;try{var o=xr(Fe,"worker_threads");o.isMainThread===!1&&(n=!1)}catch{}n&&tn()&&(Pr=!0,fn())}};$.resetRetrieveHandlers=function(){U.length=0,D.length=0,U=hn.slice(0),D=pn.slice(0),Je=ve(D),Ve=ve(U)}});var me=m(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.toCommandProperties=Z.toCommandValue=void 0;function dn(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}Z.toCommandValue=dn;function gn(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}Z.toCommandProperties=gn});var Vr=m(M=>{"use strict";var vn=M&&M.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),mn=M&&M.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),_n=M&&M.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&vn(e,r,t);return mn(e,r),e};Object.defineProperty(M,"__esModule",{value:!0});M.issue=M.issueCommand=void 0;var yn=_n(require("os")),jr=me();function Fr(r,e,t){let n=new $r(r,e,t);process.stdout.write(n.toString()+yn.EOL)}M.issueCommand=Fr;function Sn(r,e=""){Fr(r,{},e)}M.issue=Sn;var kr="::",$r=class{constructor(e,t,n){e||(e="missing.command"),this.command=e,this.properties=t,this.message=n}toString(){let e=kr+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(t?t=!1:e+=",",e+=`${n}=${Cn(o)}`)}}return e+=`${kr}${wn(this.message)}`,e}};function wn(r){return jr.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Cn(r){return jr.toCommandValue(r).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var Wr=m(N=>{"use strict";var En=N&&N.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),On=N&&N.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),zr=N&&N.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&En(e,r,t);return On(e,r),e};Object.defineProperty(N,"__esModule",{value:!0});N.issueCommand=void 0;var Jr=zr(require("fs")),An=zr(require("os")),bn=me();function Rn(r,e){let t=process.env[`GITHUB_${r}`];if(!t)throw new Error(`Unable to find environment variable for file command ${r}`);if(!Jr.existsSync(t))throw new Error(`Missing file at path: ${t}`);Jr.appendFileSync(t,`${bn.toCommandValue(e)}${An.EOL}`,{encoding:"utf8"})}N.issueCommand=Rn});var Kr=m(_e=>{"use strict";Object.defineProperty(_e,"__esModule",{value:!0});function Mn(r){let e=r.protocol==="https:",t;if(Qr(r))return t;let n;return e?n=process.env.https_proxy||process.env.HTTPS_PROXY:n=process.env.http_proxy||process.env.HTTP_PROXY,n&&(t=new URL(n)),t}_e.getProxyUrl=Mn;function Qr(r){if(!r.hostname)return!1;let e=process.env.no_proxy||process.env.NO_PROXY||"";if(!e)return!1;let t;r.port?t=Number(r.port):r.protocol==="http:"?t=80:r.protocol==="https:"&&(t=443);let n=[r.hostname.toUpperCase()];typeof t=="number"&&n.push(`${n[0]}:${t}`);for(let o of e.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(n.some(i=>i===o))return!0;return!1}_e.checkBypass=Qr});var Hr=m(H=>{"use strict";var To=require("net"),Ln=require("tls"),We=require("http"),Xr=require("https"),Tn=require("events"),qo=require("assert"),qn=require("util");H.httpOverHttp=xn;H.httpsOverHttp=Nn;H.httpOverHttps=Pn;H.httpsOverHttps=In;function xn(r){var e=new I(r);return e.request=We.request,e}function Nn(r){var e=new I(r);return e.request=We.request,e.createSocket=Yr,e.defaultPort=443,e}function Pn(r){var e=new I(r);return e.request=Xr.request,e}function In(r){var e=new I(r);return e.request=Xr.request,e.createSocket=Yr,e.defaultPort=443,e}function I(r){var e=this;e.options=r||{},e.proxyOptions=e.options.proxy||{},e.maxSockets=e.options.maxSockets||We.Agent.defaultMaxSockets,e.requests=[],e.sockets=[],e.on("free",function(n,o,i,s){for(var u=Zr(o,i,s),a=0,l=e.requests.length;a<l;++a){var c=e.requests[a];if(c.host===u.host&&c.port===u.port){e.requests.splice(a,1),c.request.onSocket(n);return}}n.destroy(),e.removeSocket(n)})}qn.inherits(I,Tn.EventEmitter);I.prototype.addRequest=function(e,t,n,o){var i=this,s=Qe({request:e},i.options,Zr(t,n,o));if(i.sockets.length>=this.maxSockets){i.requests.push(s);return}i.createSocket(s,function(u){u.on("free",a),u.on("close",l),u.on("agentRemove",l),e.onSocket(u);function a(){i.emit("free",u,s)}function l(c){i.removeSocket(u),u.removeListener("free",a),u.removeListener("close",l),u.removeListener("agentRemove",l)}})};I.prototype.createSocket=function(e,t){var n=this,o={};n.sockets.push(o);var i=Qe({},n.proxyOptions,{method:"CONNECT",path:e.host+":"+e.port,agent:!1,headers:{host:e.host+":"+e.port}});e.localAddress&&(i.localAddress=e.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),B("making CONNECT request");var s=n.request(i);s.useChunkedEncodingByDefault=!1,s.once("response",u),s.once("upgrade",a),s.once("connect",l),s.once("error",c),s.end();function u(p){p.upgrade=!0}function a(p,f,g){process.nextTick(function(){l(p,f,g)})}function l(p,f,g){if(s.removeAllListeners(),f.removeAllListeners(),p.statusCode!==200){B("tunneling socket could not be established, statusCode=%d",p.statusCode),f.destroy();var y=new Error("tunneling socket could not be established, statusCode="+p.statusCode);y.code="ECONNRESET",e.request.emit("error",y),n.removeSocket(o);return}if(g.length>0){B("got illegal response body from proxy"),f.destroy();var y=new Error("got illegal response body from proxy");y.code="ECONNRESET",e.request.emit("error",y),n.removeSocket(o);return}return B("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=f,t(f)}function c(p){s.removeAllListeners(),B(`tunneling socket could not be established, cause=%s
`,p.message,p.stack);var f=new Error("tunneling socket could not be established, cause="+p.message);f.code="ECONNRESET",e.request.emit("error",f),n.removeSocket(o)}};I.prototype.removeSocket=function(e){var t=this.sockets.indexOf(e);if(t!==-1){this.sockets.splice(t,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function Yr(r,e){var t=this;I.prototype.createSocket.call(t,r,function(n){var o=r.request.getHeader("host"),i=Qe({},t.options,{socket:n,servername:o?o.replace(/:.*$/,""):r.host}),s=Ln.connect(0,i);t.sockets[t.sockets.indexOf(n)]=s,e(s)})}function Zr(r,e,t){return typeof r=="string"?{host:r,port:e,localAddress:t}:r}function Qe(r){for(var e=1,t=arguments.length;e<t;++e){var n=arguments[e];if(typeof n=="object")for(var o=Object.keys(n),i=0,s=o.length;i<s;++i){var u=o[i];n[u]!==void 0&&(r[u]=n[u])}}return r}var B;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?B=function(){var r=Array.prototype.slice.call(arguments);typeof r[0]=="string"?r[0]="TUNNEL: "+r[0]:r.unshift("TUNNEL:"),console.error.apply(console,r)}:B=function(){};H.debug=B});var rt=m((No,et)=>{et.exports=Hr()});var nt=m(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var ye=require("http"),Ke=require("https"),tt=Kr(),ee,q;(function(r){r[r.OK=200]="OK",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.ResourceMoved=302]="ResourceMoved",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.SwitchProxy=306]="SwitchProxy",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout"})(q=b.HttpCodes||(b.HttpCodes={}));var E;(function(r){r.Accept="accept",r.ContentType="content-type"})(E=b.Headers||(b.Headers={}));var G;(function(r){r.ApplicationJson="application/json"})(G=b.MediaTypes||(b.MediaTypes={}));function Un(r){let e=tt.getProxyUrl(new URL(r));return e?e.href:""}b.getProxyUrl=Un;var Dn=[q.MovedPermanently,q.ResourceMoved,q.SeeOther,q.TemporaryRedirect,q.PermanentRedirect],Bn=[q.BadGateway,q.ServiceUnavailable,q.GatewayTimeout],Gn=["OPTIONS","GET","DELETE","HEAD"],kn=10,jn=5,ae=class extends Error{constructor(e,t){super(e);this.name="HttpClientError",this.statusCode=t,Object.setPrototypeOf(this,ae.prototype)}};b.HttpClientError=ae;var Xe=class{constructor(e){this.message=e}readBody(){return new Promise(async(e,t)=>{let n=Buffer.alloc(0);this.message.on("data",o=>{n=Buffer.concat([n,o])}),this.message.on("end",()=>{e(n.toString())})})}};b.HttpClientResponse=Xe;function Fn(r){return new URL(r).protocol==="https:"}b.isHttps=Fn;var Se=class{constructor(e,t,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=e,this.handlers=t||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(e,t){return this.request("OPTIONS",e,null,t||{})}get(e,t){return this.request("GET",e,null,t||{})}del(e,t){return this.request("DELETE",e,null,t||{})}post(e,t,n){return this.request("POST",e,t,n||{})}patch(e,t,n){return this.request("PATCH",e,t,n||{})}put(e,t,n){return this.request("PUT",e,t,n||{})}head(e,t){return this.request("HEAD",e,null,t||{})}sendStream(e,t,n,o){return this.request(e,t,n,o)}async getJson(e,t={}){t[E.Accept]=this._getExistingOrDefaultHeader(t,E.Accept,G.ApplicationJson);let n=await this.get(e,t);return this._processResponse(n,this.requestOptions)}async postJson(e,t,n={}){let o=JSON.stringify(t,null,2);n[E.Accept]=this._getExistingOrDefaultHeader(n,E.Accept,G.ApplicationJson),n[E.ContentType]=this._getExistingOrDefaultHeader(n,E.ContentType,G.ApplicationJson);let i=await this.post(e,o,n);return this._processResponse(i,this.requestOptions)}async putJson(e,t,n={}){let o=JSON.stringify(t,null,2);n[E.Accept]=this._getExistingOrDefaultHeader(n,E.Accept,G.ApplicationJson),n[E.ContentType]=this._getExistingOrDefaultHeader(n,E.ContentType,G.ApplicationJson);let i=await this.put(e,o,n);return this._processResponse(i,this.requestOptions)}async patchJson(e,t,n={}){let o=JSON.stringify(t,null,2);n[E.Accept]=this._getExistingOrDefaultHeader(n,E.Accept,G.ApplicationJson),n[E.ContentType]=this._getExistingOrDefaultHeader(n,E.ContentType,G.ApplicationJson);let i=await this.patch(e,o,n);return this._processResponse(i,this.requestOptions)}async request(e,t,n,o){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(t),s=this._prepareRequest(e,i,o),u=this._allowRetries&&Gn.indexOf(e)!=-1?this._maxRetries+1:1,a=0,l;for(;a<u;){if(l=await this.requestRaw(s,n),l&&l.message&&l.message.statusCode===q.Unauthorized){let p;for(let f=0;f<this.handlers.length;f++)if(this.handlers[f].canHandleAuthentication(l)){p=this.handlers[f];break}return p?p.handleAuthentication(this,s,n):l}let c=this._maxRedirects;for(;Dn.indexOf(l.message.statusCode)!=-1&&this._allowRedirects&&c>0;){let p=l.message.headers.location;if(!p)break;let f=new URL(p);if(i.protocol=="https:"&&i.protocol!=f.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await l.readBody(),f.hostname!==i.hostname)for(let g in o)g.toLowerCase()==="authorization"&&delete o[g];s=this._prepareRequest(e,f,o),l=await this.requestRaw(s,n),c--}if(Bn.indexOf(l.message.statusCode)==-1)return l;a+=1,a<u&&(await l.readBody(),await this._performExponentialBackoff(a))}return l}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(e,t){return new Promise((n,o)=>{let i=function(s,u){s&&o(s),n(u)};this.requestRawWithCallback(e,t,i)})}requestRawWithCallback(e,t,n){let o;typeof t=="string"&&(e.options.headers["Content-Length"]=Buffer.byteLength(t,"utf8"));let i=!1,s=(a,l)=>{i||(i=!0,n(a,l))},u=e.httpModule.request(e.options,a=>{let l=new Xe(a);s(null,l)});u.on("socket",a=>{o=a}),u.setTimeout(this._socketTimeout||3*6e4,()=>{o&&o.end(),s(new Error("Request timeout: "+e.options.path),null)}),u.on("error",function(a){s(a,null)}),t&&typeof t=="string"&&u.write(t,"utf8"),t&&typeof t!="string"?(t.on("close",function(){u.end()}),t.pipe(u)):u.end()}getAgent(e){let t=new URL(e);return this._getAgent(t)}_prepareRequest(e,t,n){let o={};o.parsedUrl=t;let i=o.parsedUrl.protocol==="https:";o.httpModule=i?Ke:ye;let s=i?443:80;return o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):s,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=e,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers&&this.handlers.forEach(u=>{u.prepareRequest(o.options)}),o}_mergeHeaders(e){let t=n=>Object.keys(n).reduce((o,i)=>(o[i.toLowerCase()]=n[i],o),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},t(this.requestOptions.headers),t(e)):t(e||{})}_getExistingOrDefaultHeader(e,t,n){let o=s=>Object.keys(s).reduce((u,a)=>(u[a.toLowerCase()]=s[a],u),{}),i;return this.requestOptions&&this.requestOptions.headers&&(i=o(this.requestOptions.headers)[t]),e[t]||i||n}_getAgent(e){let t,n=tt.getProxyUrl(e),o=n&&n.hostname;if(this._keepAlive&&o&&(t=this._proxyAgent),this._keepAlive&&!o&&(t=this._agent),t)return t;let i=e.protocol==="https:",s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||ye.globalAgent.maxSockets),o){ee||(ee=rt());let u={maxSockets:s,keepAlive:this._keepAlive,proxy:or(nr({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},a,l=n.protocol==="https:";i?a=l?ee.httpsOverHttps:ee.httpsOverHttp:a=l?ee.httpOverHttps:ee.httpOverHttp,t=a(u),this._proxyAgent=t}if(this._keepAlive&&!t){let u={keepAlive:this._keepAlive,maxSockets:s};t=i?new Ke.Agent(u):new ye.Agent(u),this._agent=t}return t||(t=i?Ke.globalAgent:ye.globalAgent),i&&this._ignoreSslError&&(t.options=Object.assign(t.options||{},{rejectUnauthorized:!1})),t}_performExponentialBackoff(e){e=Math.min(kn,e);let t=jn*Math.pow(2,e);return new Promise(n=>setTimeout(()=>n(),t))}static dateTimeDeserializer(e,t){if(typeof t=="string"){let n=new Date(t);if(!isNaN(n.valueOf()))return n}return t}async _processResponse(e,t){return new Promise(async(n,o)=>{let i=e.message.statusCode,s={statusCode:i,result:null,headers:{}};i==q.NotFound&&n(s);let u,a;try{a=await e.readBody(),a&&a.length>0&&(t&&t.deserializeDates?u=JSON.parse(a,Se.dateTimeDeserializer):u=JSON.parse(a),s.result=u),s.headers=e.message.headers}catch{}if(i>299){let l;u&&u.message?l=u.message:a&&a.length>0?l=a:l="Failed request: ("+i+")";let c=new ae(l,i);c.result=s.result,o(c)}else n(s)})}};b.HttpClient=Se});var ut=m(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});var ot=class{constructor(e,t){this.username=e,this.password=t}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,n){return null}};le.BasicCredentialHandler=ot;var it=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Bearer "+this.token}canHandleAuthentication(e){return!1}handleAuthentication(e,t,n){return null}};le.BearerCredentialHandler=it;var st=class{constructor(e){this.token=e}prepareRequest(e){e.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(e){return!1}handleAuthentication(e,t,n){return null}};le.PersonalAccessTokenCredentialHandler=st});var ct=m(re=>{"use strict";var at=re&&re.__awaiter||function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{l(n.next(c))}catch(p){s(p)}}function a(c){try{l(n.throw(c))}catch(p){s(p)}}function l(c){c.done?i(c.value):o(c.value).then(u,a)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(re,"__esModule",{value:!0});re.OidcClient=void 0;var $n=nt(),Vn=ut(),lt=we(),V=class{static createHttpClient(e=!0,t=10){let n={allowRetries:e,maxRetries:t};return new $n.HttpClient("actions/oidc-client",[new Vn.BearerCredentialHandler(V.getRequestToken())],n)}static getRequestToken(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return e}static getIDTokenUrl(){let e=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!e)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return e}static getCall(e){var t;return at(this,void 0,void 0,function*(){let i=(t=(yield V.createHttpClient().getJson(e).catch(s=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${s.statusCode}
 
        Error Message: ${s.result.message}`)})).result)===null||t===void 0?void 0:t.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(e){return at(this,void 0,void 0,function*(){try{let t=V.getIDTokenUrl();if(e){let o=encodeURIComponent(e);t=`${t}&audience=${o}`}lt.debug(`ID token url is ${t}`);let n=yield V.getCall(t);return lt.setSecret(n),n}catch(t){throw new Error(`Error message: ${t.message}`)}})}};re.OidcClient=V});var we=m(d=>{"use strict";var Jn=d&&d.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),zn=d&&d.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),ft=d&&d.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.hasOwnProperty.call(r,t)&&Jn(e,r,t);return zn(e,r),e},ht=d&&d.__awaiter||function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function u(c){try{l(n.next(c))}catch(p){s(p)}}function a(c){try{l(n.throw(c))}catch(p){s(p)}}function l(c){c.done?i(c.value):o(c.value).then(u,a)}l((n=n.apply(r,e||[])).next())})};Object.defineProperty(d,"__esModule",{value:!0});d.getIDToken=d.getState=d.saveState=d.group=d.endGroup=d.startGroup=d.info=d.notice=d.warning=d.error=d.debug=d.isDebug=d.setFailed=d.setCommandEcho=d.setOutput=d.getBooleanInput=d.getMultilineInput=d.getInput=d.addPath=d.setSecret=d.exportVariable=d.ExitCode=void 0;var L=Vr(),pt=Wr(),Ee=me(),Ce=ft(require("os")),Wn=ft(require("path")),Qn=ct(),dt;(function(r){r[r.Success=0]="Success",r[r.Failure=1]="Failure"})(dt=d.ExitCode||(d.ExitCode={}));function Kn(r,e){let t=Ee.toCommandValue(e);if(process.env[r]=t,process.env.GITHUB_ENV||""){let o="_GitHubActionsFileCommandDelimeter_",i=`${r}<<${o}${Ce.EOL}${t}${Ce.EOL}${o}`;pt.issueCommand("ENV",i)}else L.issueCommand("set-env",{name:r},t)}d.exportVariable=Kn;function Xn(r){L.issueCommand("add-mask",{},r)}d.setSecret=Xn;function Yn(r){process.env.GITHUB_PATH||""?pt.issueCommand("PATH",r):L.issueCommand("add-path",{},r),process.env.PATH=`${r}${Wn.delimiter}${process.env.PATH}`}d.addPath=Yn;function Ye(r,e){let t=process.env[`INPUT_${r.replace(/ /g,"_").toUpperCase()}`]||"";if(e&&e.required&&!t)throw new Error(`Input required and not supplied: ${r}`);return e&&e.trimWhitespace===!1?t:t.trim()}d.getInput=Ye;function Zn(r,e){return Ye(r,e).split(`
`).filter(n=>n!=="")}d.getMultilineInput=Zn;function Hn(r,e){let t=["true","True","TRUE"],n=["false","False","FALSE"],o=Ye(r,e);if(t.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${r}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}d.getBooleanInput=Hn;function eo(r,e){process.stdout.write(Ce.EOL),L.issueCommand("set-output",{name:r},e)}d.setOutput=eo;function ro(r){L.issue("echo",r?"on":"off")}d.setCommandEcho=ro;function to(r){process.exitCode=dt.Failure,gt(r)}d.setFailed=to;function no(){return process.env.RUNNER_DEBUG==="1"}d.isDebug=no;function oo(r){L.issueCommand("debug",{},r)}d.debug=oo;function gt(r,e={}){L.issueCommand("error",Ee.toCommandProperties(e),r instanceof Error?r.toString():r)}d.error=gt;function io(r,e={}){L.issueCommand("warning",Ee.toCommandProperties(e),r instanceof Error?r.toString():r)}d.warning=io;function so(r,e={}){L.issueCommand("notice",Ee.toCommandProperties(e),r instanceof Error?r.toString():r)}d.notice=so;function uo(r){process.stdout.write(r+Ce.EOL)}d.info=uo;function vt(r){L.issue("group",r)}d.startGroup=vt;function mt(){L.issue("endgroup")}d.endGroup=mt;function ao(r,e){return ht(this,void 0,void 0,function*(){vt(r);let t;try{t=yield e()}finally{mt()}return t})}d.group=ao;function lo(r,e){L.issueCommand("save-state",{name:r},e)}d.saveState=lo;function co(r){return process.env[`STATE_${r}`]||""}d.getState=co;function fo(r){return ht(this,void 0,void 0,function*(){return yield Qn.OidcClient.getIDToken(r)})}d.getIDToken=fo});var yt=m((Bo,Ze)=>{var te=we();async function _t(){try{te.exportVariable("AWS_ACCESS_KEY_ID",""),te.exportVariable("AWS_SECRET_ACCESS_KEY",""),te.exportVariable("AWS_SESSION_TOKEN",""),te.exportVariable("AWS_DEFAULT_REGION",""),te.exportVariable("AWS_REGION","")}catch(r){te.setFailed(r.message)}}Ze.exports=_t;require.main===Ze&&_t()});Gr().install();var St=ir(yt()),J=ir(we());require.main===module&&((0,J.exportVariable)("AWS_AVAILABLE_ROLES",""),(0,J.exportVariable)("INPUT_AWS-REGION",""),(0,J.exportVariable)("INPUT_MASK-AWS-ACCOUNT-ID",""),(0,J.exportVariable)("INPUT_ROLE-TO-ASSUME",""),(0,J.exportVariable)("INPUT_ROLE-DURATION-SECONDS",""),(0,J.exportVariable)("INPUT_CONFIG",""),(0,St.default)());
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL2Jhc2U2NC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvYmFzZTY0LXZscS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvdXRpbC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9saWIvYXJyYXktc2V0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9tYXBwaW5nLWxpc3QuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAvbGliL3NvdXJjZS1tYXAtZ2VuZXJhdG9yLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9iaW5hcnktc2VhcmNoLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9xdWljay1zb3J0LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2UtbWFwLWNvbnN1bWVyLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwL2xpYi9zb3VyY2Utbm9kZS5qcyIsICIuLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC9zb3VyY2UtbWFwLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9idWZmZXItZnJvbS9pbmRleC5qcyIsICIuLi9ub2RlX21vZHVsZXMvc291cmNlLW1hcC1zdXBwb3J0L3NvdXJjZS1tYXAtc3VwcG9ydC5qcyIsICIuLi9ub2RlX21vZHVsZXMvQGFjdGlvbnMvY29yZS9zcmMvdXRpbHMudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0BhY3Rpb25zL2NvcmUvc3JjL2NvbW1hbmQudHMiLCAiLi4vbm9kZV9tb2R1bGVzL0BhY3Rpb25zL2NvcmUvc3JjL2ZpbGUtY29tbWFuZC50cyIsICIuLi9ub2RlX21vZHVsZXMvQGFjdGlvbnMvaHR0cC1jbGllbnQvcHJveHkuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3R1bm5lbC9saWIvdHVubmVsLmpzIiwgIi4uL25vZGVfbW9kdWxlcy90dW5uZWwvaW5kZXguanMiLCAiLi4vbm9kZV9tb2R1bGVzL0BhY3Rpb25zL2h0dHAtY2xpZW50L2luZGV4LmpzIiwgIi4uL25vZGVfbW9kdWxlcy9AYWN0aW9ucy9odHRwLWNsaWVudC9hdXRoLmpzIiwgIi4uL25vZGVfbW9kdWxlcy9AYWN0aW9ucy9jb3JlL3NyYy9vaWRjLXV0aWxzLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9AYWN0aW9ucy9jb3JlL3NyYy9jb3JlLnRzIiwgIi4uL25vZGVfbW9kdWxlcy9hd3MtYWN0aW9ucy1jb25maWd1cmUtYXdzLWNyZWRlbnRpYWxzL2NsZWFudXAuanMiLCAiLi4vbm9kZV9tb2R1bGVzL3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3Rlci5qcyIsICIuLi9zcmMvY2xlYW51cC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyogLSotIE1vZGU6IGpzOyBqcy1pbmRlbnQtbGV2ZWw6IDI7IC0qLSAqL1xuLypcbiAqIENvcHlyaWdodCAyMDExIE1vemlsbGEgRm91bmRhdGlvbiBhbmQgY29udHJpYnV0b3JzXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBsaWNlbnNlLiBTZWUgTElDRU5TRSBvcjpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9CU0QtMy1DbGF1c2VcbiAqL1xuXG52YXIgaW50VG9DaGFyTWFwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nLnNwbGl0KCcnKTtcblxuLyoqXG4gKiBFbmNvZGUgYW4gaW50ZWdlciBpbiB0aGUgcmFuZ2Ugb2YgMCB0byA2MyB0byBhIHNpbmdsZSBiYXNlIDY0IGRpZ2l0LlxuICovXG5leHBvcnRzLmVuY29kZSA9IGZ1bmN0aW9uIChudW1iZXIpIHtcbiAgaWYgKDAgPD0gbnVtYmVyICYmIG51bWJlciA8IGludFRvQ2hhck1hcC5sZW5ndGgpIHtcbiAgICByZXR1cm4gaW50VG9DaGFyTWFwW251bWJlcl07XG4gIH1cbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk11c3QgYmUgYmV0d2VlbiAwIGFuZCA2MzogXCIgKyBudW1iZXIpO1xufTtcblxuLyoqXG4gKiBEZWNvZGUgYSBzaW5nbGUgYmFzZSA2NCBjaGFyYWN0ZXIgY29kZSBkaWdpdCB0byBhbiBpbnRlZ2VyLiBSZXR1cm5zIC0xIG9uXG4gKiBmYWlsdXJlLlxuICovXG5leHBvcnRzLmRlY29kZSA9IGZ1bmN0aW9uIChjaGFyQ29kZSkge1xuICB2YXIgYmlnQSA9IDY1OyAgICAgLy8gJ0EnXG4gIHZhciBiaWdaID0gOTA7ICAgICAvLyAnWidcblxuICB2YXIgbGl0dGxlQSA9IDk3OyAgLy8gJ2EnXG4gIHZhciBsaXR0bGVaID0gMTIyOyAvLyAneidcblxuICB2YXIgemVybyA9IDQ4OyAgICAgLy8gJzAnXG4gIHZhciBuaW5lID0gNTc7ICAgICAvLyAnOSdcblxuICB2YXIgcGx1cyA9IDQzOyAgICAgLy8gJysnXG4gIHZhciBzbGFzaCA9IDQ3OyAgICAvLyAnLydcblxuICB2YXIgbGl0dGxlT2Zmc2V0ID0gMjY7XG4gIHZhciBudW1iZXJPZmZzZXQgPSA1MjtcblxuICAvLyAwIC0gMjU6IEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXG4gIGlmIChiaWdBIDw9IGNoYXJDb2RlICYmIGNoYXJDb2RlIDw9IGJpZ1opIHtcbiAgICByZXR1cm4gKGNoYXJDb2RlIC0gYmlnQSk7XG4gIH1cblxuICAvLyAyNiAtIDUxOiBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elxuICBpZiAobGl0dGxlQSA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSBsaXR0bGVaKSB7XG4gICAgcmV0dXJuIChjaGFyQ29kZSAtIGxpdHRsZUEgKyBsaXR0bGVPZmZzZXQpO1xuICB9XG5cbiAgLy8gNTIgLSA2MTogMDEyMzQ1Njc4OVxuICBpZiAoemVybyA8PSBjaGFyQ29kZSAmJiBjaGFyQ29kZSA8PSBuaW5lKSB7XG4gICAgcmV0dXJuIChjaGFyQ29kZSAtIHplcm8gKyBudW1iZXJPZmZzZXQpO1xuICB9XG5cbiAgLy8gNjI6ICtcbiAgaWYgKGNoYXJDb2RlID09IHBsdXMpIHtcbiAgICByZXR1cm4gNjI7XG4gIH1cblxuICAvLyA2MzogL1xuICBpZiAoY2hhckNvZGUgPT0gc2xhc2gpIHtcbiAgICByZXR1cm4gNjM7XG4gIH1cblxuICAvLyBJbnZhbGlkIGJhc2U2NCBkaWdpdC5cbiAgcmV0dXJuIC0xO1xufTtcbiIsICIvKiAtKi0gTW9kZToganM7IGpzLWluZGVudC1sZXZlbDogMjsgLSotICovXG4vKlxuICogQ29weXJpZ2h0IDIwMTEgTW96aWxsYSBGb3VuZGF0aW9uIGFuZCBjb250cmlidXRvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICpcbiAqIEJhc2VkIG9uIHRoZSBCYXNlIDY0IFZMUSBpbXBsZW1lbnRhdGlvbiBpbiBDbG9zdXJlIENvbXBpbGVyOlxuICogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jbG9zdXJlLWNvbXBpbGVyL3NvdXJjZS9icm93c2UvdHJ1bmsvc3JjL2NvbS9nb29nbGUvZGVidWdnaW5nL3NvdXJjZW1hcC9CYXNlNjRWTFEuamF2YVxuICpcbiAqIENvcHlyaWdodCAyMDExIFRoZSBDbG9zdXJlIENvbXBpbGVyIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBSZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXRcbiAqIG1vZGlmaWNhdGlvbiwgYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmVcbiAqIG1ldDpcbiAqXG4gKiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodFxuICogICAgbm90aWNlLCB0aGlzIGxpc3Qgb2YgY29uZGl0aW9ucyBhbmQgdGhlIGZvbGxvd2luZyBkaXNjbGFpbWVyLlxuICogICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZVxuICogICAgY29weXJpZ2h0IG5vdGljZSwgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmdcbiAqICAgIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYW5kL29yIG90aGVyIG1hdGVyaWFscyBwcm92aWRlZFxuICogICAgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuICogICogTmVpdGhlciB0aGUgbmFtZSBvZiBHb29nbGUgSW5jLiBub3IgdGhlIG5hbWVzIG9mIGl0c1xuICogICAgY29udHJpYnV0b3JzIG1heSBiZSB1c2VkIHRvIGVuZG9yc2Ugb3IgcHJvbW90ZSBwcm9kdWN0cyBkZXJpdmVkXG4gKiAgICBmcm9tIHRoaXMgc29mdHdhcmUgd2l0aG91dCBzcGVjaWZpYyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24uXG4gKlxuICogVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SU1xuICogXCJBUyBJU1wiIEFORCBBTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVFxuICogTElNSVRFRCBUTywgVEhFIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SXG4gKiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBUkUgRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVFxuICogT1dORVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1IgQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsXG4gKiBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyAoSU5DTFVESU5HLCBCVVQgTk9UXG4gKiBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTOyBMT1NTIE9GIFVTRSxcbiAqIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OIEFOWVxuICogVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuICogKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFXG4gKiBPRiBUSElTIFNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLlxuICovXG5cbnZhciBiYXNlNjQgPSByZXF1aXJlKCcuL2Jhc2U2NCcpO1xuXG4vLyBBIHNpbmdsZSBiYXNlIDY0IGRpZ2l0IGNhbiBjb250YWluIDYgYml0cyBvZiBkYXRhLiBGb3IgdGhlIGJhc2UgNjQgdmFyaWFibGVcbi8vIGxlbmd0aCBxdWFudGl0aWVzIHdlIHVzZSBpbiB0aGUgc291cmNlIG1hcCBzcGVjLCB0aGUgZmlyc3QgYml0IGlzIHRoZSBzaWduLFxuLy8gdGhlIG5leHQgZm91ciBiaXRzIGFyZSB0aGUgYWN0dWFsIHZhbHVlLCBhbmQgdGhlIDZ0aCBiaXQgaXMgdGhlXG4vLyBjb250aW51YXRpb24gYml0LiBUaGUgY29udGludWF0aW9uIGJpdCB0ZWxscyB1cyB3aGV0aGVyIHRoZXJlIGFyZSBtb3JlXG4vLyBkaWdpdHMgaW4gdGhpcyB2YWx1ZSBmb2xsb3dpbmcgdGhpcyBkaWdpdC5cbi8vXG4vLyAgIENvbnRpbnVhdGlvblxuLy8gICB8ICAgIFNpZ25cbi8vICAgfCAgICB8XG4vLyAgIFYgICAgVlxuLy8gICAxMDEwMTFcblxudmFyIFZMUV9CQVNFX1NISUZUID0gNTtcblxuLy8gYmluYXJ5OiAxMDAwMDBcbnZhciBWTFFfQkFTRSA9IDEgPDwgVkxRX0JBU0VfU0hJRlQ7XG5cbi8vIGJpbmFyeTogMDExMTExXG52YXIgVkxRX0JBU0VfTUFTSyA9IFZMUV9CQVNFIC0gMTtcblxuLy8gYmluYXJ5OiAxMDAwMDBcbnZhciBWTFFfQ09OVElOVUFUSU9OX0JJVCA9IFZMUV9CQVNFO1xuXG4vKipcbiAqIENvbnZlcnRzIGZyb20gYSB0d28tY29tcGxlbWVudCB2YWx1ZSB0byBhIHZhbHVlIHdoZXJlIHRoZSBzaWduIGJpdCBpc1xuICogcGxhY2VkIGluIHRoZSBsZWFzdCBzaWduaWZpY2FudCBiaXQuICBGb3IgZXhhbXBsZSwgYXMgZGVjaW1hbHM6XG4gKiAgIDEgYmVjb21lcyAyICgxMCBiaW5hcnkpLCAtMSBiZWNvbWVzIDMgKDExIGJpbmFyeSlcbiAqICAgMiBiZWNvbWVzIDQgKDEwMCBiaW5hcnkpLCAtMiBiZWNvbWVzIDUgKDEwMSBiaW5hcnkpXG4gKi9cbmZ1bmN0aW9uIHRvVkxRU2lnbmVkKGFWYWx1ZSkge1xuICByZXR1cm4gYVZhbHVlIDwgMFxuICAgID8gKCgtYVZhbHVlKSA8PCAxKSArIDFcbiAgICA6IChhVmFsdWUgPDwgMSkgKyAwO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRvIGEgdHdvLWNvbXBsZW1lbnQgdmFsdWUgZnJvbSBhIHZhbHVlIHdoZXJlIHRoZSBzaWduIGJpdCBpc1xuICogcGxhY2VkIGluIHRoZSBsZWFzdCBzaWduaWZpY2FudCBiaXQuICBGb3IgZXhhbXBsZSwgYXMgZGVjaW1hbHM6XG4gKiAgIDIgKDEwIGJpbmFyeSkgYmVjb21lcyAxLCAzICgxMSBiaW5hcnkpIGJlY29tZXMgLTFcbiAqICAgNCAoMTAwIGJpbmFyeSkgYmVjb21lcyAyLCA1ICgxMDEgYmluYXJ5KSBiZWNvbWVzIC0yXG4gKi9cbmZ1bmN0aW9uIGZyb21WTFFTaWduZWQoYVZhbHVlKSB7XG4gIHZhciBpc05lZ2F0aXZlID0gKGFWYWx1ZSAmIDEpID09PSAxO1xuICB2YXIgc2hpZnRlZCA9IGFWYWx1ZSA+PiAxO1xuICByZXR1cm4gaXNOZWdhdGl2ZVxuICAgID8gLXNoaWZ0ZWRcbiAgICA6IHNoaWZ0ZWQ7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYmFzZSA2NCBWTFEgZW5jb2RlZCB2YWx1ZS5cbiAqL1xuZXhwb3J0cy5lbmNvZGUgPSBmdW5jdGlvbiBiYXNlNjRWTFFfZW5jb2RlKGFWYWx1ZSkge1xuICB2YXIgZW5jb2RlZCA9IFwiXCI7XG4gIHZhciBkaWdpdDtcblxuICB2YXIgdmxxID0gdG9WTFFTaWduZWQoYVZhbHVlKTtcblxuICBkbyB7XG4gICAgZGlnaXQgPSB2bHEgJiBWTFFfQkFTRV9NQVNLO1xuICAgIHZscSA+Pj49IFZMUV9CQVNFX1NISUZUO1xuICAgIGlmICh2bHEgPiAwKSB7XG4gICAgICAvLyBUaGVyZSBhcmUgc3RpbGwgbW9yZSBkaWdpdHMgaW4gdGhpcyB2YWx1ZSwgc28gd2UgbXVzdCBtYWtlIHN1cmUgdGhlXG4gICAgICAvLyBjb250aW51YXRpb24gYml0IGlzIG1hcmtlZC5cbiAgICAgIGRpZ2l0IHw9IFZMUV9DT05USU5VQVRJT05fQklUO1xuICAgIH1cbiAgICBlbmNvZGVkICs9IGJhc2U2NC5lbmNvZGUoZGlnaXQpO1xuICB9IHdoaWxlICh2bHEgPiAwKTtcblxuICByZXR1cm4gZW5jb2RlZDtcbn07XG5cbi8qKlxuICogRGVjb2RlcyB0aGUgbmV4dCBiYXNlIDY0IFZMUSB2YWx1ZSBmcm9tIHRoZSBnaXZlbiBzdHJpbmcgYW5kIHJldHVybnMgdGhlXG4gKiB2YWx1ZSBhbmQgdGhlIHJlc3Qgb2YgdGhlIHN0cmluZyB2aWEgdGhlIG91dCBwYXJhbWV0ZXIuXG4gKi9cbmV4cG9ydHMuZGVjb2RlID0gZnVuY3Rpb24gYmFzZTY0VkxRX2RlY29kZShhU3RyLCBhSW5kZXgsIGFPdXRQYXJhbSkge1xuICB2YXIgc3RyTGVuID0gYVN0ci5sZW5ndGg7XG4gIHZhciByZXN1bHQgPSAwO1xuICB2YXIgc2hpZnQgPSAwO1xuICB2YXIgY29udGludWF0aW9uLCBkaWdpdDtcblxuICBkbyB7XG4gICAgaWYgKGFJbmRleCA+PSBzdHJMZW4pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIG1vcmUgZGlnaXRzIGluIGJhc2UgNjQgVkxRIHZhbHVlLlwiKTtcbiAgICB9XG5cbiAgICBkaWdpdCA9IGJhc2U2NC5kZWNvZGUoYVN0ci5jaGFyQ29kZUF0KGFJbmRleCsrKSk7XG4gICAgaWYgKGRpZ2l0ID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBiYXNlNjQgZGlnaXQ6IFwiICsgYVN0ci5jaGFyQXQoYUluZGV4IC0gMSkpO1xuICAgIH1cblxuICAgIGNvbnRpbnVhdGlvbiA9ICEhKGRpZ2l0ICYgVkxRX0NPTlRJTlVBVElPTl9CSVQpO1xuICAgIGRpZ2l0ICY9IFZMUV9CQVNFX01BU0s7XG4gICAgcmVzdWx0ID0gcmVzdWx0ICsgKGRpZ2l0IDw8IHNoaWZ0KTtcbiAgICBzaGlmdCArPSBWTFFfQkFTRV9TSElGVDtcbiAgfSB3aGlsZSAoY29udGludWF0aW9uKTtcblxuICBhT3V0UGFyYW0udmFsdWUgPSBmcm9tVkxRU2lnbmVkKHJlc3VsdCk7XG4gIGFPdXRQYXJhbS5yZXN0ID0gYUluZGV4O1xufTtcbiIsICIvKiAtKi0gTW9kZToganM7IGpzLWluZGVudC1sZXZlbDogMjsgLSotICovXG4vKlxuICogQ29weXJpZ2h0IDIwMTEgTW96aWxsYSBGb3VuZGF0aW9uIGFuZCBjb250cmlidXRvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5cbi8qKlxuICogVGhpcyBpcyBhIGhlbHBlciBmdW5jdGlvbiBmb3IgZ2V0dGluZyB2YWx1ZXMgZnJvbSBwYXJhbWV0ZXIvb3B0aW9uc1xuICogb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gYXJncyBUaGUgb2JqZWN0IHdlIGFyZSBleHRyYWN0aW5nIHZhbHVlcyBmcm9tXG4gKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgcHJvcGVydHkgd2UgYXJlIGdldHRpbmcuXG4gKiBAcGFyYW0gZGVmYXVsdFZhbHVlIEFuIG9wdGlvbmFsIHZhbHVlIHRvIHJldHVybiBpZiB0aGUgcHJvcGVydHkgaXMgbWlzc2luZ1xuICogZnJvbSB0aGUgb2JqZWN0LiBJZiB0aGlzIGlzIG5vdCBzcGVjaWZpZWQgYW5kIHRoZSBwcm9wZXJ0eSBpcyBtaXNzaW5nLCBhblxuICogZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIGdldEFyZyhhQXJncywgYU5hbWUsIGFEZWZhdWx0VmFsdWUpIHtcbiAgaWYgKGFOYW1lIGluIGFBcmdzKSB7XG4gICAgcmV0dXJuIGFBcmdzW2FOYW1lXTtcbiAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAzKSB7XG4gICAgcmV0dXJuIGFEZWZhdWx0VmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyBhTmFtZSArICdcIiBpcyBhIHJlcXVpcmVkIGFyZ3VtZW50LicpO1xuICB9XG59XG5leHBvcnRzLmdldEFyZyA9IGdldEFyZztcblxudmFyIHVybFJlZ2V4cCA9IC9eKD86KFtcXHcrXFwtLl0rKTopP1xcL1xcLyg/OihcXHcrOlxcdyspQCk/KFtcXHcuLV0qKSg/OjooXFxkKykpPyguKikkLztcbnZhciBkYXRhVXJsUmVnZXhwID0gL15kYXRhOi4rXFwsLiskLztcblxuZnVuY3Rpb24gdXJsUGFyc2UoYVVybCkge1xuICB2YXIgbWF0Y2ggPSBhVXJsLm1hdGNoKHVybFJlZ2V4cCk7XG4gIGlmICghbWF0Y2gpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4ge1xuICAgIHNjaGVtZTogbWF0Y2hbMV0sXG4gICAgYXV0aDogbWF0Y2hbMl0sXG4gICAgaG9zdDogbWF0Y2hbM10sXG4gICAgcG9ydDogbWF0Y2hbNF0sXG4gICAgcGF0aDogbWF0Y2hbNV1cbiAgfTtcbn1cbmV4cG9ydHMudXJsUGFyc2UgPSB1cmxQYXJzZTtcblxuZnVuY3Rpb24gdXJsR2VuZXJhdGUoYVBhcnNlZFVybCkge1xuICB2YXIgdXJsID0gJyc7XG4gIGlmIChhUGFyc2VkVXJsLnNjaGVtZSkge1xuICAgIHVybCArPSBhUGFyc2VkVXJsLnNjaGVtZSArICc6JztcbiAgfVxuICB1cmwgKz0gJy8vJztcbiAgaWYgKGFQYXJzZWRVcmwuYXV0aCkge1xuICAgIHVybCArPSBhUGFyc2VkVXJsLmF1dGggKyAnQCc7XG4gIH1cbiAgaWYgKGFQYXJzZWRVcmwuaG9zdCkge1xuICAgIHVybCArPSBhUGFyc2VkVXJsLmhvc3Q7XG4gIH1cbiAgaWYgKGFQYXJzZWRVcmwucG9ydCkge1xuICAgIHVybCArPSBcIjpcIiArIGFQYXJzZWRVcmwucG9ydFxuICB9XG4gIGlmIChhUGFyc2VkVXJsLnBhdGgpIHtcbiAgICB1cmwgKz0gYVBhcnNlZFVybC5wYXRoO1xuICB9XG4gIHJldHVybiB1cmw7XG59XG5leHBvcnRzLnVybEdlbmVyYXRlID0gdXJsR2VuZXJhdGU7XG5cbi8qKlxuICogTm9ybWFsaXplcyBhIHBhdGgsIG9yIHRoZSBwYXRoIHBvcnRpb24gb2YgYSBVUkw6XG4gKlxuICogLSBSZXBsYWNlcyBjb25zZWN1dGl2ZSBzbGFzaGVzIHdpdGggb25lIHNsYXNoLlxuICogLSBSZW1vdmVzIHVubmVjZXNzYXJ5ICcuJyBwYXJ0cy5cbiAqIC0gUmVtb3ZlcyB1bm5lY2Vzc2FyeSAnPGRpcj4vLi4nIHBhcnRzLlxuICpcbiAqIEJhc2VkIG9uIGNvZGUgaW4gdGhlIE5vZGUuanMgJ3BhdGgnIGNvcmUgbW9kdWxlLlxuICpcbiAqIEBwYXJhbSBhUGF0aCBUaGUgcGF0aCBvciB1cmwgdG8gbm9ybWFsaXplLlxuICovXG5mdW5jdGlvbiBub3JtYWxpemUoYVBhdGgpIHtcbiAgdmFyIHBhdGggPSBhUGF0aDtcbiAgdmFyIHVybCA9IHVybFBhcnNlKGFQYXRoKTtcbiAgaWYgKHVybCkge1xuICAgIGlmICghdXJsLnBhdGgpIHtcbiAgICAgIHJldHVybiBhUGF0aDtcbiAgICB9XG4gICAgcGF0aCA9IHVybC5wYXRoO1xuICB9XG4gIHZhciBpc0Fic29sdXRlID0gZXhwb3J0cy5pc0Fic29sdXRlKHBhdGgpO1xuXG4gIHZhciBwYXJ0cyA9IHBhdGguc3BsaXQoL1xcLysvKTtcbiAgZm9yICh2YXIgcGFydCwgdXAgPSAwLCBpID0gcGFydHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBwYXJ0ID0gcGFydHNbaV07XG4gICAgaWYgKHBhcnQgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwID4gMCkge1xuICAgICAgaWYgKHBhcnQgPT09ICcnKSB7XG4gICAgICAgIC8vIFRoZSBmaXJzdCBwYXJ0IGlzIGJsYW5rIGlmIHRoZSBwYXRoIGlzIGFic29sdXRlLiBUcnlpbmcgdG8gZ29cbiAgICAgICAgLy8gYWJvdmUgdGhlIHJvb3QgaXMgYSBuby1vcC4gVGhlcmVmb3JlIHdlIGNhbiByZW1vdmUgYWxsICcuLicgcGFydHNcbiAgICAgICAgLy8gZGlyZWN0bHkgYWZ0ZXIgdGhlIHJvb3QuXG4gICAgICAgIHBhcnRzLnNwbGljZShpICsgMSwgdXApO1xuICAgICAgICB1cCA9IDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5zcGxpY2UoaSwgMik7XG4gICAgICAgIHVwLS07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHBhdGggPSBwYXJ0cy5qb2luKCcvJyk7XG5cbiAgaWYgKHBhdGggPT09ICcnKSB7XG4gICAgcGF0aCA9IGlzQWJzb2x1dGUgPyAnLycgOiAnLic7XG4gIH1cblxuICBpZiAodXJsKSB7XG4gICAgdXJsLnBhdGggPSBwYXRoO1xuICAgIHJldHVybiB1cmxHZW5lcmF0ZSh1cmwpO1xuICB9XG4gIHJldHVybiBwYXRoO1xufVxuZXhwb3J0cy5ub3JtYWxpemUgPSBub3JtYWxpemU7XG5cbi8qKlxuICogSm9pbnMgdHdvIHBhdGhzL1VSTHMuXG4gKlxuICogQHBhcmFtIGFSb290IFRoZSByb290IHBhdGggb3IgVVJMLlxuICogQHBhcmFtIGFQYXRoIFRoZSBwYXRoIG9yIFVSTCB0byBiZSBqb2luZWQgd2l0aCB0aGUgcm9vdC5cbiAqXG4gKiAtIElmIGFQYXRoIGlzIGEgVVJMIG9yIGEgZGF0YSBVUkksIGFQYXRoIGlzIHJldHVybmVkLCB1bmxlc3MgYVBhdGggaXMgYVxuICogICBzY2hlbWUtcmVsYXRpdmUgVVJMOiBUaGVuIHRoZSBzY2hlbWUgb2YgYVJvb3QsIGlmIGFueSwgaXMgcHJlcGVuZGVkXG4gKiAgIGZpcnN0LlxuICogLSBPdGhlcndpc2UgYVBhdGggaXMgYSBwYXRoLiBJZiBhUm9vdCBpcyBhIFVSTCwgdGhlbiBpdHMgcGF0aCBwb3J0aW9uXG4gKiAgIGlzIHVwZGF0ZWQgd2l0aCB0aGUgcmVzdWx0IGFuZCBhUm9vdCBpcyByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoZSByZXN1bHRcbiAqICAgaXMgcmV0dXJuZWQuXG4gKiAgIC0gSWYgYVBhdGggaXMgYWJzb2x1dGUsIHRoZSByZXN1bHQgaXMgYVBhdGguXG4gKiAgIC0gT3RoZXJ3aXNlIHRoZSB0d28gcGF0aHMgYXJlIGpvaW5lZCB3aXRoIGEgc2xhc2guXG4gKiAtIEpvaW5pbmcgZm9yIGV4YW1wbGUgJ2h0dHA6Ly8nIGFuZCAnd3d3LmV4YW1wbGUuY29tJyBpcyBhbHNvIHN1cHBvcnRlZC5cbiAqL1xuZnVuY3Rpb24gam9pbihhUm9vdCwgYVBhdGgpIHtcbiAgaWYgKGFSb290ID09PSBcIlwiKSB7XG4gICAgYVJvb3QgPSBcIi5cIjtcbiAgfVxuICBpZiAoYVBhdGggPT09IFwiXCIpIHtcbiAgICBhUGF0aCA9IFwiLlwiO1xuICB9XG4gIHZhciBhUGF0aFVybCA9IHVybFBhcnNlKGFQYXRoKTtcbiAgdmFyIGFSb290VXJsID0gdXJsUGFyc2UoYVJvb3QpO1xuICBpZiAoYVJvb3RVcmwpIHtcbiAgICBhUm9vdCA9IGFSb290VXJsLnBhdGggfHwgJy8nO1xuICB9XG5cbiAgLy8gYGpvaW4oZm9vLCAnLy93d3cuZXhhbXBsZS5vcmcnKWBcbiAgaWYgKGFQYXRoVXJsICYmICFhUGF0aFVybC5zY2hlbWUpIHtcbiAgICBpZiAoYVJvb3RVcmwpIHtcbiAgICAgIGFQYXRoVXJsLnNjaGVtZSA9IGFSb290VXJsLnNjaGVtZTtcbiAgICB9XG4gICAgcmV0dXJuIHVybEdlbmVyYXRlKGFQYXRoVXJsKTtcbiAgfVxuXG4gIGlmIChhUGF0aFVybCB8fCBhUGF0aC5tYXRjaChkYXRhVXJsUmVnZXhwKSkge1xuICAgIHJldHVybiBhUGF0aDtcbiAgfVxuXG4gIC8vIGBqb2luKCdodHRwOi8vJywgJ3d3dy5leGFtcGxlLmNvbScpYFxuICBpZiAoYVJvb3RVcmwgJiYgIWFSb290VXJsLmhvc3QgJiYgIWFSb290VXJsLnBhdGgpIHtcbiAgICBhUm9vdFVybC5ob3N0ID0gYVBhdGg7XG4gICAgcmV0dXJuIHVybEdlbmVyYXRlKGFSb290VXJsKTtcbiAgfVxuXG4gIHZhciBqb2luZWQgPSBhUGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuICAgID8gYVBhdGhcbiAgICA6IG5vcm1hbGl6ZShhUm9vdC5yZXBsYWNlKC9cXC8rJC8sICcnKSArICcvJyArIGFQYXRoKTtcblxuICBpZiAoYVJvb3RVcmwpIHtcbiAgICBhUm9vdFVybC5wYXRoID0gam9pbmVkO1xuICAgIHJldHVybiB1cmxHZW5lcmF0ZShhUm9vdFVybCk7XG4gIH1cbiAgcmV0dXJuIGpvaW5lZDtcbn1cbmV4cG9ydHMuam9pbiA9IGpvaW47XG5cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uIChhUGF0aCkge1xuICByZXR1cm4gYVBhdGguY2hhckF0KDApID09PSAnLycgfHwgdXJsUmVnZXhwLnRlc3QoYVBhdGgpO1xufTtcblxuLyoqXG4gKiBNYWtlIGEgcGF0aCByZWxhdGl2ZSB0byBhIFVSTCBvciBhbm90aGVyIHBhdGguXG4gKlxuICogQHBhcmFtIGFSb290IFRoZSByb290IHBhdGggb3IgVVJMLlxuICogQHBhcmFtIGFQYXRoIFRoZSBwYXRoIG9yIFVSTCB0byBiZSBtYWRlIHJlbGF0aXZlIHRvIGFSb290LlxuICovXG5mdW5jdGlvbiByZWxhdGl2ZShhUm9vdCwgYVBhdGgpIHtcbiAgaWYgKGFSb290ID09PSBcIlwiKSB7XG4gICAgYVJvb3QgPSBcIi5cIjtcbiAgfVxuXG4gIGFSb290ID0gYVJvb3QucmVwbGFjZSgvXFwvJC8sICcnKTtcblxuICAvLyBJdCBpcyBwb3NzaWJsZSBmb3IgdGhlIHBhdGggdG8gYmUgYWJvdmUgdGhlIHJvb3QuIEluIHRoaXMgY2FzZSwgc2ltcGx5XG4gIC8vIGNoZWNraW5nIHdoZXRoZXIgdGhlIHJvb3QgaXMgYSBwcmVmaXggb2YgdGhlIHBhdGggd29uJ3Qgd29yay4gSW5zdGVhZCwgd2VcbiAgLy8gbmVlZCB0byByZW1vdmUgY29tcG9uZW50cyBmcm9tIHRoZSByb290IG9uZSBieSBvbmUsIHVudGlsIGVpdGhlciB3ZSBmaW5kXG4gIC8vIGEgcHJlZml4IHRoYXQgZml0cywgb3Igd2UgcnVuIG91dCBvZiBjb21wb25lbnRzIHRvIHJlbW92ZS5cbiAgdmFyIGxldmVsID0gMDtcbiAgd2hpbGUgKGFQYXRoLmluZGV4T2YoYVJvb3QgKyAnLycpICE9PSAwKSB7XG4gICAgdmFyIGluZGV4ID0gYVJvb3QubGFzdEluZGV4T2YoXCIvXCIpO1xuICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgIHJldHVybiBhUGF0aDtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgb25seSBwYXJ0IG9mIHRoZSByb290IHRoYXQgaXMgbGVmdCBpcyB0aGUgc2NoZW1lIChpLmUuIGh0dHA6Ly8sXG4gICAgLy8gZmlsZTovLy8sIGV0Yy4pLCBvbmUgb3IgbW9yZSBzbGFzaGVzICgvKSwgb3Igc2ltcGx5IG5vdGhpbmcgYXQgYWxsLCB3ZVxuICAgIC8vIGhhdmUgZXhoYXVzdGVkIGFsbCBjb21wb25lbnRzLCBzbyB0aGUgcGF0aCBpcyBub3QgcmVsYXRpdmUgdG8gdGhlIHJvb3QuXG4gICAgYVJvb3QgPSBhUm9vdC5zbGljZSgwLCBpbmRleCk7XG4gICAgaWYgKGFSb290Lm1hdGNoKC9eKFteXFwvXSs6XFwvKT9cXC8qJC8pKSB7XG4gICAgICByZXR1cm4gYVBhdGg7XG4gICAgfVxuXG4gICAgKytsZXZlbDtcbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB3ZSBhZGQgYSBcIi4uL1wiIGZvciBlYWNoIGNvbXBvbmVudCB3ZSByZW1vdmVkIGZyb20gdGhlIHJvb3QuXG4gIHJldHVybiBBcnJheShsZXZlbCArIDEpLmpvaW4oXCIuLi9cIikgKyBhUGF0aC5zdWJzdHIoYVJvb3QubGVuZ3RoICsgMSk7XG59XG5leHBvcnRzLnJlbGF0aXZlID0gcmVsYXRpdmU7XG5cbnZhciBzdXBwb3J0c051bGxQcm90byA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBvYmogPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICByZXR1cm4gISgnX19wcm90b19fJyBpbiBvYmopO1xufSgpKTtcblxuZnVuY3Rpb24gaWRlbnRpdHkgKHMpIHtcbiAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQmVjYXVzZSBiZWhhdmlvciBnb2VzIHdhY2t5IHdoZW4geW91IHNldCBgX19wcm90b19fYCBvbiBvYmplY3RzLCB3ZVxuICogaGF2ZSB0byBwcmVmaXggYWxsIHRoZSBzdHJpbmdzIGluIG91ciBzZXQgd2l0aCBhbiBhcmJpdHJhcnkgY2hhcmFjdGVyLlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9zb3VyY2UtbWFwL3B1bGwvMzEgYW5kXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9zb3VyY2UtbWFwL2lzc3Vlcy8zMFxuICpcbiAqIEBwYXJhbSBTdHJpbmcgYVN0clxuICovXG5mdW5jdGlvbiB0b1NldFN0cmluZyhhU3RyKSB7XG4gIGlmIChpc1Byb3RvU3RyaW5nKGFTdHIpKSB7XG4gICAgcmV0dXJuICckJyArIGFTdHI7XG4gIH1cblxuICByZXR1cm4gYVN0cjtcbn1cbmV4cG9ydHMudG9TZXRTdHJpbmcgPSBzdXBwb3J0c051bGxQcm90byA/IGlkZW50aXR5IDogdG9TZXRTdHJpbmc7XG5cbmZ1bmN0aW9uIGZyb21TZXRTdHJpbmcoYVN0cikge1xuICBpZiAoaXNQcm90b1N0cmluZyhhU3RyKSkge1xuICAgIHJldHVybiBhU3RyLnNsaWNlKDEpO1xuICB9XG5cbiAgcmV0dXJuIGFTdHI7XG59XG5leHBvcnRzLmZyb21TZXRTdHJpbmcgPSBzdXBwb3J0c051bGxQcm90byA/IGlkZW50aXR5IDogZnJvbVNldFN0cmluZztcblxuZnVuY3Rpb24gaXNQcm90b1N0cmluZyhzKSB7XG4gIGlmICghcykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBzLmxlbmd0aDtcblxuICBpZiAobGVuZ3RoIDwgOSAvKiBcIl9fcHJvdG9fX1wiLmxlbmd0aCAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChzLmNoYXJDb2RlQXQobGVuZ3RoIC0gMSkgIT09IDk1ICAvKiAnXycgKi8gfHxcbiAgICAgIHMuY2hhckNvZGVBdChsZW5ndGggLSAyKSAhPT0gOTUgIC8qICdfJyAqLyB8fFxuICAgICAgcy5jaGFyQ29kZUF0KGxlbmd0aCAtIDMpICE9PSAxMTEgLyogJ28nICovIHx8XG4gICAgICBzLmNoYXJDb2RlQXQobGVuZ3RoIC0gNCkgIT09IDExNiAvKiAndCcgKi8gfHxcbiAgICAgIHMuY2hhckNvZGVBdChsZW5ndGggLSA1KSAhPT0gMTExIC8qICdvJyAqLyB8fFxuICAgICAgcy5jaGFyQ29kZUF0KGxlbmd0aCAtIDYpICE9PSAxMTQgLyogJ3InICovIHx8XG4gICAgICBzLmNoYXJDb2RlQXQobGVuZ3RoIC0gNykgIT09IDExMiAvKiAncCcgKi8gfHxcbiAgICAgIHMuY2hhckNvZGVBdChsZW5ndGggLSA4KSAhPT0gOTUgIC8qICdfJyAqLyB8fFxuICAgICAgcy5jaGFyQ29kZUF0KGxlbmd0aCAtIDkpICE9PSA5NSAgLyogJ18nICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZm9yICh2YXIgaSA9IGxlbmd0aCAtIDEwOyBpID49IDA7IGktLSkge1xuICAgIGlmIChzLmNoYXJDb2RlQXQoaSkgIT09IDM2IC8qICckJyAqLykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIENvbXBhcmF0b3IgYmV0d2VlbiB0d28gbWFwcGluZ3Mgd2hlcmUgdGhlIG9yaWdpbmFsIHBvc2l0aW9ucyBhcmUgY29tcGFyZWQuXG4gKlxuICogT3B0aW9uYWxseSBwYXNzIGluIGB0cnVlYCBhcyBgb25seUNvbXBhcmVHZW5lcmF0ZWRgIHRvIGNvbnNpZGVyIHR3b1xuICogbWFwcGluZ3Mgd2l0aCB0aGUgc2FtZSBvcmlnaW5hbCBzb3VyY2UvbGluZS9jb2x1bW4sIGJ1dCBkaWZmZXJlbnQgZ2VuZXJhdGVkXG4gKiBsaW5lIGFuZCBjb2x1bW4gdGhlIHNhbWUuIFVzZWZ1bCB3aGVuIHNlYXJjaGluZyBmb3IgYSBtYXBwaW5nIHdpdGggYVxuICogc3R1YmJlZCBvdXQgbWFwcGluZy5cbiAqL1xuZnVuY3Rpb24gY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMobWFwcGluZ0EsIG1hcHBpbmdCLCBvbmx5Q29tcGFyZU9yaWdpbmFsKSB7XG4gIHZhciBjbXAgPSBzdHJjbXAobWFwcGluZ0Euc291cmNlLCBtYXBwaW5nQi5zb3VyY2UpO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IG1hcHBpbmdBLm9yaWdpbmFsTGluZSAtIG1hcHBpbmdCLm9yaWdpbmFsTGluZTtcbiAgaWYgKGNtcCAhPT0gMCkge1xuICAgIHJldHVybiBjbXA7XG4gIH1cblxuICBjbXAgPSBtYXBwaW5nQS5vcmlnaW5hbENvbHVtbiAtIG1hcHBpbmdCLm9yaWdpbmFsQ29sdW1uO1xuICBpZiAoY21wICE9PSAwIHx8IG9ubHlDb21wYXJlT3JpZ2luYWwpIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgY21wID0gbWFwcGluZ0EuZ2VuZXJhdGVkQ29sdW1uIC0gbWFwcGluZ0IuZ2VuZXJhdGVkQ29sdW1uO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IG1hcHBpbmdBLmdlbmVyYXRlZExpbmUgLSBtYXBwaW5nQi5nZW5lcmF0ZWRMaW5lO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIHJldHVybiBzdHJjbXAobWFwcGluZ0EubmFtZSwgbWFwcGluZ0IubmFtZSk7XG59XG5leHBvcnRzLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zID0gY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnM7XG5cbi8qKlxuICogQ29tcGFyYXRvciBiZXR3ZWVuIHR3byBtYXBwaW5ncyB3aXRoIGRlZmxhdGVkIHNvdXJjZSBhbmQgbmFtZSBpbmRpY2VzIHdoZXJlXG4gKiB0aGUgZ2VuZXJhdGVkIHBvc2l0aW9ucyBhcmUgY29tcGFyZWQuXG4gKlxuICogT3B0aW9uYWxseSBwYXNzIGluIGB0cnVlYCBhcyBgb25seUNvbXBhcmVHZW5lcmF0ZWRgIHRvIGNvbnNpZGVyIHR3b1xuICogbWFwcGluZ3Mgd2l0aCB0aGUgc2FtZSBnZW5lcmF0ZWQgbGluZSBhbmQgY29sdW1uLCBidXQgZGlmZmVyZW50XG4gKiBzb3VyY2UvbmFtZS9vcmlnaW5hbCBsaW5lIGFuZCBjb2x1bW4gdGhlIHNhbWUuIFVzZWZ1bCB3aGVuIHNlYXJjaGluZyBmb3IgYVxuICogbWFwcGluZyB3aXRoIGEgc3R1YmJlZCBvdXQgbWFwcGluZy5cbiAqL1xuZnVuY3Rpb24gY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zRGVmbGF0ZWQobWFwcGluZ0EsIG1hcHBpbmdCLCBvbmx5Q29tcGFyZUdlbmVyYXRlZCkge1xuICB2YXIgY21wID0gbWFwcGluZ0EuZ2VuZXJhdGVkTGluZSAtIG1hcHBpbmdCLmdlbmVyYXRlZExpbmU7XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgY21wID0gbWFwcGluZ0EuZ2VuZXJhdGVkQ29sdW1uIC0gbWFwcGluZ0IuZ2VuZXJhdGVkQ29sdW1uO1xuICBpZiAoY21wICE9PSAwIHx8IG9ubHlDb21wYXJlR2VuZXJhdGVkKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IHN0cmNtcChtYXBwaW5nQS5zb3VyY2UsIG1hcHBpbmdCLnNvdXJjZSk7XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgY21wID0gbWFwcGluZ0Eub3JpZ2luYWxMaW5lIC0gbWFwcGluZ0Iub3JpZ2luYWxMaW5lO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IG1hcHBpbmdBLm9yaWdpbmFsQ29sdW1uIC0gbWFwcGluZ0Iub3JpZ2luYWxDb2x1bW47XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgcmV0dXJuIHN0cmNtcChtYXBwaW5nQS5uYW1lLCBtYXBwaW5nQi5uYW1lKTtcbn1cbmV4cG9ydHMuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zRGVmbGF0ZWQgPSBjb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnNEZWZsYXRlZDtcblxuZnVuY3Rpb24gc3RyY21wKGFTdHIxLCBhU3RyMikge1xuICBpZiAoYVN0cjEgPT09IGFTdHIyKSB7XG4gICAgcmV0dXJuIDA7XG4gIH1cblxuICBpZiAoYVN0cjEgPT09IG51bGwpIHtcbiAgICByZXR1cm4gMTsgLy8gYVN0cjIgIT09IG51bGxcbiAgfVxuXG4gIGlmIChhU3RyMiA9PT0gbnVsbCkge1xuICAgIHJldHVybiAtMTsgLy8gYVN0cjEgIT09IG51bGxcbiAgfVxuXG4gIGlmIChhU3RyMSA+IGFTdHIyKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciBiZXR3ZWVuIHR3byBtYXBwaW5ncyB3aXRoIGluZmxhdGVkIHNvdXJjZSBhbmQgbmFtZSBzdHJpbmdzIHdoZXJlXG4gKiB0aGUgZ2VuZXJhdGVkIHBvc2l0aW9ucyBhcmUgY29tcGFyZWQuXG4gKi9cbmZ1bmN0aW9uIGNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9uc0luZmxhdGVkKG1hcHBpbmdBLCBtYXBwaW5nQikge1xuICB2YXIgY21wID0gbWFwcGluZ0EuZ2VuZXJhdGVkTGluZSAtIG1hcHBpbmdCLmdlbmVyYXRlZExpbmU7XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgY21wID0gbWFwcGluZ0EuZ2VuZXJhdGVkQ29sdW1uIC0gbWFwcGluZ0IuZ2VuZXJhdGVkQ29sdW1uO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IHN0cmNtcChtYXBwaW5nQS5zb3VyY2UsIG1hcHBpbmdCLnNvdXJjZSk7XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgY21wID0gbWFwcGluZ0Eub3JpZ2luYWxMaW5lIC0gbWFwcGluZ0Iub3JpZ2luYWxMaW5lO1xuICBpZiAoY21wICE9PSAwKSB7XG4gICAgcmV0dXJuIGNtcDtcbiAgfVxuXG4gIGNtcCA9IG1hcHBpbmdBLm9yaWdpbmFsQ29sdW1uIC0gbWFwcGluZ0Iub3JpZ2luYWxDb2x1bW47XG4gIGlmIChjbXAgIT09IDApIHtcbiAgICByZXR1cm4gY21wO1xuICB9XG5cbiAgcmV0dXJuIHN0cmNtcChtYXBwaW5nQS5uYW1lLCBtYXBwaW5nQi5uYW1lKTtcbn1cbmV4cG9ydHMuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zSW5mbGF0ZWQgPSBjb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnNJbmZsYXRlZDtcblxuLyoqXG4gKiBTdHJpcCBhbnkgSlNPTiBYU1NJIGF2b2lkYW5jZSBwcmVmaXggZnJvbSB0aGUgc3RyaW5nIChhcyBkb2N1bWVudGVkXG4gKiBpbiB0aGUgc291cmNlIG1hcHMgc3BlY2lmaWNhdGlvbiksIGFuZCB0aGVuIHBhcnNlIHRoZSBzdHJpbmcgYXNcbiAqIEpTT04uXG4gKi9cbmZ1bmN0aW9uIHBhcnNlU291cmNlTWFwSW5wdXQoc3RyKSB7XG4gIHJldHVybiBKU09OLnBhcnNlKHN0ci5yZXBsYWNlKC9eXFwpXX0nW15cXG5dKlxcbi8sICcnKSk7XG59XG5leHBvcnRzLnBhcnNlU291cmNlTWFwSW5wdXQgPSBwYXJzZVNvdXJjZU1hcElucHV0O1xuXG4vKipcbiAqIENvbXB1dGUgdGhlIFVSTCBvZiBhIHNvdXJjZSBnaXZlbiB0aGUgdGhlIHNvdXJjZSByb290LCB0aGUgc291cmNlJ3NcbiAqIFVSTCwgYW5kIHRoZSBzb3VyY2UgbWFwJ3MgVVJMLlxuICovXG5mdW5jdGlvbiBjb21wdXRlU291cmNlVVJMKHNvdXJjZVJvb3QsIHNvdXJjZVVSTCwgc291cmNlTWFwVVJMKSB7XG4gIHNvdXJjZVVSTCA9IHNvdXJjZVVSTCB8fCAnJztcblxuICBpZiAoc291cmNlUm9vdCkge1xuICAgIC8vIFRoaXMgZm9sbG93cyB3aGF0IENocm9tZSBkb2VzLlxuICAgIGlmIChzb3VyY2VSb290W3NvdXJjZVJvb3QubGVuZ3RoIC0gMV0gIT09ICcvJyAmJiBzb3VyY2VVUkxbMF0gIT09ICcvJykge1xuICAgICAgc291cmNlUm9vdCArPSAnLyc7XG4gICAgfVxuICAgIC8vIFRoZSBzcGVjIHNheXM6XG4gICAgLy8gICBMaW5lIDQ6IEFuIG9wdGlvbmFsIHNvdXJjZSByb290LCB1c2VmdWwgZm9yIHJlbG9jYXRpbmcgc291cmNlXG4gICAgLy8gICBmaWxlcyBvbiBhIHNlcnZlciBvciByZW1vdmluZyByZXBlYXRlZCB2YWx1ZXMgaW4gdGhlXG4gICAgLy8gICBcdTIwMUNzb3VyY2VzXHUyMDFEIGVudHJ5LiAgVGhpcyB2YWx1ZSBpcyBwcmVwZW5kZWQgdG8gdGhlIGluZGl2aWR1YWxcbiAgICAvLyAgIGVudHJpZXMgaW4gdGhlIFx1MjAxQ3NvdXJjZVx1MjAxRCBmaWVsZC5cbiAgICBzb3VyY2VVUkwgPSBzb3VyY2VSb290ICsgc291cmNlVVJMO1xuICB9XG5cbiAgLy8gSGlzdG9yaWNhbGx5LCBTb3VyY2VNYXBDb25zdW1lciBkaWQgbm90IHRha2UgdGhlIHNvdXJjZU1hcFVSTCBhc1xuICAvLyBhIHBhcmFtZXRlci4gIFRoaXMgbW9kZSBpcyBzdGlsbCBzb21ld2hhdCBzdXBwb3J0ZWQsIHdoaWNoIGlzIHdoeVxuICAvLyB0aGlzIGNvZGUgYmxvY2sgaXMgY29uZGl0aW9uYWwuICBIb3dldmVyLCBpdCdzIHByZWZlcmFibGUgdG8gcGFzc1xuICAvLyB0aGUgc291cmNlIG1hcCBVUkwgdG8gU291cmNlTWFwQ29uc3VtZXIsIHNvIHRoYXQgdGhpcyBmdW5jdGlvblxuICAvLyBjYW4gaW1wbGVtZW50IHRoZSBzb3VyY2UgVVJMIHJlc29sdXRpb24gYWxnb3JpdGhtIGFzIG91dGxpbmVkIGluXG4gIC8vIHRoZSBzcGVjLiAgVGhpcyBibG9jayBpcyBiYXNpY2FsbHkgdGhlIGVxdWl2YWxlbnQgb2Y6XG4gIC8vICAgIG5ldyBVUkwoc291cmNlVVJMLCBzb3VyY2VNYXBVUkwpLnRvU3RyaW5nKClcbiAgLy8gLi4uIGV4Y2VwdCBpdCBhdm9pZHMgdXNpbmcgVVJMLCB3aGljaCB3YXNuJ3QgYXZhaWxhYmxlIGluIHRoZVxuICAvLyBvbGRlciByZWxlYXNlcyBvZiBub2RlIHN0aWxsIHN1cHBvcnRlZCBieSB0aGlzIGxpYnJhcnkuXG4gIC8vXG4gIC8vIFRoZSBzcGVjIHNheXM6XG4gIC8vICAgSWYgdGhlIHNvdXJjZXMgYXJlIG5vdCBhYnNvbHV0ZSBVUkxzIGFmdGVyIHByZXBlbmRpbmcgb2YgdGhlXG4gIC8vICAgXHUyMDFDc291cmNlUm9vdFx1MjAxRCwgdGhlIHNvdXJjZXMgYXJlIHJlc29sdmVkIHJlbGF0aXZlIHRvIHRoZVxuICAvLyAgIFNvdXJjZU1hcCAobGlrZSByZXNvbHZpbmcgc2NyaXB0IHNyYyBpbiBhIGh0bWwgZG9jdW1lbnQpLlxuICBpZiAoc291cmNlTWFwVVJMKSB7XG4gICAgdmFyIHBhcnNlZCA9IHVybFBhcnNlKHNvdXJjZU1hcFVSTCk7XG4gICAgaWYgKCFwYXJzZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcInNvdXJjZU1hcFVSTCBjb3VsZCBub3QgYmUgcGFyc2VkXCIpO1xuICAgIH1cbiAgICBpZiAocGFyc2VkLnBhdGgpIHtcbiAgICAgIC8vIFN0cmlwIHRoZSBsYXN0IHBhdGggY29tcG9uZW50LCBidXQga2VlcCB0aGUgXCIvXCIuXG4gICAgICB2YXIgaW5kZXggPSBwYXJzZWQucGF0aC5sYXN0SW5kZXhPZignLycpO1xuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgcGFyc2VkLnBhdGggPSBwYXJzZWQucGF0aC5zdWJzdHJpbmcoMCwgaW5kZXggKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgc291cmNlVVJMID0gam9pbih1cmxHZW5lcmF0ZShwYXJzZWQpLCBzb3VyY2VVUkwpO1xuICB9XG5cbiAgcmV0dXJuIG5vcm1hbGl6ZShzb3VyY2VVUkwpO1xufVxuZXhwb3J0cy5jb21wdXRlU291cmNlVVJMID0gY29tcHV0ZVNvdXJjZVVSTDtcbiIsICIvKiAtKi0gTW9kZToganM7IGpzLWluZGVudC1sZXZlbDogMjsgLSotICovXG4vKlxuICogQ29weXJpZ2h0IDIwMTEgTW96aWxsYSBGb3VuZGF0aW9uIGFuZCBjb250cmlidXRvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG52YXIgaGFzID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBoYXNOYXRpdmVNYXAgPSB0eXBlb2YgTWFwICE9PSBcInVuZGVmaW5lZFwiO1xuXG4vKipcbiAqIEEgZGF0YSBzdHJ1Y3R1cmUgd2hpY2ggaXMgYSBjb21iaW5hdGlvbiBvZiBhbiBhcnJheSBhbmQgYSBzZXQuIEFkZGluZyBhIG5ld1xuICogbWVtYmVyIGlzIE8oMSksIHRlc3RpbmcgZm9yIG1lbWJlcnNoaXAgaXMgTygxKSwgYW5kIGZpbmRpbmcgdGhlIGluZGV4IG9mIGFuXG4gKiBlbGVtZW50IGlzIE8oMSkuIFJlbW92aW5nIGVsZW1lbnRzIGZyb20gdGhlIHNldCBpcyBub3Qgc3VwcG9ydGVkLiBPbmx5XG4gKiBzdHJpbmdzIGFyZSBzdXBwb3J0ZWQgZm9yIG1lbWJlcnNoaXAuXG4gKi9cbmZ1bmN0aW9uIEFycmF5U2V0KCkge1xuICB0aGlzLl9hcnJheSA9IFtdO1xuICB0aGlzLl9zZXQgPSBoYXNOYXRpdmVNYXAgPyBuZXcgTWFwKCkgOiBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG4vKipcbiAqIFN0YXRpYyBtZXRob2QgZm9yIGNyZWF0aW5nIEFycmF5U2V0IGluc3RhbmNlcyBmcm9tIGFuIGV4aXN0aW5nIGFycmF5LlxuICovXG5BcnJheVNldC5mcm9tQXJyYXkgPSBmdW5jdGlvbiBBcnJheVNldF9mcm9tQXJyYXkoYUFycmF5LCBhQWxsb3dEdXBsaWNhdGVzKSB7XG4gIHZhciBzZXQgPSBuZXcgQXJyYXlTZXQoKTtcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIHNldC5hZGQoYUFycmF5W2ldLCBhQWxsb3dEdXBsaWNhdGVzKTtcbiAgfVxuICByZXR1cm4gc2V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm4gaG93IG1hbnkgdW5pcXVlIGl0ZW1zIGFyZSBpbiB0aGlzIEFycmF5U2V0LiBJZiBkdXBsaWNhdGVzIGhhdmUgYmVlblxuICogYWRkZWQsIHRoYW4gdGhvc2UgZG8gbm90IGNvdW50IHRvd2FyZHMgdGhlIHNpemUuXG4gKlxuICogQHJldHVybnMgTnVtYmVyXG4gKi9cbkFycmF5U2V0LnByb3RvdHlwZS5zaXplID0gZnVuY3Rpb24gQXJyYXlTZXRfc2l6ZSgpIHtcbiAgcmV0dXJuIGhhc05hdGl2ZU1hcCA/IHRoaXMuX3NldC5zaXplIDogT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5fc2V0KS5sZW5ndGg7XG59O1xuXG4vKipcbiAqIEFkZCB0aGUgZ2l2ZW4gc3RyaW5nIHRvIHRoaXMgc2V0LlxuICpcbiAqIEBwYXJhbSBTdHJpbmcgYVN0clxuICovXG5BcnJheVNldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gQXJyYXlTZXRfYWRkKGFTdHIsIGFBbGxvd0R1cGxpY2F0ZXMpIHtcbiAgdmFyIHNTdHIgPSBoYXNOYXRpdmVNYXAgPyBhU3RyIDogdXRpbC50b1NldFN0cmluZyhhU3RyKTtcbiAgdmFyIGlzRHVwbGljYXRlID0gaGFzTmF0aXZlTWFwID8gdGhpcy5oYXMoYVN0cikgOiBoYXMuY2FsbCh0aGlzLl9zZXQsIHNTdHIpO1xuICB2YXIgaWR4ID0gdGhpcy5fYXJyYXkubGVuZ3RoO1xuICBpZiAoIWlzRHVwbGljYXRlIHx8IGFBbGxvd0R1cGxpY2F0ZXMpIHtcbiAgICB0aGlzLl9hcnJheS5wdXNoKGFTdHIpO1xuICB9XG4gIGlmICghaXNEdXBsaWNhdGUpIHtcbiAgICBpZiAoaGFzTmF0aXZlTWFwKSB7XG4gICAgICB0aGlzLl9zZXQuc2V0KGFTdHIsIGlkeCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3NldFtzU3RyXSA9IGlkeDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSXMgdGhlIGdpdmVuIHN0cmluZyBhIG1lbWJlciBvZiB0aGlzIHNldD9cbiAqXG4gKiBAcGFyYW0gU3RyaW5nIGFTdHJcbiAqL1xuQXJyYXlTZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIEFycmF5U2V0X2hhcyhhU3RyKSB7XG4gIGlmIChoYXNOYXRpdmVNYXApIHtcbiAgICByZXR1cm4gdGhpcy5fc2V0LmhhcyhhU3RyKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgc1N0ciA9IHV0aWwudG9TZXRTdHJpbmcoYVN0cik7XG4gICAgcmV0dXJuIGhhcy5jYWxsKHRoaXMuX3NldCwgc1N0cik7XG4gIH1cbn07XG5cbi8qKlxuICogV2hhdCBpcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIHN0cmluZyBpbiB0aGUgYXJyYXk/XG4gKlxuICogQHBhcmFtIFN0cmluZyBhU3RyXG4gKi9cbkFycmF5U2V0LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gQXJyYXlTZXRfaW5kZXhPZihhU3RyKSB7XG4gIGlmIChoYXNOYXRpdmVNYXApIHtcbiAgICB2YXIgaWR4ID0gdGhpcy5fc2V0LmdldChhU3RyKTtcbiAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgcmV0dXJuIGlkeDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIHNTdHIgPSB1dGlsLnRvU2V0U3RyaW5nKGFTdHIpO1xuICAgIGlmIChoYXMuY2FsbCh0aGlzLl9zZXQsIHNTdHIpKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2V0W3NTdHJdO1xuICAgIH1cbiAgfVxuXG4gIHRocm93IG5ldyBFcnJvcignXCInICsgYVN0ciArICdcIiBpcyBub3QgaW4gdGhlIHNldC4nKTtcbn07XG5cbi8qKlxuICogV2hhdCBpcyB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXg/XG4gKlxuICogQHBhcmFtIE51bWJlciBhSWR4XG4gKi9cbkFycmF5U2V0LnByb3RvdHlwZS5hdCA9IGZ1bmN0aW9uIEFycmF5U2V0X2F0KGFJZHgpIHtcbiAgaWYgKGFJZHggPj0gMCAmJiBhSWR4IDwgdGhpcy5fYXJyYXkubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5W2FJZHhdO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcignTm8gZWxlbWVudCBpbmRleGVkIGJ5ICcgKyBhSWR4KTtcbn07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYXJyYXkgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBzZXQgKHdoaWNoIGhhcyB0aGUgcHJvcGVyIGluZGljZXNcbiAqIGluZGljYXRlZCBieSBpbmRleE9mKS4gTm90ZSB0aGF0IHRoaXMgaXMgYSBjb3B5IG9mIHRoZSBpbnRlcm5hbCBhcnJheSB1c2VkXG4gKiBmb3Igc3RvcmluZyB0aGUgbWVtYmVycyBzbyB0aGF0IG5vIG9uZSBjYW4gbWVzcyB3aXRoIGludGVybmFsIHN0YXRlLlxuICovXG5BcnJheVNldC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIEFycmF5U2V0X3RvQXJyYXkoKSB7XG4gIHJldHVybiB0aGlzLl9hcnJheS5zbGljZSgpO1xufTtcblxuZXhwb3J0cy5BcnJheVNldCA9IEFycmF5U2V0O1xuIiwgIi8qIC0qLSBNb2RlOiBqczsganMtaW5kZW50LWxldmVsOiAyOyAtKi0gKi9cbi8qXG4gKiBDb3B5cmlnaHQgMjAxNCBNb3ppbGxhIEZvdW5kYXRpb24gYW5kIGNvbnRyaWJ1dG9yc1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE5ldyBCU0QgbGljZW5zZS4gU2VlIExJQ0VOU0Ugb3I6XG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvQlNELTMtQ2xhdXNlXG4gKi9cblxudmFyIHV0aWwgPSByZXF1aXJlKCcuL3V0aWwnKTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciBtYXBwaW5nQiBpcyBhZnRlciBtYXBwaW5nQSB3aXRoIHJlc3BlY3QgdG8gZ2VuZXJhdGVkXG4gKiBwb3NpdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2VuZXJhdGVkUG9zaXRpb25BZnRlcihtYXBwaW5nQSwgbWFwcGluZ0IpIHtcbiAgLy8gT3B0aW1pemVkIGZvciBtb3N0IGNvbW1vbiBjYXNlXG4gIHZhciBsaW5lQSA9IG1hcHBpbmdBLmdlbmVyYXRlZExpbmU7XG4gIHZhciBsaW5lQiA9IG1hcHBpbmdCLmdlbmVyYXRlZExpbmU7XG4gIHZhciBjb2x1bW5BID0gbWFwcGluZ0EuZ2VuZXJhdGVkQ29sdW1uO1xuICB2YXIgY29sdW1uQiA9IG1hcHBpbmdCLmdlbmVyYXRlZENvbHVtbjtcbiAgcmV0dXJuIGxpbmVCID4gbGluZUEgfHwgbGluZUIgPT0gbGluZUEgJiYgY29sdW1uQiA+PSBjb2x1bW5BIHx8XG4gICAgICAgICB1dGlsLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9uc0luZmxhdGVkKG1hcHBpbmdBLCBtYXBwaW5nQikgPD0gMDtcbn1cblxuLyoqXG4gKiBBIGRhdGEgc3RydWN0dXJlIHRvIHByb3ZpZGUgYSBzb3J0ZWQgdmlldyBvZiBhY2N1bXVsYXRlZCBtYXBwaW5ncyBpbiBhXG4gKiBwZXJmb3JtYW5jZSBjb25zY2lvdXMgbWFubmVyLiBJdCB0cmFkZXMgYSBuZWdsaWJhYmxlIG92ZXJoZWFkIGluIGdlbmVyYWxcbiAqIGNhc2UgZm9yIGEgbGFyZ2Ugc3BlZWR1cCBpbiBjYXNlIG9mIG1hcHBpbmdzIGJlaW5nIGFkZGVkIGluIG9yZGVyLlxuICovXG5mdW5jdGlvbiBNYXBwaW5nTGlzdCgpIHtcbiAgdGhpcy5fYXJyYXkgPSBbXTtcbiAgdGhpcy5fc29ydGVkID0gdHJ1ZTtcbiAgLy8gU2VydmVzIGFzIGluZmltdW1cbiAgdGhpcy5fbGFzdCA9IHtnZW5lcmF0ZWRMaW5lOiAtMSwgZ2VuZXJhdGVkQ29sdW1uOiAwfTtcbn1cblxuLyoqXG4gKiBJdGVyYXRlIHRocm91Z2ggaW50ZXJuYWwgaXRlbXMuIFRoaXMgbWV0aG9kIHRha2VzIHRoZSBzYW1lIGFyZ3VtZW50cyB0aGF0XG4gKiBgQXJyYXkucHJvdG90eXBlLmZvckVhY2hgIHRha2VzLlxuICpcbiAqIE5PVEU6IFRoZSBvcmRlciBvZiB0aGUgbWFwcGluZ3MgaXMgTk9UIGd1YXJhbnRlZWQuXG4gKi9cbk1hcHBpbmdMaXN0LnByb3RvdHlwZS51bnNvcnRlZEZvckVhY2ggPVxuICBmdW5jdGlvbiBNYXBwaW5nTGlzdF9mb3JFYWNoKGFDYWxsYmFjaywgYVRoaXNBcmcpIHtcbiAgICB0aGlzLl9hcnJheS5mb3JFYWNoKGFDYWxsYmFjaywgYVRoaXNBcmcpO1xuICB9O1xuXG4vKipcbiAqIEFkZCB0aGUgZ2l2ZW4gc291cmNlIG1hcHBpbmcuXG4gKlxuICogQHBhcmFtIE9iamVjdCBhTWFwcGluZ1xuICovXG5NYXBwaW5nTGlzdC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gTWFwcGluZ0xpc3RfYWRkKGFNYXBwaW5nKSB7XG4gIGlmIChnZW5lcmF0ZWRQb3NpdGlvbkFmdGVyKHRoaXMuX2xhc3QsIGFNYXBwaW5nKSkge1xuICAgIHRoaXMuX2xhc3QgPSBhTWFwcGluZztcbiAgICB0aGlzLl9hcnJheS5wdXNoKGFNYXBwaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLl9zb3J0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9hcnJheS5wdXNoKGFNYXBwaW5nKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmbGF0LCBzb3J0ZWQgYXJyYXkgb2YgbWFwcGluZ3MuIFRoZSBtYXBwaW5ncyBhcmUgc29ydGVkIGJ5XG4gKiBnZW5lcmF0ZWQgcG9zaXRpb24uXG4gKlxuICogV0FSTklORzogVGhpcyBtZXRob2QgcmV0dXJucyBpbnRlcm5hbCBkYXRhIHdpdGhvdXQgY29weWluZywgZm9yXG4gKiBwZXJmb3JtYW5jZS4gVGhlIHJldHVybiB2YWx1ZSBtdXN0IE5PVCBiZSBtdXRhdGVkLCBhbmQgc2hvdWxkIGJlIHRyZWF0ZWQgYXNcbiAqIGFuIGltbXV0YWJsZSBib3Jyb3cuIElmIHlvdSB3YW50IHRvIHRha2Ugb3duZXJzaGlwLCB5b3UgbXVzdCBtYWtlIHlvdXIgb3duXG4gKiBjb3B5LlxuICovXG5NYXBwaW5nTGlzdC5wcm90b3R5cGUudG9BcnJheSA9IGZ1bmN0aW9uIE1hcHBpbmdMaXN0X3RvQXJyYXkoKSB7XG4gIGlmICghdGhpcy5fc29ydGVkKSB7XG4gICAgdGhpcy5fYXJyYXkuc29ydCh1dGlsLmNvbXBhcmVCeUdlbmVyYXRlZFBvc2l0aW9uc0luZmxhdGVkKTtcbiAgICB0aGlzLl9zb3J0ZWQgPSB0cnVlO1xuICB9XG4gIHJldHVybiB0aGlzLl9hcnJheTtcbn07XG5cbmV4cG9ydHMuTWFwcGluZ0xpc3QgPSBNYXBwaW5nTGlzdDtcbiIsICIvKiAtKi0gTW9kZToganM7IGpzLWluZGVudC1sZXZlbDogMjsgLSotICovXG4vKlxuICogQ29weXJpZ2h0IDIwMTEgTW96aWxsYSBGb3VuZGF0aW9uIGFuZCBjb250cmlidXRvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5cbnZhciBiYXNlNjRWTFEgPSByZXF1aXJlKCcuL2Jhc2U2NC12bHEnKTtcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG52YXIgQXJyYXlTZXQgPSByZXF1aXJlKCcuL2FycmF5LXNldCcpLkFycmF5U2V0O1xudmFyIE1hcHBpbmdMaXN0ID0gcmVxdWlyZSgnLi9tYXBwaW5nLWxpc3QnKS5NYXBwaW5nTGlzdDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgU291cmNlTWFwR2VuZXJhdG9yIHJlcHJlc2VudHMgYSBzb3VyY2UgbWFwIHdoaWNoIGlzXG4gKiBiZWluZyBidWlsdCBpbmNyZW1lbnRhbGx5LiBZb3UgbWF5IHBhc3MgYW4gb2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZ1xuICogcHJvcGVydGllczpcbiAqXG4gKiAgIC0gZmlsZTogVGhlIGZpbGVuYW1lIG9mIHRoZSBnZW5lcmF0ZWQgc291cmNlLlxuICogICAtIHNvdXJjZVJvb3Q6IEEgcm9vdCBmb3IgYWxsIHJlbGF0aXZlIFVSTHMgaW4gdGhpcyBzb3VyY2UgbWFwLlxuICovXG5mdW5jdGlvbiBTb3VyY2VNYXBHZW5lcmF0b3IoYUFyZ3MpIHtcbiAgaWYgKCFhQXJncykge1xuICAgIGFBcmdzID0ge307XG4gIH1cbiAgdGhpcy5fZmlsZSA9IHV0aWwuZ2V0QXJnKGFBcmdzLCAnZmlsZScsIG51bGwpO1xuICB0aGlzLl9zb3VyY2VSb290ID0gdXRpbC5nZXRBcmcoYUFyZ3MsICdzb3VyY2VSb290JywgbnVsbCk7XG4gIHRoaXMuX3NraXBWYWxpZGF0aW9uID0gdXRpbC5nZXRBcmcoYUFyZ3MsICdza2lwVmFsaWRhdGlvbicsIGZhbHNlKTtcbiAgdGhpcy5fc291cmNlcyA9IG5ldyBBcnJheVNldCgpO1xuICB0aGlzLl9uYW1lcyA9IG5ldyBBcnJheVNldCgpO1xuICB0aGlzLl9tYXBwaW5ncyA9IG5ldyBNYXBwaW5nTGlzdCgpO1xuICB0aGlzLl9zb3VyY2VzQ29udGVudHMgPSBudWxsO1xufVxuXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLl92ZXJzaW9uID0gMztcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IFNvdXJjZU1hcEdlbmVyYXRvciBiYXNlZCBvbiBhIFNvdXJjZU1hcENvbnN1bWVyXG4gKlxuICogQHBhcmFtIGFTb3VyY2VNYXBDb25zdW1lciBUaGUgU291cmNlTWFwLlxuICovXG5Tb3VyY2VNYXBHZW5lcmF0b3IuZnJvbVNvdXJjZU1hcCA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcEdlbmVyYXRvcl9mcm9tU291cmNlTWFwKGFTb3VyY2VNYXBDb25zdW1lcikge1xuICAgIHZhciBzb3VyY2VSb290ID0gYVNvdXJjZU1hcENvbnN1bWVyLnNvdXJjZVJvb3Q7XG4gICAgdmFyIGdlbmVyYXRvciA9IG5ldyBTb3VyY2VNYXBHZW5lcmF0b3Ioe1xuICAgICAgZmlsZTogYVNvdXJjZU1hcENvbnN1bWVyLmZpbGUsXG4gICAgICBzb3VyY2VSb290OiBzb3VyY2VSb290XG4gICAgfSk7XG4gICAgYVNvdXJjZU1hcENvbnN1bWVyLmVhY2hNYXBwaW5nKGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICB2YXIgbmV3TWFwcGluZyA9IHtcbiAgICAgICAgZ2VuZXJhdGVkOiB7XG4gICAgICAgICAgbGluZTogbWFwcGluZy5nZW5lcmF0ZWRMaW5lLFxuICAgICAgICAgIGNvbHVtbjogbWFwcGluZy5nZW5lcmF0ZWRDb2x1bW5cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgaWYgKG1hcHBpbmcuc291cmNlICE9IG51bGwpIHtcbiAgICAgICAgbmV3TWFwcGluZy5zb3VyY2UgPSBtYXBwaW5nLnNvdXJjZTtcbiAgICAgICAgaWYgKHNvdXJjZVJvb3QgIT0gbnVsbCkge1xuICAgICAgICAgIG5ld01hcHBpbmcuc291cmNlID0gdXRpbC5yZWxhdGl2ZShzb3VyY2VSb290LCBuZXdNYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgIH1cblxuICAgICAgICBuZXdNYXBwaW5nLm9yaWdpbmFsID0ge1xuICAgICAgICAgIGxpbmU6IG1hcHBpbmcub3JpZ2luYWxMaW5lLFxuICAgICAgICAgIGNvbHVtbjogbWFwcGluZy5vcmlnaW5hbENvbHVtblxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChtYXBwaW5nLm5hbWUgIT0gbnVsbCkge1xuICAgICAgICAgIG5ld01hcHBpbmcubmFtZSA9IG1hcHBpbmcubmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBnZW5lcmF0b3IuYWRkTWFwcGluZyhuZXdNYXBwaW5nKTtcbiAgICB9KTtcbiAgICBhU291cmNlTWFwQ29uc3VtZXIuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2VGaWxlKSB7XG4gICAgICB2YXIgc291cmNlUmVsYXRpdmUgPSBzb3VyY2VGaWxlO1xuICAgICAgaWYgKHNvdXJjZVJvb3QgIT09IG51bGwpIHtcbiAgICAgICAgc291cmNlUmVsYXRpdmUgPSB1dGlsLnJlbGF0aXZlKHNvdXJjZVJvb3QsIHNvdXJjZUZpbGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWdlbmVyYXRvci5fc291cmNlcy5oYXMoc291cmNlUmVsYXRpdmUpKSB7XG4gICAgICAgIGdlbmVyYXRvci5fc291cmNlcy5hZGQoc291cmNlUmVsYXRpdmUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgY29udGVudCA9IGFTb3VyY2VNYXBDb25zdW1lci5zb3VyY2VDb250ZW50Rm9yKHNvdXJjZUZpbGUpO1xuICAgICAgaWYgKGNvbnRlbnQgIT0gbnVsbCkge1xuICAgICAgICBnZW5lcmF0b3Iuc2V0U291cmNlQ29udGVudChzb3VyY2VGaWxlLCBjb250ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9O1xuXG4vKipcbiAqIEFkZCBhIHNpbmdsZSBtYXBwaW5nIGZyb20gb3JpZ2luYWwgc291cmNlIGxpbmUgYW5kIGNvbHVtbiB0byB0aGUgZ2VuZXJhdGVkXG4gKiBzb3VyY2UncyBsaW5lIGFuZCBjb2x1bW4gZm9yIHRoaXMgc291cmNlIG1hcCBiZWluZyBjcmVhdGVkLiBUaGUgbWFwcGluZ1xuICogb2JqZWN0IHNob3VsZCBoYXZlIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gZ2VuZXJhdGVkOiBBbiBvYmplY3Qgd2l0aCB0aGUgZ2VuZXJhdGVkIGxpbmUgYW5kIGNvbHVtbiBwb3NpdGlvbnMuXG4gKiAgIC0gb3JpZ2luYWw6IEFuIG9iamVjdCB3aXRoIHRoZSBvcmlnaW5hbCBsaW5lIGFuZCBjb2x1bW4gcG9zaXRpb25zLlxuICogICAtIHNvdXJjZTogVGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlIChyZWxhdGl2ZSB0byB0aGUgc291cmNlUm9vdCkuXG4gKiAgIC0gbmFtZTogQW4gb3B0aW9uYWwgb3JpZ2luYWwgdG9rZW4gbmFtZSBmb3IgdGhpcyBtYXBwaW5nLlxuICovXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLmFkZE1hcHBpbmcgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBHZW5lcmF0b3JfYWRkTWFwcGluZyhhQXJncykge1xuICAgIHZhciBnZW5lcmF0ZWQgPSB1dGlsLmdldEFyZyhhQXJncywgJ2dlbmVyYXRlZCcpO1xuICAgIHZhciBvcmlnaW5hbCA9IHV0aWwuZ2V0QXJnKGFBcmdzLCAnb3JpZ2luYWwnLCBudWxsKTtcbiAgICB2YXIgc291cmNlID0gdXRpbC5nZXRBcmcoYUFyZ3MsICdzb3VyY2UnLCBudWxsKTtcbiAgICB2YXIgbmFtZSA9IHV0aWwuZ2V0QXJnKGFBcmdzLCAnbmFtZScsIG51bGwpO1xuXG4gICAgaWYgKCF0aGlzLl9za2lwVmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5fdmFsaWRhdGVNYXBwaW5nKGdlbmVyYXRlZCwgb3JpZ2luYWwsIHNvdXJjZSwgbmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKHNvdXJjZSAhPSBudWxsKSB7XG4gICAgICBzb3VyY2UgPSBTdHJpbmcoc291cmNlKTtcbiAgICAgIGlmICghdGhpcy5fc291cmNlcy5oYXMoc291cmNlKSkge1xuICAgICAgICB0aGlzLl9zb3VyY2VzLmFkZChzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChuYW1lICE9IG51bGwpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSk7XG4gICAgICBpZiAoIXRoaXMuX25hbWVzLmhhcyhuYW1lKSkge1xuICAgICAgICB0aGlzLl9uYW1lcy5hZGQobmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fbWFwcGluZ3MuYWRkKHtcbiAgICAgIGdlbmVyYXRlZExpbmU6IGdlbmVyYXRlZC5saW5lLFxuICAgICAgZ2VuZXJhdGVkQ29sdW1uOiBnZW5lcmF0ZWQuY29sdW1uLFxuICAgICAgb3JpZ2luYWxMaW5lOiBvcmlnaW5hbCAhPSBudWxsICYmIG9yaWdpbmFsLmxpbmUsXG4gICAgICBvcmlnaW5hbENvbHVtbjogb3JpZ2luYWwgIT0gbnVsbCAmJiBvcmlnaW5hbC5jb2x1bW4sXG4gICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgIG5hbWU6IG5hbWVcbiAgICB9KTtcbiAgfTtcblxuLyoqXG4gKiBTZXQgdGhlIHNvdXJjZSBjb250ZW50IGZvciBhIHNvdXJjZSBmaWxlLlxuICovXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLnNldFNvdXJjZUNvbnRlbnQgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBHZW5lcmF0b3Jfc2V0U291cmNlQ29udGVudChhU291cmNlRmlsZSwgYVNvdXJjZUNvbnRlbnQpIHtcbiAgICB2YXIgc291cmNlID0gYVNvdXJjZUZpbGU7XG4gICAgaWYgKHRoaXMuX3NvdXJjZVJvb3QgIT0gbnVsbCkge1xuICAgICAgc291cmNlID0gdXRpbC5yZWxhdGl2ZSh0aGlzLl9zb3VyY2VSb290LCBzb3VyY2UpO1xuICAgIH1cblxuICAgIGlmIChhU291cmNlQ29udGVudCAhPSBudWxsKSB7XG4gICAgICAvLyBBZGQgdGhlIHNvdXJjZSBjb250ZW50IHRvIHRoZSBfc291cmNlc0NvbnRlbnRzIG1hcC5cbiAgICAgIC8vIENyZWF0ZSBhIG5ldyBfc291cmNlc0NvbnRlbnRzIG1hcCBpZiB0aGUgcHJvcGVydHkgaXMgbnVsbC5cbiAgICAgIGlmICghdGhpcy5fc291cmNlc0NvbnRlbnRzKSB7XG4gICAgICAgIHRoaXMuX3NvdXJjZXNDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zb3VyY2VzQ29udGVudHNbdXRpbC50b1NldFN0cmluZyhzb3VyY2UpXSA9IGFTb3VyY2VDb250ZW50O1xuICAgIH0gZWxzZSBpZiAodGhpcy5fc291cmNlc0NvbnRlbnRzKSB7XG4gICAgICAvLyBSZW1vdmUgdGhlIHNvdXJjZSBmaWxlIGZyb20gdGhlIF9zb3VyY2VzQ29udGVudHMgbWFwLlxuICAgICAgLy8gSWYgdGhlIF9zb3VyY2VzQ29udGVudHMgbWFwIGlzIGVtcHR5LCBzZXQgdGhlIHByb3BlcnR5IHRvIG51bGwuXG4gICAgICBkZWxldGUgdGhpcy5fc291cmNlc0NvbnRlbnRzW3V0aWwudG9TZXRTdHJpbmcoc291cmNlKV07XG4gICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5fc291cmNlc0NvbnRlbnRzKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5fc291cmNlc0NvbnRlbnRzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgbWFwcGluZ3Mgb2YgYSBzdWItc291cmNlLW1hcCBmb3IgYSBzcGVjaWZpYyBzb3VyY2UgZmlsZSB0byB0aGVcbiAqIHNvdXJjZSBtYXAgYmVpbmcgZ2VuZXJhdGVkLiBFYWNoIG1hcHBpbmcgdG8gdGhlIHN1cHBsaWVkIHNvdXJjZSBmaWxlIGlzXG4gKiByZXdyaXR0ZW4gdXNpbmcgdGhlIHN1cHBsaWVkIHNvdXJjZSBtYXAuIE5vdGU6IFRoZSByZXNvbHV0aW9uIGZvciB0aGVcbiAqIHJlc3VsdGluZyBtYXBwaW5ncyBpcyB0aGUgbWluaW1pdW0gb2YgdGhpcyBtYXAgYW5kIHRoZSBzdXBwbGllZCBtYXAuXG4gKlxuICogQHBhcmFtIGFTb3VyY2VNYXBDb25zdW1lciBUaGUgc291cmNlIG1hcCB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGFTb3VyY2VGaWxlIE9wdGlvbmFsLiBUaGUgZmlsZW5hbWUgb2YgdGhlIHNvdXJjZSBmaWxlLlxuICogICAgICAgIElmIG9taXR0ZWQsIFNvdXJjZU1hcENvbnN1bWVyJ3MgZmlsZSBwcm9wZXJ0eSB3aWxsIGJlIHVzZWQuXG4gKiBAcGFyYW0gYVNvdXJjZU1hcFBhdGggT3B0aW9uYWwuIFRoZSBkaXJuYW1lIG9mIHRoZSBwYXRoIHRvIHRoZSBzb3VyY2UgbWFwXG4gKiAgICAgICAgdG8gYmUgYXBwbGllZC4gSWYgcmVsYXRpdmUsIGl0IGlzIHJlbGF0aXZlIHRvIHRoZSBTb3VyY2VNYXBDb25zdW1lci5cbiAqICAgICAgICBUaGlzIHBhcmFtZXRlciBpcyBuZWVkZWQgd2hlbiB0aGUgdHdvIHNvdXJjZSBtYXBzIGFyZW4ndCBpbiB0aGUgc2FtZVxuICogICAgICAgIGRpcmVjdG9yeSwgYW5kIHRoZSBzb3VyY2UgbWFwIHRvIGJlIGFwcGxpZWQgY29udGFpbnMgcmVsYXRpdmUgc291cmNlXG4gKiAgICAgICAgcGF0aHMuIElmIHNvLCB0aG9zZSByZWxhdGl2ZSBzb3VyY2UgcGF0aHMgbmVlZCB0byBiZSByZXdyaXR0ZW5cbiAqICAgICAgICByZWxhdGl2ZSB0byB0aGUgU291cmNlTWFwR2VuZXJhdG9yLlxuICovXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLmFwcGx5U291cmNlTWFwID1cbiAgZnVuY3Rpb24gU291cmNlTWFwR2VuZXJhdG9yX2FwcGx5U291cmNlTWFwKGFTb3VyY2VNYXBDb25zdW1lciwgYVNvdXJjZUZpbGUsIGFTb3VyY2VNYXBQYXRoKSB7XG4gICAgdmFyIHNvdXJjZUZpbGUgPSBhU291cmNlRmlsZTtcbiAgICAvLyBJZiBhU291cmNlRmlsZSBpcyBvbWl0dGVkLCB3ZSB3aWxsIHVzZSB0aGUgZmlsZSBwcm9wZXJ0eSBvZiB0aGUgU291cmNlTWFwXG4gICAgaWYgKGFTb3VyY2VGaWxlID09IG51bGwpIHtcbiAgICAgIGlmIChhU291cmNlTWFwQ29uc3VtZXIuZmlsZSA9PSBudWxsKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAnU291cmNlTWFwR2VuZXJhdG9yLnByb3RvdHlwZS5hcHBseVNvdXJjZU1hcCByZXF1aXJlcyBlaXRoZXIgYW4gZXhwbGljaXQgc291cmNlIGZpbGUsICcgK1xuICAgICAgICAgICdvciB0aGUgc291cmNlIG1hcFxcJ3MgXCJmaWxlXCIgcHJvcGVydHkuIEJvdGggd2VyZSBvbWl0dGVkLidcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIHNvdXJjZUZpbGUgPSBhU291cmNlTWFwQ29uc3VtZXIuZmlsZTtcbiAgICB9XG4gICAgdmFyIHNvdXJjZVJvb3QgPSB0aGlzLl9zb3VyY2VSb290O1xuICAgIC8vIE1ha2UgXCJzb3VyY2VGaWxlXCIgcmVsYXRpdmUgaWYgYW4gYWJzb2x1dGUgVXJsIGlzIHBhc3NlZC5cbiAgICBpZiAoc291cmNlUm9vdCAhPSBudWxsKSB7XG4gICAgICBzb3VyY2VGaWxlID0gdXRpbC5yZWxhdGl2ZShzb3VyY2VSb290LCBzb3VyY2VGaWxlKTtcbiAgICB9XG4gICAgLy8gQXBwbHlpbmcgdGhlIFNvdXJjZU1hcCBjYW4gYWRkIGFuZCByZW1vdmUgaXRlbXMgZnJvbSB0aGUgc291cmNlcyBhbmRcbiAgICAvLyB0aGUgbmFtZXMgYXJyYXkuXG4gICAgdmFyIG5ld1NvdXJjZXMgPSBuZXcgQXJyYXlTZXQoKTtcbiAgICB2YXIgbmV3TmFtZXMgPSBuZXcgQXJyYXlTZXQoKTtcblxuICAgIC8vIEZpbmQgbWFwcGluZ3MgZm9yIHRoZSBcInNvdXJjZUZpbGVcIlxuICAgIHRoaXMuX21hcHBpbmdzLnVuc29ydGVkRm9yRWFjaChmdW5jdGlvbiAobWFwcGluZykge1xuICAgICAgaWYgKG1hcHBpbmcuc291cmNlID09PSBzb3VyY2VGaWxlICYmIG1hcHBpbmcub3JpZ2luYWxMaW5lICE9IG51bGwpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgaXQgY2FuIGJlIG1hcHBlZCBieSB0aGUgc291cmNlIG1hcCwgdGhlbiB1cGRhdGUgdGhlIG1hcHBpbmcuXG4gICAgICAgIHZhciBvcmlnaW5hbCA9IGFTb3VyY2VNYXBDb25zdW1lci5vcmlnaW5hbFBvc2l0aW9uRm9yKHtcbiAgICAgICAgICBsaW5lOiBtYXBwaW5nLm9yaWdpbmFsTGluZSxcbiAgICAgICAgICBjb2x1bW46IG1hcHBpbmcub3JpZ2luYWxDb2x1bW5cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChvcmlnaW5hbC5zb3VyY2UgIT0gbnVsbCkge1xuICAgICAgICAgIC8vIENvcHkgbWFwcGluZ1xuICAgICAgICAgIG1hcHBpbmcuc291cmNlID0gb3JpZ2luYWwuc291cmNlO1xuICAgICAgICAgIGlmIChhU291cmNlTWFwUGF0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICBtYXBwaW5nLnNvdXJjZSA9IHV0aWwuam9pbihhU291cmNlTWFwUGF0aCwgbWFwcGluZy5zb3VyY2UpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzb3VyY2VSb290ICE9IG51bGwpIHtcbiAgICAgICAgICAgIG1hcHBpbmcuc291cmNlID0gdXRpbC5yZWxhdGl2ZShzb3VyY2VSb290LCBtYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxMaW5lID0gb3JpZ2luYWwubGluZTtcbiAgICAgICAgICBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uID0gb3JpZ2luYWwuY29sdW1uO1xuICAgICAgICAgIGlmIChvcmlnaW5hbC5uYW1lICE9IG51bGwpIHtcbiAgICAgICAgICAgIG1hcHBpbmcubmFtZSA9IG9yaWdpbmFsLm5hbWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBzb3VyY2UgPSBtYXBwaW5nLnNvdXJjZTtcbiAgICAgIGlmIChzb3VyY2UgIT0gbnVsbCAmJiAhbmV3U291cmNlcy5oYXMoc291cmNlKSkge1xuICAgICAgICBuZXdTb3VyY2VzLmFkZChzb3VyY2UpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbmFtZSA9IG1hcHBpbmcubmFtZTtcbiAgICAgIGlmIChuYW1lICE9IG51bGwgJiYgIW5ld05hbWVzLmhhcyhuYW1lKSkge1xuICAgICAgICBuZXdOYW1lcy5hZGQobmFtZSk7XG4gICAgICB9XG5cbiAgICB9LCB0aGlzKTtcbiAgICB0aGlzLl9zb3VyY2VzID0gbmV3U291cmNlcztcbiAgICB0aGlzLl9uYW1lcyA9IG5ld05hbWVzO1xuXG4gICAgLy8gQ29weSBzb3VyY2VzQ29udGVudHMgb2YgYXBwbGllZCBtYXAuXG4gICAgYVNvdXJjZU1hcENvbnN1bWVyLnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlRmlsZSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBhU291cmNlTWFwQ29uc3VtZXIuc291cmNlQ29udGVudEZvcihzb3VyY2VGaWxlKTtcbiAgICAgIGlmIChjb250ZW50ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGFTb3VyY2VNYXBQYXRoICE9IG51bGwpIHtcbiAgICAgICAgICBzb3VyY2VGaWxlID0gdXRpbC5qb2luKGFTb3VyY2VNYXBQYXRoLCBzb3VyY2VGaWxlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc291cmNlUm9vdCAhPSBudWxsKSB7XG4gICAgICAgICAgc291cmNlRmlsZSA9IHV0aWwucmVsYXRpdmUoc291cmNlUm9vdCwgc291cmNlRmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRTb3VyY2VDb250ZW50KHNvdXJjZUZpbGUsIGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9O1xuXG4vKipcbiAqIEEgbWFwcGluZyBjYW4gaGF2ZSBvbmUgb2YgdGhlIHRocmVlIGxldmVscyBvZiBkYXRhOlxuICpcbiAqICAgMS4gSnVzdCB0aGUgZ2VuZXJhdGVkIHBvc2l0aW9uLlxuICogICAyLiBUaGUgR2VuZXJhdGVkIHBvc2l0aW9uLCBvcmlnaW5hbCBwb3NpdGlvbiwgYW5kIG9yaWdpbmFsIHNvdXJjZS5cbiAqICAgMy4gR2VuZXJhdGVkIGFuZCBvcmlnaW5hbCBwb3NpdGlvbiwgb3JpZ2luYWwgc291cmNlLCBhcyB3ZWxsIGFzIGEgbmFtZVxuICogICAgICB0b2tlbi5cbiAqXG4gKiBUbyBtYWludGFpbiBjb25zaXN0ZW5jeSwgd2UgdmFsaWRhdGUgdGhhdCBhbnkgbmV3IG1hcHBpbmcgYmVpbmcgYWRkZWQgZmFsbHNcbiAqIGluIHRvIG9uZSBvZiB0aGVzZSBjYXRlZ29yaWVzLlxuICovXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLl92YWxpZGF0ZU1hcHBpbmcgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBHZW5lcmF0b3JfdmFsaWRhdGVNYXBwaW5nKGFHZW5lcmF0ZWQsIGFPcmlnaW5hbCwgYVNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhTmFtZSkge1xuICAgIC8vIFdoZW4gYU9yaWdpbmFsIGlzIHRydXRoeSBidXQgaGFzIGVtcHR5IHZhbHVlcyBmb3IgLmxpbmUgYW5kIC5jb2x1bW4sXG4gICAgLy8gaXQgaXMgbW9zdCBsaWtlbHkgYSBwcm9ncmFtbWVyIGVycm9yLiBJbiB0aGlzIGNhc2Ugd2UgdGhyb3cgYSB2ZXJ5XG4gICAgLy8gc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSB0byB0cnkgdG8gZ3VpZGUgdGhlbSB0aGUgcmlnaHQgd2F5LlxuICAgIC8vIEZvciBleGFtcGxlOiBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lci9wb2x5bWVyLWJ1bmRsZXIvcHVsbC81MTlcbiAgICBpZiAoYU9yaWdpbmFsICYmIHR5cGVvZiBhT3JpZ2luYWwubGluZSAhPT0gJ251bWJlcicgJiYgdHlwZW9mIGFPcmlnaW5hbC5jb2x1bW4gIT09ICdudW1iZXInKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICdvcmlnaW5hbC5saW5lIGFuZCBvcmlnaW5hbC5jb2x1bW4gYXJlIG5vdCBudW1iZXJzIC0tIHlvdSBwcm9iYWJseSBtZWFudCB0byBvbWl0ICcgK1xuICAgICAgICAgICAgJ3RoZSBvcmlnaW5hbCBtYXBwaW5nIGVudGlyZWx5IGFuZCBvbmx5IG1hcCB0aGUgZ2VuZXJhdGVkIHBvc2l0aW9uLiBJZiBzbywgcGFzcyAnICtcbiAgICAgICAgICAgICdudWxsIGZvciB0aGUgb3JpZ2luYWwgbWFwcGluZyBpbnN0ZWFkIG9mIGFuIG9iamVjdCB3aXRoIGVtcHR5IG9yIG51bGwgdmFsdWVzLidcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAoYUdlbmVyYXRlZCAmJiAnbGluZScgaW4gYUdlbmVyYXRlZCAmJiAnY29sdW1uJyBpbiBhR2VuZXJhdGVkXG4gICAgICAgICYmIGFHZW5lcmF0ZWQubGluZSA+IDAgJiYgYUdlbmVyYXRlZC5jb2x1bW4gPj0gMFxuICAgICAgICAmJiAhYU9yaWdpbmFsICYmICFhU291cmNlICYmICFhTmFtZSkge1xuICAgICAgLy8gQ2FzZSAxLlxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChhR2VuZXJhdGVkICYmICdsaW5lJyBpbiBhR2VuZXJhdGVkICYmICdjb2x1bW4nIGluIGFHZW5lcmF0ZWRcbiAgICAgICAgICAgICAmJiBhT3JpZ2luYWwgJiYgJ2xpbmUnIGluIGFPcmlnaW5hbCAmJiAnY29sdW1uJyBpbiBhT3JpZ2luYWxcbiAgICAgICAgICAgICAmJiBhR2VuZXJhdGVkLmxpbmUgPiAwICYmIGFHZW5lcmF0ZWQuY29sdW1uID49IDBcbiAgICAgICAgICAgICAmJiBhT3JpZ2luYWwubGluZSA+IDAgJiYgYU9yaWdpbmFsLmNvbHVtbiA+PSAwXG4gICAgICAgICAgICAgJiYgYVNvdXJjZSkge1xuICAgICAgLy8gQ2FzZXMgMiBhbmQgMy5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbWFwcGluZzogJyArIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgZ2VuZXJhdGVkOiBhR2VuZXJhdGVkLFxuICAgICAgICBzb3VyY2U6IGFTb3VyY2UsXG4gICAgICAgIG9yaWdpbmFsOiBhT3JpZ2luYWwsXG4gICAgICAgIG5hbWU6IGFOYW1lXG4gICAgICB9KSk7XG4gICAgfVxuICB9O1xuXG4vKipcbiAqIFNlcmlhbGl6ZSB0aGUgYWNjdW11bGF0ZWQgbWFwcGluZ3MgaW4gdG8gdGhlIHN0cmVhbSBvZiBiYXNlIDY0IFZMUXNcbiAqIHNwZWNpZmllZCBieSB0aGUgc291cmNlIG1hcCBmb3JtYXQuXG4gKi9cblNvdXJjZU1hcEdlbmVyYXRvci5wcm90b3R5cGUuX3NlcmlhbGl6ZU1hcHBpbmdzID1cbiAgZnVuY3Rpb24gU291cmNlTWFwR2VuZXJhdG9yX3NlcmlhbGl6ZU1hcHBpbmdzKCkge1xuICAgIHZhciBwcmV2aW91c0dlbmVyYXRlZENvbHVtbiA9IDA7XG4gICAgdmFyIHByZXZpb3VzR2VuZXJhdGVkTGluZSA9IDE7XG4gICAgdmFyIHByZXZpb3VzT3JpZ2luYWxDb2x1bW4gPSAwO1xuICAgIHZhciBwcmV2aW91c09yaWdpbmFsTGluZSA9IDA7XG4gICAgdmFyIHByZXZpb3VzTmFtZSA9IDA7XG4gICAgdmFyIHByZXZpb3VzU291cmNlID0gMDtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgdmFyIG5leHQ7XG4gICAgdmFyIG1hcHBpbmc7XG4gICAgdmFyIG5hbWVJZHg7XG4gICAgdmFyIHNvdXJjZUlkeDtcblxuICAgIHZhciBtYXBwaW5ncyA9IHRoaXMuX21hcHBpbmdzLnRvQXJyYXkoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbWFwcGluZ3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIG1hcHBpbmcgPSBtYXBwaW5nc1tpXTtcbiAgICAgIG5leHQgPSAnJ1xuXG4gICAgICBpZiAobWFwcGluZy5nZW5lcmF0ZWRMaW5lICE9PSBwcmV2aW91c0dlbmVyYXRlZExpbmUpIHtcbiAgICAgICAgcHJldmlvdXNHZW5lcmF0ZWRDb2x1bW4gPSAwO1xuICAgICAgICB3aGlsZSAobWFwcGluZy5nZW5lcmF0ZWRMaW5lICE9PSBwcmV2aW91c0dlbmVyYXRlZExpbmUpIHtcbiAgICAgICAgICBuZXh0ICs9ICc7JztcbiAgICAgICAgICBwcmV2aW91c0dlbmVyYXRlZExpbmUrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgIGlmICghdXRpbC5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnNJbmZsYXRlZChtYXBwaW5nLCBtYXBwaW5nc1tpIC0gMV0pKSB7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV4dCArPSAnLCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbmV4dCArPSBiYXNlNjRWTFEuZW5jb2RlKG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHByZXZpb3VzR2VuZXJhdGVkQ29sdW1uKTtcbiAgICAgIHByZXZpb3VzR2VuZXJhdGVkQ29sdW1uID0gbWFwcGluZy5nZW5lcmF0ZWRDb2x1bW47XG5cbiAgICAgIGlmIChtYXBwaW5nLnNvdXJjZSAhPSBudWxsKSB7XG4gICAgICAgIHNvdXJjZUlkeCA9IHRoaXMuX3NvdXJjZXMuaW5kZXhPZihtYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgIG5leHQgKz0gYmFzZTY0VkxRLmVuY29kZShzb3VyY2VJZHggLSBwcmV2aW91c1NvdXJjZSk7XG4gICAgICAgIHByZXZpb3VzU291cmNlID0gc291cmNlSWR4O1xuXG4gICAgICAgIC8vIGxpbmVzIGFyZSBzdG9yZWQgMC1iYXNlZCBpbiBTb3VyY2VNYXAgc3BlYyB2ZXJzaW9uIDNcbiAgICAgICAgbmV4dCArPSBiYXNlNjRWTFEuZW5jb2RlKG1hcHBpbmcub3JpZ2luYWxMaW5lIC0gMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIHByZXZpb3VzT3JpZ2luYWxMaW5lKTtcbiAgICAgICAgcHJldmlvdXNPcmlnaW5hbExpbmUgPSBtYXBwaW5nLm9yaWdpbmFsTGluZSAtIDE7XG5cbiAgICAgICAgbmV4dCArPSBiYXNlNjRWTFEuZW5jb2RlKG1hcHBpbmcub3JpZ2luYWxDb2x1bW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLSBwcmV2aW91c09yaWdpbmFsQ29sdW1uKTtcbiAgICAgICAgcHJldmlvdXNPcmlnaW5hbENvbHVtbiA9IG1hcHBpbmcub3JpZ2luYWxDb2x1bW47XG5cbiAgICAgICAgaWYgKG1hcHBpbmcubmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgbmFtZUlkeCA9IHRoaXMuX25hbWVzLmluZGV4T2YobWFwcGluZy5uYW1lKTtcbiAgICAgICAgICBuZXh0ICs9IGJhc2U2NFZMUS5lbmNvZGUobmFtZUlkeCAtIHByZXZpb3VzTmFtZSk7XG4gICAgICAgICAgcHJldmlvdXNOYW1lID0gbmFtZUlkeDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXN1bHQgKz0gbmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG5Tb3VyY2VNYXBHZW5lcmF0b3IucHJvdG90eXBlLl9nZW5lcmF0ZVNvdXJjZXNDb250ZW50ID1cbiAgZnVuY3Rpb24gU291cmNlTWFwR2VuZXJhdG9yX2dlbmVyYXRlU291cmNlc0NvbnRlbnQoYVNvdXJjZXMsIGFTb3VyY2VSb290KSB7XG4gICAgcmV0dXJuIGFTb3VyY2VzLm1hcChmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICBpZiAoIXRoaXMuX3NvdXJjZXNDb250ZW50cykge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChhU291cmNlUm9vdCAhPSBudWxsKSB7XG4gICAgICAgIHNvdXJjZSA9IHV0aWwucmVsYXRpdmUoYVNvdXJjZVJvb3QsIHNvdXJjZSk7XG4gICAgICB9XG4gICAgICB2YXIga2V5ID0gdXRpbC50b1NldFN0cmluZyhzb3VyY2UpO1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl9zb3VyY2VzQ29udGVudHMsIGtleSlcbiAgICAgICAgPyB0aGlzLl9zb3VyY2VzQ29udGVudHNba2V5XVxuICAgICAgICA6IG51bGw7XG4gICAgfSwgdGhpcyk7XG4gIH07XG5cbi8qKlxuICogRXh0ZXJuYWxpemUgdGhlIHNvdXJjZSBtYXAuXG4gKi9cblNvdXJjZU1hcEdlbmVyYXRvci5wcm90b3R5cGUudG9KU09OID1cbiAgZnVuY3Rpb24gU291cmNlTWFwR2VuZXJhdG9yX3RvSlNPTigpIHtcbiAgICB2YXIgbWFwID0ge1xuICAgICAgdmVyc2lvbjogdGhpcy5fdmVyc2lvbixcbiAgICAgIHNvdXJjZXM6IHRoaXMuX3NvdXJjZXMudG9BcnJheSgpLFxuICAgICAgbmFtZXM6IHRoaXMuX25hbWVzLnRvQXJyYXkoKSxcbiAgICAgIG1hcHBpbmdzOiB0aGlzLl9zZXJpYWxpemVNYXBwaW5ncygpXG4gICAgfTtcbiAgICBpZiAodGhpcy5fZmlsZSAhPSBudWxsKSB7XG4gICAgICBtYXAuZmlsZSA9IHRoaXMuX2ZpbGU7XG4gICAgfVxuICAgIGlmICh0aGlzLl9zb3VyY2VSb290ICE9IG51bGwpIHtcbiAgICAgIG1hcC5zb3VyY2VSb290ID0gdGhpcy5fc291cmNlUm9vdDtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3NvdXJjZXNDb250ZW50cykge1xuICAgICAgbWFwLnNvdXJjZXNDb250ZW50ID0gdGhpcy5fZ2VuZXJhdGVTb3VyY2VzQ29udGVudChtYXAuc291cmNlcywgbWFwLnNvdXJjZVJvb3QpO1xuICAgIH1cblxuICAgIHJldHVybiBtYXA7XG4gIH07XG5cbi8qKlxuICogUmVuZGVyIHRoZSBzb3VyY2UgbWFwIGJlaW5nIGdlbmVyYXRlZCB0byBhIHN0cmluZy5cbiAqL1xuU291cmNlTWFwR2VuZXJhdG9yLnByb3RvdHlwZS50b1N0cmluZyA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcEdlbmVyYXRvcl90b1N0cmluZygpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSk7XG4gIH07XG5cbmV4cG9ydHMuU291cmNlTWFwR2VuZXJhdG9yID0gU291cmNlTWFwR2VuZXJhdG9yO1xuIiwgIi8qIC0qLSBNb2RlOiBqczsganMtaW5kZW50LWxldmVsOiAyOyAtKi0gKi9cbi8qXG4gKiBDb3B5cmlnaHQgMjAxMSBNb3ppbGxhIEZvdW5kYXRpb24gYW5kIGNvbnRyaWJ1dG9yc1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE5ldyBCU0QgbGljZW5zZS4gU2VlIExJQ0VOU0Ugb3I6XG4gKiBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvQlNELTMtQ2xhdXNlXG4gKi9cblxuZXhwb3J0cy5HUkVBVEVTVF9MT1dFUl9CT1VORCA9IDE7XG5leHBvcnRzLkxFQVNUX1VQUEVSX0JPVU5EID0gMjtcblxuLyoqXG4gKiBSZWN1cnNpdmUgaW1wbGVtZW50YXRpb24gb2YgYmluYXJ5IHNlYXJjaC5cbiAqXG4gKiBAcGFyYW0gYUxvdyBJbmRpY2VzIGhlcmUgYW5kIGxvd2VyIGRvIG5vdCBjb250YWluIHRoZSBuZWVkbGUuXG4gKiBAcGFyYW0gYUhpZ2ggSW5kaWNlcyBoZXJlIGFuZCBoaWdoZXIgZG8gbm90IGNvbnRhaW4gdGhlIG5lZWRsZS5cbiAqIEBwYXJhbSBhTmVlZGxlIFRoZSBlbGVtZW50IGJlaW5nIHNlYXJjaGVkIGZvci5cbiAqIEBwYXJhbSBhSGF5c3RhY2sgVGhlIG5vbi1lbXB0eSBhcnJheSBiZWluZyBzZWFyY2hlZC5cbiAqIEBwYXJhbSBhQ29tcGFyZSBGdW5jdGlvbiB3aGljaCB0YWtlcyB0d28gZWxlbWVudHMgYW5kIHJldHVybnMgLTEsIDAsIG9yIDEuXG4gKiBAcGFyYW0gYUJpYXMgRWl0aGVyICdiaW5hcnlTZWFyY2guR1JFQVRFU1RfTE9XRVJfQk9VTkQnIG9yXG4gKiAgICAgJ2JpbmFyeVNlYXJjaC5MRUFTVF9VUFBFUl9CT1VORCcuIFNwZWNpZmllcyB3aGV0aGVyIHRvIHJldHVybiB0aGVcbiAqICAgICBjbG9zZXN0IGVsZW1lbnQgdGhhdCBpcyBzbWFsbGVyIHRoYW4gb3IgZ3JlYXRlciB0aGFuIHRoZSBvbmUgd2UgYXJlXG4gKiAgICAgc2VhcmNoaW5nIGZvciwgcmVzcGVjdGl2ZWx5LCBpZiB0aGUgZXhhY3QgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIHJlY3Vyc2l2ZVNlYXJjaChhTG93LCBhSGlnaCwgYU5lZWRsZSwgYUhheXN0YWNrLCBhQ29tcGFyZSwgYUJpYXMpIHtcbiAgLy8gVGhpcyBmdW5jdGlvbiB0ZXJtaW5hdGVzIHdoZW4gb25lIG9mIHRoZSBmb2xsb3dpbmcgaXMgdHJ1ZTpcbiAgLy9cbiAgLy8gICAxLiBXZSBmaW5kIHRoZSBleGFjdCBlbGVtZW50IHdlIGFyZSBsb29raW5nIGZvci5cbiAgLy9cbiAgLy8gICAyLiBXZSBkaWQgbm90IGZpbmQgdGhlIGV4YWN0IGVsZW1lbnQsIGJ1dCB3ZSBjYW4gcmV0dXJuIHRoZSBpbmRleCBvZlxuICAvLyAgICAgIHRoZSBuZXh0LWNsb3Nlc3QgZWxlbWVudC5cbiAgLy9cbiAgLy8gICAzLiBXZSBkaWQgbm90IGZpbmQgdGhlIGV4YWN0IGVsZW1lbnQsIGFuZCB0aGVyZSBpcyBubyBuZXh0LWNsb3Nlc3RcbiAgLy8gICAgICBlbGVtZW50IHRoYW4gdGhlIG9uZSB3ZSBhcmUgc2VhcmNoaW5nIGZvciwgc28gd2UgcmV0dXJuIC0xLlxuICB2YXIgbWlkID0gTWF0aC5mbG9vcigoYUhpZ2ggLSBhTG93KSAvIDIpICsgYUxvdztcbiAgdmFyIGNtcCA9IGFDb21wYXJlKGFOZWVkbGUsIGFIYXlzdGFja1ttaWRdLCB0cnVlKTtcbiAgaWYgKGNtcCA9PT0gMCkge1xuICAgIC8vIEZvdW5kIHRoZSBlbGVtZW50IHdlIGFyZSBsb29raW5nIGZvci5cbiAgICByZXR1cm4gbWlkO1xuICB9XG4gIGVsc2UgaWYgKGNtcCA+IDApIHtcbiAgICAvLyBPdXIgbmVlZGxlIGlzIGdyZWF0ZXIgdGhhbiBhSGF5c3RhY2tbbWlkXS5cbiAgICBpZiAoYUhpZ2ggLSBtaWQgPiAxKSB7XG4gICAgICAvLyBUaGUgZWxlbWVudCBpcyBpbiB0aGUgdXBwZXIgaGFsZi5cbiAgICAgIHJldHVybiByZWN1cnNpdmVTZWFyY2gobWlkLCBhSGlnaCwgYU5lZWRsZSwgYUhheXN0YWNrLCBhQ29tcGFyZSwgYUJpYXMpO1xuICAgIH1cblxuICAgIC8vIFRoZSBleGFjdCBuZWVkbGUgZWxlbWVudCB3YXMgbm90IGZvdW5kIGluIHRoaXMgaGF5c3RhY2suIERldGVybWluZSBpZlxuICAgIC8vIHdlIGFyZSBpbiB0ZXJtaW5hdGlvbiBjYXNlICgzKSBvciAoMikgYW5kIHJldHVybiB0aGUgYXBwcm9wcmlhdGUgdGhpbmcuXG4gICAgaWYgKGFCaWFzID09IGV4cG9ydHMuTEVBU1RfVVBQRVJfQk9VTkQpIHtcbiAgICAgIHJldHVybiBhSGlnaCA8IGFIYXlzdGFjay5sZW5ndGggPyBhSGlnaCA6IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbWlkO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICAvLyBPdXIgbmVlZGxlIGlzIGxlc3MgdGhhbiBhSGF5c3RhY2tbbWlkXS5cbiAgICBpZiAobWlkIC0gYUxvdyA+IDEpIHtcbiAgICAgIC8vIFRoZSBlbGVtZW50IGlzIGluIHRoZSBsb3dlciBoYWxmLlxuICAgICAgcmV0dXJuIHJlY3Vyc2l2ZVNlYXJjaChhTG93LCBtaWQsIGFOZWVkbGUsIGFIYXlzdGFjaywgYUNvbXBhcmUsIGFCaWFzKTtcbiAgICB9XG5cbiAgICAvLyB3ZSBhcmUgaW4gdGVybWluYXRpb24gY2FzZSAoMykgb3IgKDIpIGFuZCByZXR1cm4gdGhlIGFwcHJvcHJpYXRlIHRoaW5nLlxuICAgIGlmIChhQmlhcyA9PSBleHBvcnRzLkxFQVNUX1VQUEVSX0JPVU5EKSB7XG4gICAgICByZXR1cm4gbWlkO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYUxvdyA8IDAgPyAtMSA6IGFMb3c7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogVGhpcyBpcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBiaW5hcnkgc2VhcmNoIHdoaWNoIHdpbGwgYWx3YXlzIHRyeSBhbmQgcmV0dXJuXG4gKiB0aGUgaW5kZXggb2YgdGhlIGNsb3Nlc3QgZWxlbWVudCBpZiB0aGVyZSBpcyBubyBleGFjdCBoaXQuIFRoaXMgaXMgYmVjYXVzZVxuICogbWFwcGluZ3MgYmV0d2VlbiBvcmlnaW5hbCBhbmQgZ2VuZXJhdGVkIGxpbmUvY29sIHBhaXJzIGFyZSBzaW5nbGUgcG9pbnRzLFxuICogYW5kIHRoZXJlIGlzIGFuIGltcGxpY2l0IHJlZ2lvbiBiZXR3ZWVuIGVhY2ggb2YgdGhlbSwgc28gYSBtaXNzIGp1c3QgbWVhbnNcbiAqIHRoYXQgeW91IGFyZW4ndCBvbiB0aGUgdmVyeSBzdGFydCBvZiBhIHJlZ2lvbi5cbiAqXG4gKiBAcGFyYW0gYU5lZWRsZSBUaGUgZWxlbWVudCB5b3UgYXJlIGxvb2tpbmcgZm9yLlxuICogQHBhcmFtIGFIYXlzdGFjayBUaGUgYXJyYXkgdGhhdCBpcyBiZWluZyBzZWFyY2hlZC5cbiAqIEBwYXJhbSBhQ29tcGFyZSBBIGZ1bmN0aW9uIHdoaWNoIHRha2VzIHRoZSBuZWVkbGUgYW5kIGFuIGVsZW1lbnQgaW4gdGhlXG4gKiAgICAgYXJyYXkgYW5kIHJldHVybnMgLTEsIDAsIG9yIDEgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIG5lZWRsZSBpcyBsZXNzXG4gKiAgICAgdGhhbiwgZXF1YWwgdG8sIG9yIGdyZWF0ZXIgdGhhbiB0aGUgZWxlbWVudCwgcmVzcGVjdGl2ZWx5LlxuICogQHBhcmFtIGFCaWFzIEVpdGhlciAnYmluYXJ5U2VhcmNoLkdSRUFURVNUX0xPV0VSX0JPVU5EJyBvclxuICogICAgICdiaW5hcnlTZWFyY2guTEVBU1RfVVBQRVJfQk9VTkQnLiBTcGVjaWZpZXMgd2hldGhlciB0byByZXR1cm4gdGhlXG4gKiAgICAgY2xvc2VzdCBlbGVtZW50IHRoYXQgaXMgc21hbGxlciB0aGFuIG9yIGdyZWF0ZXIgdGhhbiB0aGUgb25lIHdlIGFyZVxuICogICAgIHNlYXJjaGluZyBmb3IsIHJlc3BlY3RpdmVseSwgaWYgdGhlIGV4YWN0IGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLlxuICogICAgIERlZmF1bHRzIHRvICdiaW5hcnlTZWFyY2guR1JFQVRFU1RfTE9XRVJfQk9VTkQnLlxuICovXG5leHBvcnRzLnNlYXJjaCA9IGZ1bmN0aW9uIHNlYXJjaChhTmVlZGxlLCBhSGF5c3RhY2ssIGFDb21wYXJlLCBhQmlhcykge1xuICBpZiAoYUhheXN0YWNrLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuXG4gIHZhciBpbmRleCA9IHJlY3Vyc2l2ZVNlYXJjaCgtMSwgYUhheXN0YWNrLmxlbmd0aCwgYU5lZWRsZSwgYUhheXN0YWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYUNvbXBhcmUsIGFCaWFzIHx8IGV4cG9ydHMuR1JFQVRFU1RfTE9XRVJfQk9VTkQpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG5cbiAgLy8gV2UgaGF2ZSBmb3VuZCBlaXRoZXIgdGhlIGV4YWN0IGVsZW1lbnQsIG9yIHRoZSBuZXh0LWNsb3Nlc3QgZWxlbWVudCB0aGFuXG4gIC8vIHRoZSBvbmUgd2UgYXJlIHNlYXJjaGluZyBmb3IuIEhvd2V2ZXIsIHRoZXJlIG1heSBiZSBtb3JlIHRoYW4gb25lIHN1Y2hcbiAgLy8gZWxlbWVudC4gTWFrZSBzdXJlIHdlIGFsd2F5cyByZXR1cm4gdGhlIHNtYWxsZXN0IG9mIHRoZXNlLlxuICB3aGlsZSAoaW5kZXggLSAxID49IDApIHtcbiAgICBpZiAoYUNvbXBhcmUoYUhheXN0YWNrW2luZGV4XSwgYUhheXN0YWNrW2luZGV4IC0gMV0sIHRydWUpICE9PSAwKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLS1pbmRleDtcbiAgfVxuXG4gIHJldHVybiBpbmRleDtcbn07XG4iLCAiLyogLSotIE1vZGU6IGpzOyBqcy1pbmRlbnQtbGV2ZWw6IDI7IC0qLSAqL1xuLypcbiAqIENvcHlyaWdodCAyMDExIE1vemlsbGEgRm91bmRhdGlvbiBhbmQgY29udHJpYnV0b3JzXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBsaWNlbnNlLiBTZWUgTElDRU5TRSBvcjpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9CU0QtMy1DbGF1c2VcbiAqL1xuXG4vLyBJdCB0dXJucyBvdXQgdGhhdCBzb21lIChtb3N0PykgSmF2YVNjcmlwdCBlbmdpbmVzIGRvbid0IHNlbGYtaG9zdFxuLy8gYEFycmF5LnByb3RvdHlwZS5zb3J0YC4gVGhpcyBtYWtlcyBzZW5zZSBiZWNhdXNlIEMrKyB3aWxsIGxpa2VseSByZW1haW5cbi8vIGZhc3RlciB0aGFuIEpTIHdoZW4gZG9pbmcgcmF3IENQVS1pbnRlbnNpdmUgc29ydGluZy4gSG93ZXZlciwgd2hlbiB1c2luZyBhXG4vLyBjdXN0b20gY29tcGFyYXRvciBmdW5jdGlvbiwgY2FsbGluZyBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIHRoZSBWTSdzIEMrKyBhbmRcbi8vIEpJVCdkIEpTIGlzIHJhdGhlciBzbG93ICphbmQqIGxvc2VzIEpJVCB0eXBlIGluZm9ybWF0aW9uLCByZXN1bHRpbmcgaW5cbi8vIHdvcnNlIGdlbmVyYXRlZCBjb2RlIGZvciB0aGUgY29tcGFyYXRvciBmdW5jdGlvbiB0aGFuIHdvdWxkIGJlIG9wdGltYWwuIEluXG4vLyBmYWN0LCB3aGVuIHNvcnRpbmcgd2l0aCBhIGNvbXBhcmF0b3IsIHRoZXNlIGNvc3RzIG91dHdlaWdoIHRoZSBiZW5lZml0cyBvZlxuLy8gc29ydGluZyBpbiBDKysuIEJ5IHVzaW5nIG91ciBvd24gSlMtaW1wbGVtZW50ZWQgUXVpY2sgU29ydCAoYmVsb3cpLCB3ZSBnZXRcbi8vIGEgfjM1MDBtcyBtZWFuIHNwZWVkLXVwIGluIGBiZW5jaC9iZW5jaC5odG1sYC5cblxuLyoqXG4gKiBTd2FwIHRoZSBlbGVtZW50cyBpbmRleGVkIGJ5IGB4YCBhbmQgYHlgIGluIHRoZSBhcnJheSBgYXJ5YC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnlcbiAqICAgICAgICBUaGUgYXJyYXkuXG4gKiBAcGFyYW0ge051bWJlcn0geFxuICogICAgICAgIFRoZSBpbmRleCBvZiB0aGUgZmlyc3QgaXRlbS5cbiAqIEBwYXJhbSB7TnVtYmVyfSB5XG4gKiAgICAgICAgVGhlIGluZGV4IG9mIHRoZSBzZWNvbmQgaXRlbS5cbiAqL1xuZnVuY3Rpb24gc3dhcChhcnksIHgsIHkpIHtcbiAgdmFyIHRlbXAgPSBhcnlbeF07XG4gIGFyeVt4XSA9IGFyeVt5XTtcbiAgYXJ5W3ldID0gdGVtcDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcmFuZG9tIGludGVnZXIgd2l0aGluIHRoZSByYW5nZSBgbG93IC4uIGhpZ2hgIGluY2x1c2l2ZS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gbG93XG4gKiAgICAgICAgVGhlIGxvd2VyIGJvdW5kIG9uIHRoZSByYW5nZS5cbiAqIEBwYXJhbSB7TnVtYmVyfSBoaWdoXG4gKiAgICAgICAgVGhlIHVwcGVyIGJvdW5kIG9uIHRoZSByYW5nZS5cbiAqL1xuZnVuY3Rpb24gcmFuZG9tSW50SW5SYW5nZShsb3csIGhpZ2gpIHtcbiAgcmV0dXJuIE1hdGgucm91bmQobG93ICsgKE1hdGgucmFuZG9tKCkgKiAoaGlnaCAtIGxvdykpKTtcbn1cblxuLyoqXG4gKiBUaGUgUXVpY2sgU29ydCBhbGdvcml0aG0uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYXJ5XG4gKiAgICAgICAgQW4gYXJyYXkgdG8gc29ydC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNvbXBhcmF0b3JcbiAqICAgICAgICBGdW5jdGlvbiB0byB1c2UgdG8gY29tcGFyZSB0d28gaXRlbXMuXG4gKiBAcGFyYW0ge051bWJlcn0gcFxuICogICAgICAgIFN0YXJ0IGluZGV4IG9mIHRoZSBhcnJheVxuICogQHBhcmFtIHtOdW1iZXJ9IHJcbiAqICAgICAgICBFbmQgaW5kZXggb2YgdGhlIGFycmF5XG4gKi9cbmZ1bmN0aW9uIGRvUXVpY2tTb3J0KGFyeSwgY29tcGFyYXRvciwgcCwgcikge1xuICAvLyBJZiBvdXIgbG93ZXIgYm91bmQgaXMgbGVzcyB0aGFuIG91ciB1cHBlciBib3VuZCwgd2UgKDEpIHBhcnRpdGlvbiB0aGVcbiAgLy8gYXJyYXkgaW50byB0d28gcGllY2VzIGFuZCAoMikgcmVjdXJzZSBvbiBlYWNoIGhhbGYuIElmIGl0IGlzIG5vdCwgdGhpcyBpc1xuICAvLyB0aGUgZW1wdHkgYXJyYXkgYW5kIG91ciBiYXNlIGNhc2UuXG5cbiAgaWYgKHAgPCByKSB7XG4gICAgLy8gKDEpIFBhcnRpdGlvbmluZy5cbiAgICAvL1xuICAgIC8vIFRoZSBwYXJ0aXRpb25pbmcgY2hvb3NlcyBhIHBpdm90IGJldHdlZW4gYHBgIGFuZCBgcmAgYW5kIG1vdmVzIGFsbFxuICAgIC8vIGVsZW1lbnRzIHRoYXQgYXJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgcGl2b3QgdG8gdGhlIGJlZm9yZSBpdCwgYW5kXG4gICAgLy8gYWxsIHRoZSBlbGVtZW50cyB0aGF0IGFyZSBncmVhdGVyIHRoYW4gaXQgYWZ0ZXIgaXQuIFRoZSBlZmZlY3QgaXMgdGhhdFxuICAgIC8vIG9uY2UgcGFydGl0aW9uIGlzIGRvbmUsIHRoZSBwaXZvdCBpcyBpbiB0aGUgZXhhY3QgcGxhY2UgaXQgd2lsbCBiZSB3aGVuXG4gICAgLy8gdGhlIGFycmF5IGlzIHB1dCBpbiBzb3J0ZWQgb3JkZXIsIGFuZCBpdCB3aWxsIG5vdCBuZWVkIHRvIGJlIG1vdmVkXG4gICAgLy8gYWdhaW4uIFRoaXMgcnVucyBpbiBPKG4pIHRpbWUuXG5cbiAgICAvLyBBbHdheXMgY2hvb3NlIGEgcmFuZG9tIHBpdm90IHNvIHRoYXQgYW4gaW5wdXQgYXJyYXkgd2hpY2ggaXMgcmV2ZXJzZVxuICAgIC8vIHNvcnRlZCBkb2VzIG5vdCBjYXVzZSBPKG5eMikgcnVubmluZyB0aW1lLlxuICAgIHZhciBwaXZvdEluZGV4ID0gcmFuZG9tSW50SW5SYW5nZShwLCByKTtcbiAgICB2YXIgaSA9IHAgLSAxO1xuXG4gICAgc3dhcChhcnksIHBpdm90SW5kZXgsIHIpO1xuICAgIHZhciBwaXZvdCA9IGFyeVtyXTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IGFmdGVyIGBqYCBpcyBpbmNyZW1lbnRlZCBpbiB0aGlzIGxvb3AsIHRoZSBmb2xsb3dpbmcgaG9sZFxuICAgIC8vIHRydWU6XG4gICAgLy9cbiAgICAvLyAgICogRXZlcnkgZWxlbWVudCBpbiBgYXJ5W3AgLi4gaV1gIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgcGl2b3QuXG4gICAgLy9cbiAgICAvLyAgICogRXZlcnkgZWxlbWVudCBpbiBgYXJ5W2krMSAuLiBqLTFdYCBpcyBncmVhdGVyIHRoYW4gdGhlIHBpdm90LlxuICAgIGZvciAodmFyIGogPSBwOyBqIDwgcjsgaisrKSB7XG4gICAgICBpZiAoY29tcGFyYXRvcihhcnlbal0sIHBpdm90KSA8PSAwKSB7XG4gICAgICAgIGkgKz0gMTtcbiAgICAgICAgc3dhcChhcnksIGksIGopO1xuICAgICAgfVxuICAgIH1cblxuICAgIHN3YXAoYXJ5LCBpICsgMSwgaik7XG4gICAgdmFyIHEgPSBpICsgMTtcblxuICAgIC8vICgyKSBSZWN1cnNlIG9uIGVhY2ggaGFsZi5cblxuICAgIGRvUXVpY2tTb3J0KGFyeSwgY29tcGFyYXRvciwgcCwgcSAtIDEpO1xuICAgIGRvUXVpY2tTb3J0KGFyeSwgY29tcGFyYXRvciwgcSArIDEsIHIpO1xuICB9XG59XG5cbi8qKlxuICogU29ydCB0aGUgZ2l2ZW4gYXJyYXkgaW4tcGxhY2Ugd2l0aCB0aGUgZ2l2ZW4gY29tcGFyYXRvciBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnlcbiAqICAgICAgICBBbiBhcnJheSB0byBzb3J0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY29tcGFyYXRvclxuICogICAgICAgIEZ1bmN0aW9uIHRvIHVzZSB0byBjb21wYXJlIHR3byBpdGVtcy5cbiAqL1xuZXhwb3J0cy5xdWlja1NvcnQgPSBmdW5jdGlvbiAoYXJ5LCBjb21wYXJhdG9yKSB7XG4gIGRvUXVpY2tTb3J0KGFyeSwgY29tcGFyYXRvciwgMCwgYXJ5Lmxlbmd0aCAtIDEpO1xufTtcbiIsICIvKiAtKi0gTW9kZToganM7IGpzLWluZGVudC1sZXZlbDogMjsgLSotICovXG4vKlxuICogQ29weXJpZ2h0IDIwMTEgTW96aWxsYSBGb3VuZGF0aW9uIGFuZCBjb250cmlidXRvcnNcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIGxpY2Vuc2UuIFNlZSBMSUNFTlNFIG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5cbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG52YXIgYmluYXJ5U2VhcmNoID0gcmVxdWlyZSgnLi9iaW5hcnktc2VhcmNoJyk7XG52YXIgQXJyYXlTZXQgPSByZXF1aXJlKCcuL2FycmF5LXNldCcpLkFycmF5U2V0O1xudmFyIGJhc2U2NFZMUSA9IHJlcXVpcmUoJy4vYmFzZTY0LXZscScpO1xudmFyIHF1aWNrU29ydCA9IHJlcXVpcmUoJy4vcXVpY2stc29ydCcpLnF1aWNrU29ydDtcblxuZnVuY3Rpb24gU291cmNlTWFwQ29uc3VtZXIoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICB2YXIgc291cmNlTWFwID0gYVNvdXJjZU1hcDtcbiAgaWYgKHR5cGVvZiBhU291cmNlTWFwID09PSAnc3RyaW5nJykge1xuICAgIHNvdXJjZU1hcCA9IHV0aWwucGFyc2VTb3VyY2VNYXBJbnB1dChhU291cmNlTWFwKTtcbiAgfVxuXG4gIHJldHVybiBzb3VyY2VNYXAuc2VjdGlvbnMgIT0gbnVsbFxuICAgID8gbmV3IEluZGV4ZWRTb3VyY2VNYXBDb25zdW1lcihzb3VyY2VNYXAsIGFTb3VyY2VNYXBVUkwpXG4gICAgOiBuZXcgQmFzaWNTb3VyY2VNYXBDb25zdW1lcihzb3VyY2VNYXAsIGFTb3VyY2VNYXBVUkwpO1xufVxuXG5Tb3VyY2VNYXBDb25zdW1lci5mcm9tU291cmNlTWFwID0gZnVuY3Rpb24oYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICByZXR1cm4gQmFzaWNTb3VyY2VNYXBDb25zdW1lci5mcm9tU291cmNlTWFwKGFTb3VyY2VNYXAsIGFTb3VyY2VNYXBVUkwpO1xufVxuXG4vKipcbiAqIFRoZSB2ZXJzaW9uIG9mIHRoZSBzb3VyY2UgbWFwcGluZyBzcGVjIHRoYXQgd2UgYXJlIGNvbnN1bWluZy5cbiAqL1xuU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl92ZXJzaW9uID0gMztcblxuLy8gYF9fZ2VuZXJhdGVkTWFwcGluZ3NgIGFuZCBgX19vcmlnaW5hbE1hcHBpbmdzYCBhcmUgYXJyYXlzIHRoYXQgaG9sZCB0aGVcbi8vIHBhcnNlZCBtYXBwaW5nIGNvb3JkaW5hdGVzIGZyb20gdGhlIHNvdXJjZSBtYXAncyBcIm1hcHBpbmdzXCIgYXR0cmlidXRlLiBUaGV5XG4vLyBhcmUgbGF6aWx5IGluc3RhbnRpYXRlZCwgYWNjZXNzZWQgdmlhIHRoZSBgX2dlbmVyYXRlZE1hcHBpbmdzYCBhbmRcbi8vIGBfb3JpZ2luYWxNYXBwaW5nc2AgZ2V0dGVycyByZXNwZWN0aXZlbHksIGFuZCB3ZSBvbmx5IHBhcnNlIHRoZSBtYXBwaW5nc1xuLy8gYW5kIGNyZWF0ZSB0aGVzZSBhcnJheXMgb25jZSBxdWVyaWVkIGZvciBhIHNvdXJjZSBsb2NhdGlvbi4gV2UganVtcCB0aHJvdWdoXG4vLyB0aGVzZSBob29wcyBiZWNhdXNlIHRoZXJlIGNhbiBiZSBtYW55IHRob3VzYW5kcyBvZiBtYXBwaW5ncywgYW5kIHBhcnNpbmdcbi8vIHRoZW0gaXMgZXhwZW5zaXZlLCBzbyB3ZSBvbmx5IHdhbnQgdG8gZG8gaXQgaWYgd2UgbXVzdC5cbi8vXG4vLyBFYWNoIG9iamVjdCBpbiB0aGUgYXJyYXlzIGlzIG9mIHRoZSBmb3JtOlxuLy9cbi8vICAgICB7XG4vLyAgICAgICBnZW5lcmF0ZWRMaW5lOiBUaGUgbGluZSBudW1iZXIgaW4gdGhlIGdlbmVyYXRlZCBjb2RlLFxuLy8gICAgICAgZ2VuZXJhdGVkQ29sdW1uOiBUaGUgY29sdW1uIG51bWJlciBpbiB0aGUgZ2VuZXJhdGVkIGNvZGUsXG4vLyAgICAgICBzb3VyY2U6IFRoZSBwYXRoIHRvIHRoZSBvcmlnaW5hbCBzb3VyY2UgZmlsZSB0aGF0IGdlbmVyYXRlZCB0aGlzXG4vLyAgICAgICAgICAgICAgIGNodW5rIG9mIGNvZGUsXG4vLyAgICAgICBvcmlnaW5hbExpbmU6IFRoZSBsaW5lIG51bWJlciBpbiB0aGUgb3JpZ2luYWwgc291cmNlIHRoYXRcbi8vICAgICAgICAgICAgICAgICAgICAgY29ycmVzcG9uZHMgdG8gdGhpcyBjaHVuayBvZiBnZW5lcmF0ZWQgY29kZSxcbi8vICAgICAgIG9yaWdpbmFsQ29sdW1uOiBUaGUgY29sdW1uIG51bWJlciBpbiB0aGUgb3JpZ2luYWwgc291cmNlIHRoYXRcbi8vICAgICAgICAgICAgICAgICAgICAgICBjb3JyZXNwb25kcyB0byB0aGlzIGNodW5rIG9mIGdlbmVyYXRlZCBjb2RlLFxuLy8gICAgICAgbmFtZTogVGhlIG5hbWUgb2YgdGhlIG9yaWdpbmFsIHN5bWJvbCB3aGljaCBnZW5lcmF0ZWQgdGhpcyBjaHVuayBvZlxuLy8gICAgICAgICAgICAgY29kZS5cbi8vICAgICB9XG4vL1xuLy8gQWxsIHByb3BlcnRpZXMgZXhjZXB0IGZvciBgZ2VuZXJhdGVkTGluZWAgYW5kIGBnZW5lcmF0ZWRDb2x1bW5gIGNhbiBiZVxuLy8gYG51bGxgLlxuLy9cbi8vIGBfZ2VuZXJhdGVkTWFwcGluZ3NgIGlzIG9yZGVyZWQgYnkgdGhlIGdlbmVyYXRlZCBwb3NpdGlvbnMuXG4vL1xuLy8gYF9vcmlnaW5hbE1hcHBpbmdzYCBpcyBvcmRlcmVkIGJ5IHRoZSBvcmlnaW5hbCBwb3NpdGlvbnMuXG5cblNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fX2dlbmVyYXRlZE1hcHBpbmdzID0gbnVsbDtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUsICdfZ2VuZXJhdGVkTWFwcGluZ3MnLCB7XG4gIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MpIHtcbiAgICAgIHRoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsIHRoaXMuc291cmNlUm9vdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncztcbiAgfVxufSk7XG5cblNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fX29yaWdpbmFsTWFwcGluZ3MgPSBudWxsO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSwgJ19vcmlnaW5hbE1hcHBpbmdzJywge1xuICBjb25maWd1cmFibGU6IHRydWUsXG4gIGVudW1lcmFibGU6IHRydWUsXG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fX29yaWdpbmFsTWFwcGluZ3MpIHtcbiAgICAgIHRoaXMuX3BhcnNlTWFwcGluZ3ModGhpcy5fbWFwcGluZ3MsIHRoaXMuc291cmNlUm9vdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzO1xuICB9XG59KTtcblxuU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl9jaGFySXNNYXBwaW5nU2VwYXJhdG9yID1cbiAgZnVuY3Rpb24gU291cmNlTWFwQ29uc3VtZXJfY2hhcklzTWFwcGluZ1NlcGFyYXRvcihhU3RyLCBpbmRleCkge1xuICAgIHZhciBjID0gYVN0ci5jaGFyQXQoaW5kZXgpO1xuICAgIHJldHVybiBjID09PSBcIjtcIiB8fCBjID09PSBcIixcIjtcbiAgfTtcblxuLyoqXG4gKiBQYXJzZSB0aGUgbWFwcGluZ3MgaW4gYSBzdHJpbmcgaW4gdG8gYSBkYXRhIHN0cnVjdHVyZSB3aGljaCB3ZSBjYW4gZWFzaWx5XG4gKiBxdWVyeSAodGhlIG9yZGVyZWQgYXJyYXlzIGluIHRoZSBgdGhpcy5fX2dlbmVyYXRlZE1hcHBpbmdzYCBhbmRcbiAqIGB0aGlzLl9fb3JpZ2luYWxNYXBwaW5nc2AgcHJvcGVydGllcykuXG4gKi9cblNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncyA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX3BhcnNlTWFwcGluZ3MoYVN0ciwgYVNvdXJjZVJvb3QpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJTdWJjbGFzc2VzIG11c3QgaW1wbGVtZW50IF9wYXJzZU1hcHBpbmdzXCIpO1xuICB9O1xuXG5Tb3VyY2VNYXBDb25zdW1lci5HRU5FUkFURURfT1JERVIgPSAxO1xuU291cmNlTWFwQ29uc3VtZXIuT1JJR0lOQUxfT1JERVIgPSAyO1xuXG5Tb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORCA9IDE7XG5Tb3VyY2VNYXBDb25zdW1lci5MRUFTVF9VUFBFUl9CT1VORCA9IDI7XG5cbi8qKlxuICogSXRlcmF0ZSBvdmVyIGVhY2ggbWFwcGluZyBiZXR3ZWVuIGFuIG9yaWdpbmFsIHNvdXJjZS9saW5lL2NvbHVtbiBhbmQgYVxuICogZ2VuZXJhdGVkIGxpbmUvY29sdW1uIGluIHRoaXMgc291cmNlIG1hcC5cbiAqXG4gKiBAcGFyYW0gRnVuY3Rpb24gYUNhbGxiYWNrXG4gKiAgICAgICAgVGhlIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdpdGggZWFjaCBtYXBwaW5nLlxuICogQHBhcmFtIE9iamVjdCBhQ29udGV4dFxuICogICAgICAgIE9wdGlvbmFsLiBJZiBzcGVjaWZpZWQsIHRoaXMgb2JqZWN0IHdpbGwgYmUgdGhlIHZhbHVlIG9mIGB0aGlzYCBldmVyeVxuICogICAgICAgIHRpbWUgdGhhdCBgYUNhbGxiYWNrYCBpcyBjYWxsZWQuXG4gKiBAcGFyYW0gYU9yZGVyXG4gKiAgICAgICAgRWl0aGVyIGBTb3VyY2VNYXBDb25zdW1lci5HRU5FUkFURURfT1JERVJgIG9yXG4gKiAgICAgICAgYFNvdXJjZU1hcENvbnN1bWVyLk9SSUdJTkFMX09SREVSYC4gU3BlY2lmaWVzIHdoZXRoZXIgeW91IHdhbnQgdG9cbiAqICAgICAgICBpdGVyYXRlIG92ZXIgdGhlIG1hcHBpbmdzIHNvcnRlZCBieSB0aGUgZ2VuZXJhdGVkIGZpbGUncyBsaW5lL2NvbHVtblxuICogICAgICAgIG9yZGVyIG9yIHRoZSBvcmlnaW5hbCdzIHNvdXJjZS9saW5lL2NvbHVtbiBvcmRlciwgcmVzcGVjdGl2ZWx5LiBEZWZhdWx0cyB0b1xuICogICAgICAgIGBTb3VyY2VNYXBDb25zdW1lci5HRU5FUkFURURfT1JERVJgLlxuICovXG5Tb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuZWFjaE1hcHBpbmcgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9lYWNoTWFwcGluZyhhQ2FsbGJhY2ssIGFDb250ZXh0LCBhT3JkZXIpIHtcbiAgICB2YXIgY29udGV4dCA9IGFDb250ZXh0IHx8IG51bGw7XG4gICAgdmFyIG9yZGVyID0gYU9yZGVyIHx8IFNvdXJjZU1hcENvbnN1bWVyLkdFTkVSQVRFRF9PUkRFUjtcblxuICAgIHZhciBtYXBwaW5ncztcbiAgICBzd2l0Y2ggKG9yZGVyKSB7XG4gICAgY2FzZSBTb3VyY2VNYXBDb25zdW1lci5HRU5FUkFURURfT1JERVI6XG4gICAgICBtYXBwaW5ncyA9IHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBTb3VyY2VNYXBDb25zdW1lci5PUklHSU5BTF9PUkRFUjpcbiAgICAgIG1hcHBpbmdzID0gdGhpcy5fb3JpZ2luYWxNYXBwaW5ncztcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIG9yZGVyIG9mIGl0ZXJhdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZVJvb3QgPSB0aGlzLnNvdXJjZVJvb3Q7XG4gICAgbWFwcGluZ3MubWFwKGZ1bmN0aW9uIChtYXBwaW5nKSB7XG4gICAgICB2YXIgc291cmNlID0gbWFwcGluZy5zb3VyY2UgPT09IG51bGwgPyBudWxsIDogdGhpcy5fc291cmNlcy5hdChtYXBwaW5nLnNvdXJjZSk7XG4gICAgICBzb3VyY2UgPSB1dGlsLmNvbXB1dGVTb3VyY2VVUkwoc291cmNlUm9vdCwgc291cmNlLCB0aGlzLl9zb3VyY2VNYXBVUkwpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgIGdlbmVyYXRlZExpbmU6IG1hcHBpbmcuZ2VuZXJhdGVkTGluZSxcbiAgICAgICAgZ2VuZXJhdGVkQ29sdW1uOiBtYXBwaW5nLmdlbmVyYXRlZENvbHVtbixcbiAgICAgICAgb3JpZ2luYWxMaW5lOiBtYXBwaW5nLm9yaWdpbmFsTGluZSxcbiAgICAgICAgb3JpZ2luYWxDb2x1bW46IG1hcHBpbmcub3JpZ2luYWxDb2x1bW4sXG4gICAgICAgIG5hbWU6IG1hcHBpbmcubmFtZSA9PT0gbnVsbCA/IG51bGwgOiB0aGlzLl9uYW1lcy5hdChtYXBwaW5nLm5hbWUpXG4gICAgICB9O1xuICAgIH0sIHRoaXMpLmZvckVhY2goYUNhbGxiYWNrLCBjb250ZXh0KTtcbiAgfTtcblxuLyoqXG4gKiBSZXR1cm5zIGFsbCBnZW5lcmF0ZWQgbGluZSBhbmQgY29sdW1uIGluZm9ybWF0aW9uIGZvciB0aGUgb3JpZ2luYWwgc291cmNlLFxuICogbGluZSwgYW5kIGNvbHVtbiBwcm92aWRlZC4gSWYgbm8gY29sdW1uIGlzIHByb3ZpZGVkLCByZXR1cm5zIGFsbCBtYXBwaW5nc1xuICogY29ycmVzcG9uZGluZyB0byBhIGVpdGhlciB0aGUgbGluZSB3ZSBhcmUgc2VhcmNoaW5nIGZvciBvciB0aGUgbmV4dFxuICogY2xvc2VzdCBsaW5lIHRoYXQgaGFzIGFueSBtYXBwaW5ncy4gT3RoZXJ3aXNlLCByZXR1cm5zIGFsbCBtYXBwaW5nc1xuICogY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gbGluZSBhbmQgZWl0aGVyIHRoZSBjb2x1bW4gd2UgYXJlIHNlYXJjaGluZyBmb3JcbiAqIG9yIHRoZSBuZXh0IGNsb3Nlc3QgY29sdW1uIHRoYXQgaGFzIGFueSBvZmZzZXRzLlxuICpcbiAqIFRoZSBvbmx5IGFyZ3VtZW50IGlzIGFuIG9iamVjdCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gc291cmNlOiBUaGUgZmlsZW5hbWUgb2YgdGhlIG9yaWdpbmFsIHNvdXJjZS5cbiAqICAgLSBsaW5lOiBUaGUgbGluZSBudW1iZXIgaW4gdGhlIG9yaWdpbmFsIHNvdXJjZS4gIFRoZSBsaW5lIG51bWJlciBpcyAxLWJhc2VkLlxuICogICAtIGNvbHVtbjogT3B0aW9uYWwuIHRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBvcmlnaW5hbCBzb3VyY2UuXG4gKiAgICBUaGUgY29sdW1uIG51bWJlciBpcyAwLWJhc2VkLlxuICpcbiAqIGFuZCBhbiBhcnJheSBvZiBvYmplY3RzIGlzIHJldHVybmVkLCBlYWNoIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBsaW5lOiBUaGUgbGluZSBudW1iZXIgaW4gdGhlIGdlbmVyYXRlZCBzb3VyY2UsIG9yIG51bGwuICBUaGVcbiAqICAgIGxpbmUgbnVtYmVyIGlzIDEtYmFzZWQuXG4gKiAgIC0gY29sdW1uOiBUaGUgY29sdW1uIG51bWJlciBpbiB0aGUgZ2VuZXJhdGVkIHNvdXJjZSwgb3IgbnVsbC5cbiAqICAgIFRoZSBjb2x1bW4gbnVtYmVyIGlzIDAtYmFzZWQuXG4gKi9cblNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5hbGxHZW5lcmF0ZWRQb3NpdGlvbnNGb3IgPVxuICBmdW5jdGlvbiBTb3VyY2VNYXBDb25zdW1lcl9hbGxHZW5lcmF0ZWRQb3NpdGlvbnNGb3IoYUFyZ3MpIHtcbiAgICB2YXIgbGluZSA9IHV0aWwuZ2V0QXJnKGFBcmdzLCAnbGluZScpO1xuXG4gICAgLy8gV2hlbiB0aGVyZSBpcyBubyBleGFjdCBtYXRjaCwgQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuX2ZpbmRNYXBwaW5nXG4gICAgLy8gcmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGNsb3Nlc3QgbWFwcGluZyBsZXNzIHRoYW4gdGhlIG5lZWRsZS4gQnlcbiAgICAvLyBzZXR0aW5nIG5lZWRsZS5vcmlnaW5hbENvbHVtbiB0byAwLCB3ZSB0aHVzIGZpbmQgdGhlIGxhc3QgbWFwcGluZyBmb3JcbiAgICAvLyB0aGUgZ2l2ZW4gbGluZSwgcHJvdmlkZWQgc3VjaCBhIG1hcHBpbmcgZXhpc3RzLlxuICAgIHZhciBuZWVkbGUgPSB7XG4gICAgICBzb3VyY2U6IHV0aWwuZ2V0QXJnKGFBcmdzLCAnc291cmNlJyksXG4gICAgICBvcmlnaW5hbExpbmU6IGxpbmUsXG4gICAgICBvcmlnaW5hbENvbHVtbjogdXRpbC5nZXRBcmcoYUFyZ3MsICdjb2x1bW4nLCAwKVxuICAgIH07XG5cbiAgICBuZWVkbGUuc291cmNlID0gdGhpcy5fZmluZFNvdXJjZUluZGV4KG5lZWRsZS5zb3VyY2UpO1xuICAgIGlmIChuZWVkbGUuc291cmNlIDwgMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBtYXBwaW5ncyA9IFtdO1xuXG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZE1hcHBpbmcobmVlZGxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJvcmlnaW5hbExpbmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIm9yaWdpbmFsQ29sdW1uXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRpbC5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5hcnlTZWFyY2guTEVBU1RfVVBQRVJfQk9VTkQpO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICB2YXIgbWFwcGluZyA9IHRoaXMuX29yaWdpbmFsTWFwcGluZ3NbaW5kZXhdO1xuXG4gICAgICBpZiAoYUFyZ3MuY29sdW1uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFyIG9yaWdpbmFsTGluZSA9IG1hcHBpbmcub3JpZ2luYWxMaW5lO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdW50aWwgZWl0aGVyIHdlIHJ1biBvdXQgb2YgbWFwcGluZ3MsIG9yIHdlIHJ1biBpbnRvXG4gICAgICAgIC8vIGEgbWFwcGluZyBmb3IgYSBkaWZmZXJlbnQgbGluZSB0aGFuIHRoZSBvbmUgd2UgZm91bmQuIFNpbmNlXG4gICAgICAgIC8vIG1hcHBpbmdzIGFyZSBzb3J0ZWQsIHRoaXMgaXMgZ3VhcmFudGVlZCB0byBmaW5kIGFsbCBtYXBwaW5ncyBmb3JcbiAgICAgICAgLy8gdGhlIGxpbmUgd2UgZm91bmQuXG4gICAgICAgIHdoaWxlIChtYXBwaW5nICYmIG1hcHBpbmcub3JpZ2luYWxMaW5lID09PSBvcmlnaW5hbExpbmUpIHtcbiAgICAgICAgICBtYXBwaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIGxpbmU6IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdnZW5lcmF0ZWRMaW5lJywgbnVsbCksXG4gICAgICAgICAgICBjb2x1bW46IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdnZW5lcmF0ZWRDb2x1bW4nLCBudWxsKSxcbiAgICAgICAgICAgIGxhc3RDb2x1bW46IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdsYXN0R2VuZXJhdGVkQ29sdW1uJywgbnVsbClcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzWysraW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgb3JpZ2luYWxDb2x1bW4gPSBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uO1xuXG4gICAgICAgIC8vIEl0ZXJhdGUgdW50aWwgZWl0aGVyIHdlIHJ1biBvdXQgb2YgbWFwcGluZ3MsIG9yIHdlIHJ1biBpbnRvXG4gICAgICAgIC8vIGEgbWFwcGluZyBmb3IgYSBkaWZmZXJlbnQgbGluZSB0aGFuIHRoZSBvbmUgd2Ugd2VyZSBzZWFyY2hpbmcgZm9yLlxuICAgICAgICAvLyBTaW5jZSBtYXBwaW5ncyBhcmUgc29ydGVkLCB0aGlzIGlzIGd1YXJhbnRlZWQgdG8gZmluZCBhbGwgbWFwcGluZ3MgZm9yXG4gICAgICAgIC8vIHRoZSBsaW5lIHdlIGFyZSBzZWFyY2hpbmcgZm9yLlxuICAgICAgICB3aGlsZSAobWFwcGluZyAmJlxuICAgICAgICAgICAgICAgbWFwcGluZy5vcmlnaW5hbExpbmUgPT09IGxpbmUgJiZcbiAgICAgICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxDb2x1bW4gPT0gb3JpZ2luYWxDb2x1bW4pIHtcbiAgICAgICAgICBtYXBwaW5ncy5wdXNoKHtcbiAgICAgICAgICAgIGxpbmU6IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdnZW5lcmF0ZWRMaW5lJywgbnVsbCksXG4gICAgICAgICAgICBjb2x1bW46IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdnZW5lcmF0ZWRDb2x1bW4nLCBudWxsKSxcbiAgICAgICAgICAgIGxhc3RDb2x1bW46IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdsYXN0R2VuZXJhdGVkQ29sdW1uJywgbnVsbClcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzWysraW5kZXhdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcHBpbmdzO1xuICB9O1xuXG5leHBvcnRzLlNvdXJjZU1hcENvbnN1bWVyID0gU291cmNlTWFwQ29uc3VtZXI7XG5cbi8qKlxuICogQSBCYXNpY1NvdXJjZU1hcENvbnN1bWVyIGluc3RhbmNlIHJlcHJlc2VudHMgYSBwYXJzZWQgc291cmNlIG1hcCB3aGljaCB3ZSBjYW5cbiAqIHF1ZXJ5IGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgb3JpZ2luYWwgZmlsZSBwb3NpdGlvbnMgYnkgZ2l2aW5nIGl0IGEgZmlsZVxuICogcG9zaXRpb24gaW4gdGhlIGdlbmVyYXRlZCBzb3VyY2UuXG4gKlxuICogVGhlIGZpcnN0IHBhcmFtZXRlciBpcyB0aGUgcmF3IHNvdXJjZSBtYXAgKGVpdGhlciBhcyBhIEpTT04gc3RyaW5nLCBvclxuICogYWxyZWFkeSBwYXJzZWQgdG8gYW4gb2JqZWN0KS4gQWNjb3JkaW5nIHRvIHRoZSBzcGVjLCBzb3VyY2UgbWFwcyBoYXZlIHRoZVxuICogZm9sbG93aW5nIGF0dHJpYnV0ZXM6XG4gKlxuICogICAtIHZlcnNpb246IFdoaWNoIHZlcnNpb24gb2YgdGhlIHNvdXJjZSBtYXAgc3BlYyB0aGlzIG1hcCBpcyBmb2xsb3dpbmcuXG4gKiAgIC0gc291cmNlczogQW4gYXJyYXkgb2YgVVJMcyB0byB0aGUgb3JpZ2luYWwgc291cmNlIGZpbGVzLlxuICogICAtIG5hbWVzOiBBbiBhcnJheSBvZiBpZGVudGlmaWVycyB3aGljaCBjYW4gYmUgcmVmZXJyZW5jZWQgYnkgaW5kaXZpZHVhbCBtYXBwaW5ncy5cbiAqICAgLSBzb3VyY2VSb290OiBPcHRpb25hbC4gVGhlIFVSTCByb290IGZyb20gd2hpY2ggYWxsIHNvdXJjZXMgYXJlIHJlbGF0aXZlLlxuICogICAtIHNvdXJjZXNDb250ZW50OiBPcHRpb25hbC4gQW4gYXJyYXkgb2YgY29udGVudHMgb2YgdGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlcy5cbiAqICAgLSBtYXBwaW5nczogQSBzdHJpbmcgb2YgYmFzZTY0IFZMUXMgd2hpY2ggY29udGFpbiB0aGUgYWN0dWFsIG1hcHBpbmdzLlxuICogICAtIGZpbGU6IE9wdGlvbmFsLiBUaGUgZ2VuZXJhdGVkIGZpbGUgdGhpcyBzb3VyY2UgbWFwIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgc291cmNlIG1hcCwgdGFrZW4gZnJvbSB0aGUgc291cmNlIG1hcCBzcGVjWzBdOlxuICpcbiAqICAgICB7XG4gKiAgICAgICB2ZXJzaW9uIDogMyxcbiAqICAgICAgIGZpbGU6IFwib3V0LmpzXCIsXG4gKiAgICAgICBzb3VyY2VSb290IDogXCJcIixcbiAqICAgICAgIHNvdXJjZXM6IFtcImZvby5qc1wiLCBcImJhci5qc1wiXSxcbiAqICAgICAgIG5hbWVzOiBbXCJzcmNcIiwgXCJtYXBzXCIsIFwiYXJlXCIsIFwiZnVuXCJdLFxuICogICAgICAgbWFwcGluZ3M6IFwiQUEsQUI7O0FCQ0RFO1wiXG4gKiAgICAgfVxuICpcbiAqIFRoZSBzZWNvbmQgcGFyYW1ldGVyLCBpZiBnaXZlbiwgaXMgYSBzdHJpbmcgd2hvc2UgdmFsdWUgaXMgdGhlIFVSTFxuICogYXQgd2hpY2ggdGhlIHNvdXJjZSBtYXAgd2FzIGZvdW5kLiAgVGhpcyBVUkwgaXMgdXNlZCB0byBjb21wdXRlIHRoZVxuICogc291cmNlcyBhcnJheS5cbiAqXG4gKiBbMF06IGh0dHBzOi8vZG9jcy5nb29nbGUuY29tL2RvY3VtZW50L2QvMVUxUkdBZWhRd1J5cFVUb3ZGMUtSbHBpT0Z6ZTBiLV8yZ2M2ZkFIMEtZMGsvZWRpdD9wbGk9MSNcbiAqL1xuZnVuY3Rpb24gQmFzaWNTb3VyY2VNYXBDb25zdW1lcihhU291cmNlTWFwLCBhU291cmNlTWFwVVJMKSB7XG4gIHZhciBzb3VyY2VNYXAgPSBhU291cmNlTWFwO1xuICBpZiAodHlwZW9mIGFTb3VyY2VNYXAgPT09ICdzdHJpbmcnKSB7XG4gICAgc291cmNlTWFwID0gdXRpbC5wYXJzZVNvdXJjZU1hcElucHV0KGFTb3VyY2VNYXApO1xuICB9XG5cbiAgdmFyIHZlcnNpb24gPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICd2ZXJzaW9uJyk7XG4gIHZhciBzb3VyY2VzID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnc291cmNlcycpO1xuICAvLyBTYXNzIDMuMyBsZWF2ZXMgb3V0IHRoZSAnbmFtZXMnIGFycmF5LCBzbyB3ZSBkZXZpYXRlIGZyb20gdGhlIHNwZWMgKHdoaWNoXG4gIC8vIHJlcXVpcmVzIHRoZSBhcnJheSkgdG8gcGxheSBuaWNlIGhlcmUuXG4gIHZhciBuYW1lcyA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ25hbWVzJywgW10pO1xuICB2YXIgc291cmNlUm9vdCA9IHV0aWwuZ2V0QXJnKHNvdXJjZU1hcCwgJ3NvdXJjZVJvb3QnLCBudWxsKTtcbiAgdmFyIHNvdXJjZXNDb250ZW50ID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnc291cmNlc0NvbnRlbnQnLCBudWxsKTtcbiAgdmFyIG1hcHBpbmdzID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAnbWFwcGluZ3MnKTtcbiAgdmFyIGZpbGUgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICdmaWxlJywgbnVsbCk7XG5cbiAgLy8gT25jZSBhZ2FpbiwgU2FzcyBkZXZpYXRlcyBmcm9tIHRoZSBzcGVjIGFuZCBzdXBwbGllcyB0aGUgdmVyc2lvbiBhcyBhXG4gIC8vIHN0cmluZyByYXRoZXIgdGhhbiBhIG51bWJlciwgc28gd2UgdXNlIGxvb3NlIGVxdWFsaXR5IGNoZWNraW5nIGhlcmUuXG4gIGlmICh2ZXJzaW9uICE9IHRoaXMuX3ZlcnNpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHZlcnNpb246ICcgKyB2ZXJzaW9uKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VSb290KSB7XG4gICAgc291cmNlUm9vdCA9IHV0aWwubm9ybWFsaXplKHNvdXJjZVJvb3QpO1xuICB9XG5cbiAgc291cmNlcyA9IHNvdXJjZXNcbiAgICAubWFwKFN0cmluZylcbiAgICAvLyBTb21lIHNvdXJjZSBtYXBzIHByb2R1Y2UgcmVsYXRpdmUgc291cmNlIHBhdGhzIGxpa2UgXCIuL2Zvby5qc1wiIGluc3RlYWQgb2ZcbiAgICAvLyBcImZvby5qc1wiLiAgTm9ybWFsaXplIHRoZXNlIGZpcnN0IHNvIHRoYXQgZnV0dXJlIGNvbXBhcmlzb25zIHdpbGwgc3VjY2VlZC5cbiAgICAvLyBTZWUgYnVnemlsLmxhLzEwOTA3NjguXG4gICAgLm1hcCh1dGlsLm5vcm1hbGl6ZSlcbiAgICAvLyBBbHdheXMgZW5zdXJlIHRoYXQgYWJzb2x1dGUgc291cmNlcyBhcmUgaW50ZXJuYWxseSBzdG9yZWQgcmVsYXRpdmUgdG9cbiAgICAvLyB0aGUgc291cmNlIHJvb3QsIGlmIHRoZSBzb3VyY2Ugcm9vdCBpcyBhYnNvbHV0ZS4gTm90IGRvaW5nIHRoaXMgd291bGRcbiAgICAvLyBiZSBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMgd2hlbiB0aGUgc291cmNlIHJvb3QgaXMgYSBwcmVmaXggb2YgdGhlXG4gICAgLy8gc291cmNlICh2YWxpZCwgYnV0IHdoeT8/KS4gU2VlIGdpdGh1YiBpc3N1ZSAjMTk5IGFuZCBidWd6aWwubGEvMTE4ODk4Mi5cbiAgICAubWFwKGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBzb3VyY2VSb290ICYmIHV0aWwuaXNBYnNvbHV0ZShzb3VyY2VSb290KSAmJiB1dGlsLmlzQWJzb2x1dGUoc291cmNlKVxuICAgICAgICA/IHV0aWwucmVsYXRpdmUoc291cmNlUm9vdCwgc291cmNlKVxuICAgICAgICA6IHNvdXJjZTtcbiAgICB9KTtcblxuICAvLyBQYXNzIGB0cnVlYCBiZWxvdyB0byBhbGxvdyBkdXBsaWNhdGUgbmFtZXMgYW5kIHNvdXJjZXMuIFdoaWxlIHNvdXJjZSBtYXBzXG4gIC8vIGFyZSBpbnRlbmRlZCB0byBiZSBjb21wcmVzc2VkIGFuZCBkZWR1cGxpY2F0ZWQsIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyXG4gIC8vIHNvbWV0aW1lcyBnZW5lcmF0ZXMgc291cmNlIG1hcHMgd2l0aCBkdXBsaWNhdGVzIGluIHRoZW0uIFNlZSBHaXRodWIgaXNzdWVcbiAgLy8gIzcyIGFuZCBidWd6aWwubGEvODg5NDkyLlxuICB0aGlzLl9uYW1lcyA9IEFycmF5U2V0LmZyb21BcnJheShuYW1lcy5tYXAoU3RyaW5nKSwgdHJ1ZSk7XG4gIHRoaXMuX3NvdXJjZXMgPSBBcnJheVNldC5mcm9tQXJyYXkoc291cmNlcywgdHJ1ZSk7XG5cbiAgdGhpcy5fYWJzb2x1dGVTb3VyY2VzID0gdGhpcy5fc291cmNlcy50b0FycmF5KCkubWFwKGZ1bmN0aW9uIChzKSB7XG4gICAgcmV0dXJuIHV0aWwuY29tcHV0ZVNvdXJjZVVSTChzb3VyY2VSb290LCBzLCBhU291cmNlTWFwVVJMKTtcbiAgfSk7XG5cbiAgdGhpcy5zb3VyY2VSb290ID0gc291cmNlUm9vdDtcbiAgdGhpcy5zb3VyY2VzQ29udGVudCA9IHNvdXJjZXNDb250ZW50O1xuICB0aGlzLl9tYXBwaW5ncyA9IG1hcHBpbmdzO1xuICB0aGlzLl9zb3VyY2VNYXBVUkwgPSBhU291cmNlTWFwVVJMO1xuICB0aGlzLmZpbGUgPSBmaWxlO1xufVxuXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlKTtcbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLmNvbnN1bWVyID0gU291cmNlTWFwQ29uc3VtZXI7XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiB0byBmaW5kIHRoZSBpbmRleCBvZiBhIHNvdXJjZS4gIFJldHVybnMgLTEgaWYgbm90XG4gKiBmb3VuZC5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuX2ZpbmRTb3VyY2VJbmRleCA9IGZ1bmN0aW9uKGFTb3VyY2UpIHtcbiAgdmFyIHJlbGF0aXZlU291cmNlID0gYVNvdXJjZTtcbiAgaWYgKHRoaXMuc291cmNlUm9vdCAhPSBudWxsKSB7XG4gICAgcmVsYXRpdmVTb3VyY2UgPSB1dGlsLnJlbGF0aXZlKHRoaXMuc291cmNlUm9vdCwgcmVsYXRpdmVTb3VyY2UpO1xuICB9XG5cbiAgaWYgKHRoaXMuX3NvdXJjZXMuaGFzKHJlbGF0aXZlU291cmNlKSkge1xuICAgIHJldHVybiB0aGlzLl9zb3VyY2VzLmluZGV4T2YocmVsYXRpdmVTb3VyY2UpO1xuICB9XG5cbiAgLy8gTWF5YmUgYVNvdXJjZSBpcyBhbiBhYnNvbHV0ZSBVUkwgYXMgcmV0dXJuZWQgYnkgfHNvdXJjZXN8LiAgSW5cbiAgLy8gdGhpcyBjYXNlIHdlIGNhbid0IHNpbXBseSB1bmRvIHRoZSB0cmFuc2Zvcm0uXG4gIHZhciBpO1xuICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5fYWJzb2x1dGVTb3VyY2VzLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHRoaXMuX2Fic29sdXRlU291cmNlc1tpXSA9PSBhU291cmNlKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIEJhc2ljU291cmNlTWFwQ29uc3VtZXIgZnJvbSBhIFNvdXJjZU1hcEdlbmVyYXRvci5cbiAqXG4gKiBAcGFyYW0gU291cmNlTWFwR2VuZXJhdG9yIGFTb3VyY2VNYXBcbiAqICAgICAgICBUaGUgc291cmNlIG1hcCB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG4gKiBAcGFyYW0gU3RyaW5nIGFTb3VyY2VNYXBVUkxcbiAqICAgICAgICBUaGUgVVJMIGF0IHdoaWNoIHRoZSBzb3VyY2UgbWFwIGNhbiBiZSBmb3VuZCAob3B0aW9uYWwpXG4gKiBAcmV0dXJucyBCYXNpY1NvdXJjZU1hcENvbnN1bWVyXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIuZnJvbVNvdXJjZU1hcCA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX2Zyb21Tb3VyY2VNYXAoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICAgIHZhciBzbWMgPSBPYmplY3QuY3JlYXRlKEJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlKTtcblxuICAgIHZhciBuYW1lcyA9IHNtYy5fbmFtZXMgPSBBcnJheVNldC5mcm9tQXJyYXkoYVNvdXJjZU1hcC5fbmFtZXMudG9BcnJheSgpLCB0cnVlKTtcbiAgICB2YXIgc291cmNlcyA9IHNtYy5fc291cmNlcyA9IEFycmF5U2V0LmZyb21BcnJheShhU291cmNlTWFwLl9zb3VyY2VzLnRvQXJyYXkoKSwgdHJ1ZSk7XG4gICAgc21jLnNvdXJjZVJvb3QgPSBhU291cmNlTWFwLl9zb3VyY2VSb290O1xuICAgIHNtYy5zb3VyY2VzQ29udGVudCA9IGFTb3VyY2VNYXAuX2dlbmVyYXRlU291cmNlc0NvbnRlbnQoc21jLl9zb3VyY2VzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNtYy5zb3VyY2VSb290KTtcbiAgICBzbWMuZmlsZSA9IGFTb3VyY2VNYXAuX2ZpbGU7XG4gICAgc21jLl9zb3VyY2VNYXBVUkwgPSBhU291cmNlTWFwVVJMO1xuICAgIHNtYy5fYWJzb2x1dGVTb3VyY2VzID0gc21jLl9zb3VyY2VzLnRvQXJyYXkoKS5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICAgIHJldHVybiB1dGlsLmNvbXB1dGVTb3VyY2VVUkwoc21jLnNvdXJjZVJvb3QsIHMsIGFTb3VyY2VNYXBVUkwpO1xuICAgIH0pO1xuXG4gICAgLy8gQmVjYXVzZSB3ZSBhcmUgbW9kaWZ5aW5nIHRoZSBlbnRyaWVzIChieSBjb252ZXJ0aW5nIHN0cmluZyBzb3VyY2VzIGFuZFxuICAgIC8vIG5hbWVzIHRvIGluZGljZXMgaW50byB0aGUgc291cmNlcyBhbmQgbmFtZXMgQXJyYXlTZXRzKSwgd2UgaGF2ZSB0byBtYWtlXG4gICAgLy8gYSBjb3B5IG9mIHRoZSBlbnRyeSBvciBlbHNlIGJhZCB0aGluZ3MgaGFwcGVuLiBTaGFyZWQgbXV0YWJsZSBzdGF0ZVxuICAgIC8vIHN0cmlrZXMgYWdhaW4hIFNlZSBnaXRodWIgaXNzdWUgIzE5MS5cblxuICAgIHZhciBnZW5lcmF0ZWRNYXBwaW5ncyA9IGFTb3VyY2VNYXAuX21hcHBpbmdzLnRvQXJyYXkoKS5zbGljZSgpO1xuICAgIHZhciBkZXN0R2VuZXJhdGVkTWFwcGluZ3MgPSBzbWMuX19nZW5lcmF0ZWRNYXBwaW5ncyA9IFtdO1xuICAgIHZhciBkZXN0T3JpZ2luYWxNYXBwaW5ncyA9IHNtYy5fX29yaWdpbmFsTWFwcGluZ3MgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNyY01hcHBpbmcgPSBnZW5lcmF0ZWRNYXBwaW5nc1tpXTtcbiAgICAgIHZhciBkZXN0TWFwcGluZyA9IG5ldyBNYXBwaW5nO1xuICAgICAgZGVzdE1hcHBpbmcuZ2VuZXJhdGVkTGluZSA9IHNyY01hcHBpbmcuZ2VuZXJhdGVkTGluZTtcbiAgICAgIGRlc3RNYXBwaW5nLmdlbmVyYXRlZENvbHVtbiA9IHNyY01hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uO1xuXG4gICAgICBpZiAoc3JjTWFwcGluZy5zb3VyY2UpIHtcbiAgICAgICAgZGVzdE1hcHBpbmcuc291cmNlID0gc291cmNlcy5pbmRleE9mKHNyY01hcHBpbmcuc291cmNlKTtcbiAgICAgICAgZGVzdE1hcHBpbmcub3JpZ2luYWxMaW5lID0gc3JjTWFwcGluZy5vcmlnaW5hbExpbmU7XG4gICAgICAgIGRlc3RNYXBwaW5nLm9yaWdpbmFsQ29sdW1uID0gc3JjTWFwcGluZy5vcmlnaW5hbENvbHVtbjtcblxuICAgICAgICBpZiAoc3JjTWFwcGluZy5uYW1lKSB7XG4gICAgICAgICAgZGVzdE1hcHBpbmcubmFtZSA9IG5hbWVzLmluZGV4T2Yoc3JjTWFwcGluZy5uYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGRlc3RPcmlnaW5hbE1hcHBpbmdzLnB1c2goZGVzdE1hcHBpbmcpO1xuICAgICAgfVxuXG4gICAgICBkZXN0R2VuZXJhdGVkTWFwcGluZ3MucHVzaChkZXN0TWFwcGluZyk7XG4gICAgfVxuXG4gICAgcXVpY2tTb3J0KHNtYy5fX29yaWdpbmFsTWFwcGluZ3MsIHV0aWwuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO1xuXG4gICAgcmV0dXJuIHNtYztcbiAgfTtcblxuLyoqXG4gKiBUaGUgdmVyc2lvbiBvZiB0aGUgc291cmNlIG1hcHBpbmcgc3BlYyB0aGF0IHdlIGFyZSBjb25zdW1pbmcuXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl92ZXJzaW9uID0gMztcblxuLyoqXG4gKiBUaGUgbGlzdCBvZiBvcmlnaW5hbCBzb3VyY2VzLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUsICdzb3VyY2VzJywge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fYWJzb2x1dGVTb3VyY2VzLnNsaWNlKCk7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFByb3ZpZGUgdGhlIEpJVCB3aXRoIGEgbmljZSBzaGFwZSAvIGhpZGRlbiBjbGFzcy5cbiAqL1xuZnVuY3Rpb24gTWFwcGluZygpIHtcbiAgdGhpcy5nZW5lcmF0ZWRMaW5lID0gMDtcbiAgdGhpcy5nZW5lcmF0ZWRDb2x1bW4gPSAwO1xuICB0aGlzLnNvdXJjZSA9IG51bGw7XG4gIHRoaXMub3JpZ2luYWxMaW5lID0gbnVsbDtcbiAgdGhpcy5vcmlnaW5hbENvbHVtbiA9IG51bGw7XG4gIHRoaXMubmFtZSA9IG51bGw7XG59XG5cbi8qKlxuICogUGFyc2UgdGhlIG1hcHBpbmdzIGluIGEgc3RyaW5nIGluIHRvIGEgZGF0YSBzdHJ1Y3R1cmUgd2hpY2ggd2UgY2FuIGVhc2lseVxuICogcXVlcnkgKHRoZSBvcmRlcmVkIGFycmF5cyBpbiB0aGUgYHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5nc2AgYW5kXG4gKiBgdGhpcy5fX29yaWdpbmFsTWFwcGluZ3NgIHByb3BlcnRpZXMpLlxuICovXG5CYXNpY1NvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZS5fcGFyc2VNYXBwaW5ncyA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX3BhcnNlTWFwcGluZ3MoYVN0ciwgYVNvdXJjZVJvb3QpIHtcbiAgICB2YXIgZ2VuZXJhdGVkTGluZSA9IDE7XG4gICAgdmFyIHByZXZpb3VzR2VuZXJhdGVkQ29sdW1uID0gMDtcbiAgICB2YXIgcHJldmlvdXNPcmlnaW5hbExpbmUgPSAwO1xuICAgIHZhciBwcmV2aW91c09yaWdpbmFsQ29sdW1uID0gMDtcbiAgICB2YXIgcHJldmlvdXNTb3VyY2UgPSAwO1xuICAgIHZhciBwcmV2aW91c05hbWUgPSAwO1xuICAgIHZhciBsZW5ndGggPSBhU3RyLmxlbmd0aDtcbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBjYWNoZWRTZWdtZW50cyA9IHt9O1xuICAgIHZhciB0ZW1wID0ge307XG4gICAgdmFyIG9yaWdpbmFsTWFwcGluZ3MgPSBbXTtcbiAgICB2YXIgZ2VuZXJhdGVkTWFwcGluZ3MgPSBbXTtcbiAgICB2YXIgbWFwcGluZywgc3RyLCBzZWdtZW50LCBlbmQsIHZhbHVlO1xuXG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICBpZiAoYVN0ci5jaGFyQXQoaW5kZXgpID09PSAnOycpIHtcbiAgICAgICAgZ2VuZXJhdGVkTGluZSsrO1xuICAgICAgICBpbmRleCsrO1xuICAgICAgICBwcmV2aW91c0dlbmVyYXRlZENvbHVtbiA9IDA7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChhU3RyLmNoYXJBdChpbmRleCkgPT09ICcsJykge1xuICAgICAgICBpbmRleCsrO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIG1hcHBpbmcgPSBuZXcgTWFwcGluZygpO1xuICAgICAgICBtYXBwaW5nLmdlbmVyYXRlZExpbmUgPSBnZW5lcmF0ZWRMaW5lO1xuXG4gICAgICAgIC8vIEJlY2F1c2UgZWFjaCBvZmZzZXQgaXMgZW5jb2RlZCByZWxhdGl2ZSB0byB0aGUgcHJldmlvdXMgb25lLFxuICAgICAgICAvLyBtYW55IHNlZ21lbnRzIG9mdGVuIGhhdmUgdGhlIHNhbWUgZW5jb2RpbmcuIFdlIGNhbiBleHBsb2l0IHRoaXNcbiAgICAgICAgLy8gZmFjdCBieSBjYWNoaW5nIHRoZSBwYXJzZWQgdmFyaWFibGUgbGVuZ3RoIGZpZWxkcyBvZiBlYWNoIHNlZ21lbnQsXG4gICAgICAgIC8vIGFsbG93aW5nIHVzIHRvIGF2b2lkIGEgc2Vjb25kIHBhcnNlIGlmIHdlIGVuY291bnRlciB0aGUgc2FtZVxuICAgICAgICAvLyBzZWdtZW50IGFnYWluLlxuICAgICAgICBmb3IgKGVuZCA9IGluZGV4OyBlbmQgPCBsZW5ndGg7IGVuZCsrKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX2NoYXJJc01hcHBpbmdTZXBhcmF0b3IoYVN0ciwgZW5kKSkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHN0ciA9IGFTdHIuc2xpY2UoaW5kZXgsIGVuZCk7XG5cbiAgICAgICAgc2VnbWVudCA9IGNhY2hlZFNlZ21lbnRzW3N0cl07XG4gICAgICAgIGlmIChzZWdtZW50KSB7XG4gICAgICAgICAgaW5kZXggKz0gc3RyLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZWdtZW50ID0gW107XG4gICAgICAgICAgd2hpbGUgKGluZGV4IDwgZW5kKSB7XG4gICAgICAgICAgICBiYXNlNjRWTFEuZGVjb2RlKGFTdHIsIGluZGV4LCB0ZW1wKTtcbiAgICAgICAgICAgIHZhbHVlID0gdGVtcC52YWx1ZTtcbiAgICAgICAgICAgIGluZGV4ID0gdGVtcC5yZXN0O1xuICAgICAgICAgICAgc2VnbWVudC5wdXNoKHZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgYSBzb3VyY2UsIGJ1dCBubyBsaW5lIGFuZCBjb2x1bW4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc2VnbWVudC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgYSBzb3VyY2UgYW5kIGxpbmUsIGJ1dCBubyBjb2x1bW4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjYWNoZWRTZWdtZW50c1tzdHJdID0gc2VnbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlZCBjb2x1bW4uXG4gICAgICAgIG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uID0gcHJldmlvdXNHZW5lcmF0ZWRDb2x1bW4gKyBzZWdtZW50WzBdO1xuICAgICAgICBwcmV2aW91c0dlbmVyYXRlZENvbHVtbiA9IG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uO1xuXG4gICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAvLyBPcmlnaW5hbCBzb3VyY2UuXG4gICAgICAgICAgbWFwcGluZy5zb3VyY2UgPSBwcmV2aW91c1NvdXJjZSArIHNlZ21lbnRbMV07XG4gICAgICAgICAgcHJldmlvdXNTb3VyY2UgKz0gc2VnbWVudFsxXTtcblxuICAgICAgICAgIC8vIE9yaWdpbmFsIGxpbmUuXG4gICAgICAgICAgbWFwcGluZy5vcmlnaW5hbExpbmUgPSBwcmV2aW91c09yaWdpbmFsTGluZSArIHNlZ21lbnRbMl07XG4gICAgICAgICAgcHJldmlvdXNPcmlnaW5hbExpbmUgPSBtYXBwaW5nLm9yaWdpbmFsTGluZTtcbiAgICAgICAgICAvLyBMaW5lcyBhcmUgc3RvcmVkIDAtYmFzZWRcbiAgICAgICAgICBtYXBwaW5nLm9yaWdpbmFsTGluZSArPSAxO1xuXG4gICAgICAgICAgLy8gT3JpZ2luYWwgY29sdW1uLlxuICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxDb2x1bW4gPSBwcmV2aW91c09yaWdpbmFsQ29sdW1uICsgc2VnbWVudFszXTtcbiAgICAgICAgICBwcmV2aW91c09yaWdpbmFsQ29sdW1uID0gbWFwcGluZy5vcmlnaW5hbENvbHVtbjtcblxuICAgICAgICAgIGlmIChzZWdtZW50Lmxlbmd0aCA+IDQpIHtcbiAgICAgICAgICAgIC8vIE9yaWdpbmFsIG5hbWUuXG4gICAgICAgICAgICBtYXBwaW5nLm5hbWUgPSBwcmV2aW91c05hbWUgKyBzZWdtZW50WzRdO1xuICAgICAgICAgICAgcHJldmlvdXNOYW1lICs9IHNlZ21lbnRbNF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZ2VuZXJhdGVkTWFwcGluZ3MucHVzaChtYXBwaW5nKTtcbiAgICAgICAgaWYgKHR5cGVvZiBtYXBwaW5nLm9yaWdpbmFsTGluZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICBvcmlnaW5hbE1hcHBpbmdzLnB1c2gobWFwcGluZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBxdWlja1NvcnQoZ2VuZXJhdGVkTWFwcGluZ3MsIHV0aWwuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zRGVmbGF0ZWQpO1xuICAgIHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncyA9IGdlbmVyYXRlZE1hcHBpbmdzO1xuXG4gICAgcXVpY2tTb3J0KG9yaWdpbmFsTWFwcGluZ3MsIHV0aWwuY29tcGFyZUJ5T3JpZ2luYWxQb3NpdGlvbnMpO1xuICAgIHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzID0gb3JpZ2luYWxNYXBwaW5ncztcbiAgfTtcblxuLyoqXG4gKiBGaW5kIHRoZSBtYXBwaW5nIHRoYXQgYmVzdCBtYXRjaGVzIHRoZSBoeXBvdGhldGljYWwgXCJuZWVkbGVcIiBtYXBwaW5nIHRoYXRcbiAqIHdlIGFyZSBzZWFyY2hpbmcgZm9yIGluIHRoZSBnaXZlbiBcImhheXN0YWNrXCIgb2YgbWFwcGluZ3MuXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl9maW5kTWFwcGluZyA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX2ZpbmRNYXBwaW5nKGFOZWVkbGUsIGFNYXBwaW5ncywgYUxpbmVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhQ29sdW1uTmFtZSwgYUNvbXBhcmF0b3IsIGFCaWFzKSB7XG4gICAgLy8gVG8gcmV0dXJuIHRoZSBwb3NpdGlvbiB3ZSBhcmUgc2VhcmNoaW5nIGZvciwgd2UgbXVzdCBmaXJzdCBmaW5kIHRoZVxuICAgIC8vIG1hcHBpbmcgZm9yIHRoZSBnaXZlbiBwb3NpdGlvbiBhbmQgdGhlbiByZXR1cm4gdGhlIG9wcG9zaXRlIHBvc2l0aW9uIGl0XG4gICAgLy8gcG9pbnRzIHRvLiBCZWNhdXNlIHRoZSBtYXBwaW5ncyBhcmUgc29ydGVkLCB3ZSBjYW4gdXNlIGJpbmFyeSBzZWFyY2ggdG9cbiAgICAvLyBmaW5kIHRoZSBiZXN0IG1hcHBpbmcuXG5cbiAgICBpZiAoYU5lZWRsZVthTGluZU5hbWVdIDw9IDApIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0xpbmUgbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMSwgZ290ICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhTmVlZGxlW2FMaW5lTmFtZV0pO1xuICAgIH1cbiAgICBpZiAoYU5lZWRsZVthQ29sdW1uTmFtZV0gPCAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDb2x1bW4gbXVzdCBiZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gMCwgZ290ICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKyBhTmVlZGxlW2FDb2x1bW5OYW1lXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJpbmFyeVNlYXJjaC5zZWFyY2goYU5lZWRsZSwgYU1hcHBpbmdzLCBhQ29tcGFyYXRvciwgYUJpYXMpO1xuICB9O1xuXG4vKipcbiAqIENvbXB1dGUgdGhlIGxhc3QgY29sdW1uIGZvciBlYWNoIGdlbmVyYXRlZCBtYXBwaW5nLiBUaGUgbGFzdCBjb2x1bW4gaXNcbiAqIGluY2x1c2l2ZS5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuY29tcHV0ZUNvbHVtblNwYW5zID1cbiAgZnVuY3Rpb24gU291cmNlTWFwQ29uc3VtZXJfY29tcHV0ZUNvbHVtblNwYW5zKCkge1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncy5sZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgIHZhciBtYXBwaW5nID0gdGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbaW5kZXhdO1xuXG4gICAgICAvLyBNYXBwaW5ncyBkbyBub3QgY29udGFpbiBhIGZpZWxkIGZvciB0aGUgbGFzdCBnZW5lcmF0ZWQgY29sdW1udC4gV2VcbiAgICAgIC8vIGNhbiBjb21lIHVwIHdpdGggYW4gb3B0aW1pc3RpYyBlc3RpbWF0ZSwgaG93ZXZlciwgYnkgYXNzdW1pbmcgdGhhdFxuICAgICAgLy8gbWFwcGluZ3MgYXJlIGNvbnRpZ3VvdXMgKGkuZS4gZ2l2ZW4gdHdvIGNvbnNlY3V0aXZlIG1hcHBpbmdzLCB0aGVcbiAgICAgIC8vIGZpcnN0IG1hcHBpbmcgZW5kcyB3aGVyZSB0aGUgc2Vjb25kIG9uZSBzdGFydHMpLlxuICAgICAgaWYgKGluZGV4ICsgMSA8IHRoaXMuX2dlbmVyYXRlZE1hcHBpbmdzLmxlbmd0aCkge1xuICAgICAgICB2YXIgbmV4dE1hcHBpbmcgPSB0aGlzLl9nZW5lcmF0ZWRNYXBwaW5nc1tpbmRleCArIDFdO1xuXG4gICAgICAgIGlmIChtYXBwaW5nLmdlbmVyYXRlZExpbmUgPT09IG5leHRNYXBwaW5nLmdlbmVyYXRlZExpbmUpIHtcbiAgICAgICAgICBtYXBwaW5nLmxhc3RHZW5lcmF0ZWRDb2x1bW4gPSBuZXh0TWFwcGluZy5nZW5lcmF0ZWRDb2x1bW4gLSAxO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRoZSBsYXN0IG1hcHBpbmcgZm9yIGVhY2ggbGluZSBzcGFucyB0aGUgZW50aXJlIGxpbmUuXG4gICAgICBtYXBwaW5nLmxhc3RHZW5lcmF0ZWRDb2x1bW4gPSBJbmZpbml0eTtcbiAgICB9XG4gIH07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JpZ2luYWwgc291cmNlLCBsaW5lLCBhbmQgY29sdW1uIGluZm9ybWF0aW9uIGZvciB0aGUgZ2VuZXJhdGVkXG4gKiBzb3VyY2UncyBsaW5lIGFuZCBjb2x1bW4gcG9zaXRpb25zIHByb3ZpZGVkLiBUaGUgb25seSBhcmd1bWVudCBpcyBhbiBvYmplY3RcbiAqIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBsaW5lOiBUaGUgbGluZSBudW1iZXIgaW4gdGhlIGdlbmVyYXRlZCBzb3VyY2UuICBUaGUgbGluZSBudW1iZXJcbiAqICAgICBpcyAxLWJhc2VkLlxuICogICAtIGNvbHVtbjogVGhlIGNvbHVtbiBudW1iZXIgaW4gdGhlIGdlbmVyYXRlZCBzb3VyY2UuICBUaGUgY29sdW1uXG4gKiAgICAgbnVtYmVyIGlzIDAtYmFzZWQuXG4gKiAgIC0gYmlhczogRWl0aGVyICdTb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORCcgb3JcbiAqICAgICAnU291cmNlTWFwQ29uc3VtZXIuTEVBU1RfVVBQRVJfQk9VTkQnLiBTcGVjaWZpZXMgd2hldGhlciB0byByZXR1cm4gdGhlXG4gKiAgICAgY2xvc2VzdCBlbGVtZW50IHRoYXQgaXMgc21hbGxlciB0aGFuIG9yIGdyZWF0ZXIgdGhhbiB0aGUgb25lIHdlIGFyZVxuICogICAgIHNlYXJjaGluZyBmb3IsIHJlc3BlY3RpdmVseSwgaWYgdGhlIGV4YWN0IGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLlxuICogICAgIERlZmF1bHRzIHRvICdTb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORCcuXG4gKlxuICogYW5kIGFuIG9iamVjdCBpcyByZXR1cm5lZCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gc291cmNlOiBUaGUgb3JpZ2luYWwgc291cmNlIGZpbGUsIG9yIG51bGwuXG4gKiAgIC0gbGluZTogVGhlIGxpbmUgbnVtYmVyIGluIHRoZSBvcmlnaW5hbCBzb3VyY2UsIG9yIG51bGwuICBUaGVcbiAqICAgICBsaW5lIG51bWJlciBpcyAxLWJhc2VkLlxuICogICAtIGNvbHVtbjogVGhlIGNvbHVtbiBudW1iZXIgaW4gdGhlIG9yaWdpbmFsIHNvdXJjZSwgb3IgbnVsbC4gIFRoZVxuICogICAgIGNvbHVtbiBudW1iZXIgaXMgMC1iYXNlZC5cbiAqICAgLSBuYW1lOiBUaGUgb3JpZ2luYWwgaWRlbnRpZmllciwgb3IgbnVsbC5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbkZvciA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX29yaWdpbmFsUG9zaXRpb25Gb3IoYUFyZ3MpIHtcbiAgICB2YXIgbmVlZGxlID0ge1xuICAgICAgZ2VuZXJhdGVkTGluZTogdXRpbC5nZXRBcmcoYUFyZ3MsICdsaW5lJyksXG4gICAgICBnZW5lcmF0ZWRDb2x1bW46IHV0aWwuZ2V0QXJnKGFBcmdzLCAnY29sdW1uJylcbiAgICB9O1xuXG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZE1hcHBpbmcoXG4gICAgICBuZWVkbGUsXG4gICAgICB0aGlzLl9nZW5lcmF0ZWRNYXBwaW5ncyxcbiAgICAgIFwiZ2VuZXJhdGVkTGluZVwiLFxuICAgICAgXCJnZW5lcmF0ZWRDb2x1bW5cIixcbiAgICAgIHV0aWwuY29tcGFyZUJ5R2VuZXJhdGVkUG9zaXRpb25zRGVmbGF0ZWQsXG4gICAgICB1dGlsLmdldEFyZyhhQXJncywgJ2JpYXMnLCBTb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORClcbiAgICApO1xuXG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgIHZhciBtYXBwaW5nID0gdGhpcy5fZ2VuZXJhdGVkTWFwcGluZ3NbaW5kZXhdO1xuXG4gICAgICBpZiAobWFwcGluZy5nZW5lcmF0ZWRMaW5lID09PSBuZWVkbGUuZ2VuZXJhdGVkTGluZSkge1xuICAgICAgICB2YXIgc291cmNlID0gdXRpbC5nZXRBcmcobWFwcGluZywgJ3NvdXJjZScsIG51bGwpO1xuICAgICAgICBpZiAoc291cmNlICE9PSBudWxsKSB7XG4gICAgICAgICAgc291cmNlID0gdGhpcy5fc291cmNlcy5hdChzb3VyY2UpO1xuICAgICAgICAgIHNvdXJjZSA9IHV0aWwuY29tcHV0ZVNvdXJjZVVSTCh0aGlzLnNvdXJjZVJvb3QsIHNvdXJjZSwgdGhpcy5fc291cmNlTWFwVVJMKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZSA9IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICduYW1lJywgbnVsbCk7XG4gICAgICAgIGlmIChuYW1lICE9PSBudWxsKSB7XG4gICAgICAgICAgbmFtZSA9IHRoaXMuX25hbWVzLmF0KG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgICAgbGluZTogdXRpbC5nZXRBcmcobWFwcGluZywgJ29yaWdpbmFsTGluZScsIG51bGwpLFxuICAgICAgICAgIGNvbHVtbjogdXRpbC5nZXRBcmcobWFwcGluZywgJ29yaWdpbmFsQ29sdW1uJywgbnVsbCksXG4gICAgICAgICAgbmFtZTogbmFtZVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzb3VyY2U6IG51bGwsXG4gICAgICBsaW5lOiBudWxsLFxuICAgICAgY29sdW1uOiBudWxsLFxuICAgICAgbmFtZTogbnVsbFxuICAgIH07XG4gIH07XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgd2UgaGF2ZSB0aGUgc291cmNlIGNvbnRlbnQgZm9yIGV2ZXJ5IHNvdXJjZSBpbiB0aGUgc291cmNlXG4gKiBtYXAsIGZhbHNlIG90aGVyd2lzZS5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuaGFzQ29udGVudHNPZkFsbFNvdXJjZXMgPVxuICBmdW5jdGlvbiBCYXNpY1NvdXJjZU1hcENvbnN1bWVyX2hhc0NvbnRlbnRzT2ZBbGxTb3VyY2VzKCkge1xuICAgIGlmICghdGhpcy5zb3VyY2VzQ29udGVudCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudC5sZW5ndGggPj0gdGhpcy5fc291cmNlcy5zaXplKCkgJiZcbiAgICAgICF0aGlzLnNvdXJjZXNDb250ZW50LnNvbWUoZnVuY3Rpb24gKHNjKSB7IHJldHVybiBzYyA9PSBudWxsOyB9KTtcbiAgfTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCBzb3VyY2UgY29udGVudC4gVGhlIG9ubHkgYXJndW1lbnQgaXMgdGhlIHVybCBvZiB0aGVcbiAqIG9yaWdpbmFsIHNvdXJjZSBmaWxlLiBSZXR1cm5zIG51bGwgaWYgbm8gb3JpZ2luYWwgc291cmNlIGNvbnRlbnQgaXNcbiAqIGF2YWlsYWJsZS5cbiAqL1xuQmFzaWNTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuc291cmNlQ29udGVudEZvciA9XG4gIGZ1bmN0aW9uIFNvdXJjZU1hcENvbnN1bWVyX3NvdXJjZUNvbnRlbnRGb3IoYVNvdXJjZSwgbnVsbE9uTWlzc2luZykge1xuICAgIGlmICghdGhpcy5zb3VyY2VzQ29udGVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0gdGhpcy5fZmluZFNvdXJjZUluZGV4KGFTb3VyY2UpO1xuICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2VzQ29udGVudFtpbmRleF07XG4gICAgfVxuXG4gICAgdmFyIHJlbGF0aXZlU291cmNlID0gYVNvdXJjZTtcbiAgICBpZiAodGhpcy5zb3VyY2VSb290ICE9IG51bGwpIHtcbiAgICAgIHJlbGF0aXZlU291cmNlID0gdXRpbC5yZWxhdGl2ZSh0aGlzLnNvdXJjZVJvb3QsIHJlbGF0aXZlU291cmNlKTtcbiAgICB9XG5cbiAgICB2YXIgdXJsO1xuICAgIGlmICh0aGlzLnNvdXJjZVJvb3QgIT0gbnVsbFxuICAgICAgICAmJiAodXJsID0gdXRpbC51cmxQYXJzZSh0aGlzLnNvdXJjZVJvb3QpKSkge1xuICAgICAgLy8gWFhYOiBmaWxlOi8vIFVSSXMgYW5kIGFic29sdXRlIHBhdGhzIGxlYWQgdG8gdW5leHBlY3RlZCBiZWhhdmlvciBmb3JcbiAgICAgIC8vIG1hbnkgdXNlcnMuIFdlIGNhbiBoZWxwIHRoZW0gb3V0IHdoZW4gdGhleSBleHBlY3QgZmlsZTovLyBVUklzIHRvXG4gICAgICAvLyBiZWhhdmUgbGlrZSBpdCB3b3VsZCBpZiB0aGV5IHdlcmUgcnVubmluZyBhIGxvY2FsIEhUVFAgc2VydmVyLiBTZWVcbiAgICAgIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTg4NTU5Ny5cbiAgICAgIHZhciBmaWxlVXJpQWJzUGF0aCA9IHJlbGF0aXZlU291cmNlLnJlcGxhY2UoL15maWxlOlxcL1xcLy8sIFwiXCIpO1xuICAgICAgaWYgKHVybC5zY2hlbWUgPT0gXCJmaWxlXCJcbiAgICAgICAgICAmJiB0aGlzLl9zb3VyY2VzLmhhcyhmaWxlVXJpQWJzUGF0aCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKGZpbGVVcmlBYnNQYXRoKV1cbiAgICAgIH1cblxuICAgICAgaWYgKCghdXJsLnBhdGggfHwgdXJsLnBhdGggPT0gXCIvXCIpXG4gICAgICAgICAgJiYgdGhpcy5fc291cmNlcy5oYXMoXCIvXCIgKyByZWxhdGl2ZVNvdXJjZSkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlc0NvbnRlbnRbdGhpcy5fc291cmNlcy5pbmRleE9mKFwiL1wiICsgcmVsYXRpdmVTb3VyY2UpXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgcmVjdXJzaXZlbHkgZnJvbVxuICAgIC8vIEluZGV4ZWRTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuc291cmNlQ29udGVudEZvci4gSW4gdGhhdCBjYXNlLCB3ZVxuICAgIC8vIGRvbid0IHdhbnQgdG8gdGhyb3cgaWYgd2UgY2FuJ3QgZmluZCB0aGUgc291cmNlIC0gd2UganVzdCB3YW50IHRvXG4gICAgLy8gcmV0dXJuIG51bGwsIHNvIHdlIHByb3ZpZGUgYSBmbGFnIHRvIGV4aXQgZ3JhY2VmdWxseS5cbiAgICBpZiAobnVsbE9uTWlzc2luZykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcIicgKyByZWxhdGl2ZVNvdXJjZSArICdcIiBpcyBub3QgaW4gdGhlIFNvdXJjZU1hcC4nKTtcbiAgICB9XG4gIH07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZ2VuZXJhdGVkIGxpbmUgYW5kIGNvbHVtbiBpbmZvcm1hdGlvbiBmb3IgdGhlIG9yaWdpbmFsIHNvdXJjZSxcbiAqIGxpbmUsIGFuZCBjb2x1bW4gcG9zaXRpb25zIHByb3ZpZGVkLiBUaGUgb25seSBhcmd1bWVudCBpcyBhbiBvYmplY3Qgd2l0aFxuICogdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBzb3VyY2U6IFRoZSBmaWxlbmFtZSBvZiB0aGUgb3JpZ2luYWwgc291cmNlLlxuICogICAtIGxpbmU6IFRoZSBsaW5lIG51bWJlciBpbiB0aGUgb3JpZ2luYWwgc291cmNlLiAgVGhlIGxpbmUgbnVtYmVyXG4gKiAgICAgaXMgMS1iYXNlZC5cbiAqICAgLSBjb2x1bW46IFRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBvcmlnaW5hbCBzb3VyY2UuICBUaGUgY29sdW1uXG4gKiAgICAgbnVtYmVyIGlzIDAtYmFzZWQuXG4gKiAgIC0gYmlhczogRWl0aGVyICdTb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORCcgb3JcbiAqICAgICAnU291cmNlTWFwQ29uc3VtZXIuTEVBU1RfVVBQRVJfQk9VTkQnLiBTcGVjaWZpZXMgd2hldGhlciB0byByZXR1cm4gdGhlXG4gKiAgICAgY2xvc2VzdCBlbGVtZW50IHRoYXQgaXMgc21hbGxlciB0aGFuIG9yIGdyZWF0ZXIgdGhhbiB0aGUgb25lIHdlIGFyZVxuICogICAgIHNlYXJjaGluZyBmb3IsIHJlc3BlY3RpdmVseSwgaWYgdGhlIGV4YWN0IGVsZW1lbnQgY2Fubm90IGJlIGZvdW5kLlxuICogICAgIERlZmF1bHRzIHRvICdTb3VyY2VNYXBDb25zdW1lci5HUkVBVEVTVF9MT1dFUl9CT1VORCcuXG4gKlxuICogYW5kIGFuIG9iamVjdCBpcyByZXR1cm5lZCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gbGluZTogVGhlIGxpbmUgbnVtYmVyIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLCBvciBudWxsLiAgVGhlXG4gKiAgICAgbGluZSBudW1iZXIgaXMgMS1iYXNlZC5cbiAqICAgLSBjb2x1bW46IFRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLCBvciBudWxsLlxuICogICAgIFRoZSBjb2x1bW4gbnVtYmVyIGlzIDAtYmFzZWQuXG4gKi9cbkJhc2ljU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLmdlbmVyYXRlZFBvc2l0aW9uRm9yID1cbiAgZnVuY3Rpb24gU291cmNlTWFwQ29uc3VtZXJfZ2VuZXJhdGVkUG9zaXRpb25Gb3IoYUFyZ3MpIHtcbiAgICB2YXIgc291cmNlID0gdXRpbC5nZXRBcmcoYUFyZ3MsICdzb3VyY2UnKTtcbiAgICBzb3VyY2UgPSB0aGlzLl9maW5kU291cmNlSW5kZXgoc291cmNlKTtcbiAgICBpZiAoc291cmNlIDwgMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGluZTogbnVsbCxcbiAgICAgICAgY29sdW1uOiBudWxsLFxuICAgICAgICBsYXN0Q29sdW1uOiBudWxsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBuZWVkbGUgPSB7XG4gICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgIG9yaWdpbmFsTGluZTogdXRpbC5nZXRBcmcoYUFyZ3MsICdsaW5lJyksXG4gICAgICBvcmlnaW5hbENvbHVtbjogdXRpbC5nZXRBcmcoYUFyZ3MsICdjb2x1bW4nKVxuICAgIH07XG5cbiAgICB2YXIgaW5kZXggPSB0aGlzLl9maW5kTWFwcGluZyhcbiAgICAgIG5lZWRsZSxcbiAgICAgIHRoaXMuX29yaWdpbmFsTWFwcGluZ3MsXG4gICAgICBcIm9yaWdpbmFsTGluZVwiLFxuICAgICAgXCJvcmlnaW5hbENvbHVtblwiLFxuICAgICAgdXRpbC5jb21wYXJlQnlPcmlnaW5hbFBvc2l0aW9ucyxcbiAgICAgIHV0aWwuZ2V0QXJnKGFBcmdzLCAnYmlhcycsIFNvdXJjZU1hcENvbnN1bWVyLkdSRUFURVNUX0xPV0VSX0JPVU5EKVxuICAgICk7XG5cbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgdmFyIG1hcHBpbmcgPSB0aGlzLl9vcmlnaW5hbE1hcHBpbmdzW2luZGV4XTtcblxuICAgICAgaWYgKG1hcHBpbmcuc291cmNlID09PSBuZWVkbGUuc291cmNlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGluZTogdXRpbC5nZXRBcmcobWFwcGluZywgJ2dlbmVyYXRlZExpbmUnLCBudWxsKSxcbiAgICAgICAgICBjb2x1bW46IHV0aWwuZ2V0QXJnKG1hcHBpbmcsICdnZW5lcmF0ZWRDb2x1bW4nLCBudWxsKSxcbiAgICAgICAgICBsYXN0Q29sdW1uOiB1dGlsLmdldEFyZyhtYXBwaW5nLCAnbGFzdEdlbmVyYXRlZENvbHVtbicsIG51bGwpXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxpbmU6IG51bGwsXG4gICAgICBjb2x1bW46IG51bGwsXG4gICAgICBsYXN0Q29sdW1uOiBudWxsXG4gICAgfTtcbiAgfTtcblxuZXhwb3J0cy5CYXNpY1NvdXJjZU1hcENvbnN1bWVyID0gQmFzaWNTb3VyY2VNYXBDb25zdW1lcjtcblxuLyoqXG4gKiBBbiBJbmRleGVkU291cmNlTWFwQ29uc3VtZXIgaW5zdGFuY2UgcmVwcmVzZW50cyBhIHBhcnNlZCBzb3VyY2UgbWFwIHdoaWNoXG4gKiB3ZSBjYW4gcXVlcnkgZm9yIGluZm9ybWF0aW9uLiBJdCBkaWZmZXJzIGZyb20gQmFzaWNTb3VyY2VNYXBDb25zdW1lciBpblxuICogdGhhdCBpdCB0YWtlcyBcImluZGV4ZWRcIiBzb3VyY2UgbWFwcyAoaS5lLiBvbmVzIHdpdGggYSBcInNlY3Rpb25zXCIgZmllbGQpIGFzXG4gKiBpbnB1dC5cbiAqXG4gKiBUaGUgZmlyc3QgcGFyYW1ldGVyIGlzIGEgcmF3IHNvdXJjZSBtYXAgKGVpdGhlciBhcyBhIEpTT04gc3RyaW5nLCBvciBhbHJlYWR5XG4gKiBwYXJzZWQgdG8gYW4gb2JqZWN0KS4gQWNjb3JkaW5nIHRvIHRoZSBzcGVjIGZvciBpbmRleGVkIHNvdXJjZSBtYXBzLCB0aGV5XG4gKiBoYXZlIHRoZSBmb2xsb3dpbmcgYXR0cmlidXRlczpcbiAqXG4gKiAgIC0gdmVyc2lvbjogV2hpY2ggdmVyc2lvbiBvZiB0aGUgc291cmNlIG1hcCBzcGVjIHRoaXMgbWFwIGlzIGZvbGxvd2luZy5cbiAqICAgLSBmaWxlOiBPcHRpb25hbC4gVGhlIGdlbmVyYXRlZCBmaWxlIHRoaXMgc291cmNlIG1hcCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiAgIC0gc2VjdGlvbnM6IEEgbGlzdCBvZiBzZWN0aW9uIGRlZmluaXRpb25zLlxuICpcbiAqIEVhY2ggdmFsdWUgdW5kZXIgdGhlIFwic2VjdGlvbnNcIiBmaWVsZCBoYXMgdHdvIGZpZWxkczpcbiAqICAgLSBvZmZzZXQ6IFRoZSBvZmZzZXQgaW50byB0aGUgb3JpZ2luYWwgc3BlY2lmaWVkIGF0IHdoaWNoIHRoaXMgc2VjdGlvblxuICogICAgICAgYmVnaW5zIHRvIGFwcGx5LCBkZWZpbmVkIGFzIGFuIG9iamVjdCB3aXRoIGEgXCJsaW5lXCIgYW5kIFwiY29sdW1uXCJcbiAqICAgICAgIGZpZWxkLlxuICogICAtIG1hcDogQSBzb3VyY2UgbWFwIGRlZmluaXRpb24uIFRoaXMgc291cmNlIG1hcCBjb3VsZCBhbHNvIGJlIGluZGV4ZWQsXG4gKiAgICAgICBidXQgZG9lc24ndCBoYXZlIHRvIGJlLlxuICpcbiAqIEluc3RlYWQgb2YgdGhlIFwibWFwXCIgZmllbGQsIGl0J3MgYWxzbyBwb3NzaWJsZSB0byBoYXZlIGEgXCJ1cmxcIiBmaWVsZFxuICogc3BlY2lmeWluZyBhIFVSTCB0byByZXRyaWV2ZSBhIHNvdXJjZSBtYXAgZnJvbSwgYnV0IHRoYXQncyBjdXJyZW50bHlcbiAqIHVuc3VwcG9ydGVkLlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIHNvdXJjZSBtYXAsIHRha2VuIGZyb20gdGhlIHNvdXJjZSBtYXAgc3BlY1swXSwgYnV0XG4gKiBtb2RpZmllZCB0byBvbWl0IGEgc2VjdGlvbiB3aGljaCB1c2VzIHRoZSBcInVybFwiIGZpZWxkLlxuICpcbiAqICB7XG4gKiAgICB2ZXJzaW9uIDogMyxcbiAqICAgIGZpbGU6IFwiYXBwLmpzXCIsXG4gKiAgICBzZWN0aW9uczogW3tcbiAqICAgICAgb2Zmc2V0OiB7bGluZToxMDAsIGNvbHVtbjoxMH0sXG4gKiAgICAgIG1hcDoge1xuICogICAgICAgIHZlcnNpb24gOiAzLFxuICogICAgICAgIGZpbGU6IFwic2VjdGlvbi5qc1wiLFxuICogICAgICAgIHNvdXJjZXM6IFtcImZvby5qc1wiLCBcImJhci5qc1wiXSxcbiAqICAgICAgICBuYW1lczogW1wic3JjXCIsIFwibWFwc1wiLCBcImFyZVwiLCBcImZ1blwiXSxcbiAqICAgICAgICBtYXBwaW5nczogXCJBQUFBLEU7O0FCQ0RFO1wiXG4gKiAgICAgIH1cbiAqICAgIH1dLFxuICogIH1cbiAqXG4gKiBUaGUgc2Vjb25kIHBhcmFtZXRlciwgaWYgZ2l2ZW4sIGlzIGEgc3RyaW5nIHdob3NlIHZhbHVlIGlzIHRoZSBVUkxcbiAqIGF0IHdoaWNoIHRoZSBzb3VyY2UgbWFwIHdhcyBmb3VuZC4gIFRoaXMgVVJMIGlzIHVzZWQgdG8gY29tcHV0ZSB0aGVcbiAqIHNvdXJjZXMgYXJyYXkuXG4gKlxuICogWzBdOiBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9kb2N1bWVudC9kLzFVMVJHQWVoUXdSeXBVVG92RjFLUmxwaU9GemUwYi1fMmdjNmZBSDBLWTBrL2VkaXQjaGVhZGluZz1oLjUzNWVzM3hlcHJndFxuICovXG5mdW5jdGlvbiBJbmRleGVkU291cmNlTWFwQ29uc3VtZXIoYVNvdXJjZU1hcCwgYVNvdXJjZU1hcFVSTCkge1xuICB2YXIgc291cmNlTWFwID0gYVNvdXJjZU1hcDtcbiAgaWYgKHR5cGVvZiBhU291cmNlTWFwID09PSAnc3RyaW5nJykge1xuICAgIHNvdXJjZU1hcCA9IHV0aWwucGFyc2VTb3VyY2VNYXBJbnB1dChhU291cmNlTWFwKTtcbiAgfVxuXG4gIHZhciB2ZXJzaW9uID0gdXRpbC5nZXRBcmcoc291cmNlTWFwLCAndmVyc2lvbicpO1xuICB2YXIgc2VjdGlvbnMgPSB1dGlsLmdldEFyZyhzb3VyY2VNYXAsICdzZWN0aW9ucycpO1xuXG4gIGlmICh2ZXJzaW9uICE9IHRoaXMuX3ZlcnNpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHZlcnNpb246ICcgKyB2ZXJzaW9uKTtcbiAgfVxuXG4gIHRoaXMuX3NvdXJjZXMgPSBuZXcgQXJyYXlTZXQoKTtcbiAgdGhpcy5fbmFtZXMgPSBuZXcgQXJyYXlTZXQoKTtcblxuICB2YXIgbGFzdE9mZnNldCA9IHtcbiAgICBsaW5lOiAtMSxcbiAgICBjb2x1bW46IDBcbiAgfTtcbiAgdGhpcy5fc2VjdGlvbnMgPSBzZWN0aW9ucy5tYXAoZnVuY3Rpb24gKHMpIHtcbiAgICBpZiAocy51cmwpIHtcbiAgICAgIC8vIFRoZSB1cmwgZmllbGQgd2lsbCByZXF1aXJlIHN1cHBvcnQgZm9yIGFzeW5jaHJvbmljaXR5LlxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL3NvdXJjZS1tYXAvaXNzdWVzLzE2XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1cHBvcnQgZm9yIHVybCBmaWVsZCBpbiBzZWN0aW9ucyBub3QgaW1wbGVtZW50ZWQuJyk7XG4gICAgfVxuICAgIHZhciBvZmZzZXQgPSB1dGlsLmdldEFyZyhzLCAnb2Zmc2V0Jyk7XG4gICAgdmFyIG9mZnNldExpbmUgPSB1dGlsLmdldEFyZyhvZmZzZXQsICdsaW5lJyk7XG4gICAgdmFyIG9mZnNldENvbHVtbiA9IHV0aWwuZ2V0QXJnKG9mZnNldCwgJ2NvbHVtbicpO1xuXG4gICAgaWYgKG9mZnNldExpbmUgPCBsYXN0T2Zmc2V0LmxpbmUgfHxcbiAgICAgICAgKG9mZnNldExpbmUgPT09IGxhc3RPZmZzZXQubGluZSAmJiBvZmZzZXRDb2x1bW4gPCBsYXN0T2Zmc2V0LmNvbHVtbikpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2VjdGlvbiBvZmZzZXRzIG11c3QgYmUgb3JkZXJlZCBhbmQgbm9uLW92ZXJsYXBwaW5nLicpO1xuICAgIH1cbiAgICBsYXN0T2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGdlbmVyYXRlZE9mZnNldDoge1xuICAgICAgICAvLyBUaGUgb2Zmc2V0IGZpZWxkcyBhcmUgMC1iYXNlZCwgYnV0IHdlIHVzZSAxLWJhc2VkIGluZGljZXMgd2hlblxuICAgICAgICAvLyBlbmNvZGluZy9kZWNvZGluZyBmcm9tIFZMUS5cbiAgICAgICAgZ2VuZXJhdGVkTGluZTogb2Zmc2V0TGluZSArIDEsXG4gICAgICAgIGdlbmVyYXRlZENvbHVtbjogb2Zmc2V0Q29sdW1uICsgMVxuICAgICAgfSxcbiAgICAgIGNvbnN1bWVyOiBuZXcgU291cmNlTWFwQ29uc3VtZXIodXRpbC5nZXRBcmcocywgJ21hcCcpLCBhU291cmNlTWFwVVJMKVxuICAgIH1cbiAgfSk7XG59XG5cbkluZGV4ZWRTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSk7XG5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU291cmNlTWFwQ29uc3VtZXI7XG5cbi8qKlxuICogVGhlIHZlcnNpb24gb2YgdGhlIHNvdXJjZSBtYXBwaW5nIHNwZWMgdGhhdCB3ZSBhcmUgY29uc3VtaW5nLlxuICovXG5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl92ZXJzaW9uID0gMztcblxuLyoqXG4gKiBUaGUgbGlzdCBvZiBvcmlnaW5hbCBzb3VyY2VzLlxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoSW5kZXhlZFNvdXJjZU1hcENvbnN1bWVyLnByb3RvdHlwZSwgJ3NvdXJjZXMnLCB7XG4gIGdldDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9zZWN0aW9uc1tpXS5jb25zdW1lci5zb3VyY2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHNvdXJjZXMucHVzaCh0aGlzLl9zZWN0aW9uc1tpXS5jb25zdW1lci5zb3VyY2VzW2pdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNvdXJjZXM7XG4gIH1cbn0pO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG9yaWdpbmFsIHNvdXJjZSwgbGluZSwgYW5kIGNvbHVtbiBpbmZvcm1hdGlvbiBmb3IgdGhlIGdlbmVyYXRlZFxuICogc291cmNlJ3MgbGluZSBhbmQgY29sdW1uIHBvc2l0aW9ucyBwcm92aWRlZC4gVGhlIG9ubHkgYXJndW1lbnQgaXMgYW4gb2JqZWN0XG4gKiB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gbGluZTogVGhlIGxpbmUgbnVtYmVyIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLiAgVGhlIGxpbmUgbnVtYmVyXG4gKiAgICAgaXMgMS1iYXNlZC5cbiAqICAgLSBjb2x1bW46IFRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLiAgVGhlIGNvbHVtblxuICogICAgIG51bWJlciBpcyAwLWJhc2VkLlxuICpcbiAqIGFuZCBhbiBvYmplY3QgaXMgcmV0dXJuZWQgd2l0aCB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXM6XG4gKlxuICogICAtIHNvdXJjZTogVGhlIG9yaWdpbmFsIHNvdXJjZSBmaWxlLCBvciBudWxsLlxuICogICAtIGxpbmU6IFRoZSBsaW5lIG51bWJlciBpbiB0aGUgb3JpZ2luYWwgc291cmNlLCBvciBudWxsLiAgVGhlXG4gKiAgICAgbGluZSBudW1iZXIgaXMgMS1iYXNlZC5cbiAqICAgLSBjb2x1bW46IFRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBvcmlnaW5hbCBzb3VyY2UsIG9yIG51bGwuICBUaGVcbiAqICAgICBjb2x1bW4gbnVtYmVyIGlzIDAtYmFzZWQuXG4gKiAgIC0gbmFtZTogVGhlIG9yaWdpbmFsIGlkZW50aWZpZXIsIG9yIG51bGwuXG4gKi9cbkluZGV4ZWRTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUub3JpZ2luYWxQb3NpdGlvbkZvciA9XG4gIGZ1bmN0aW9uIEluZGV4ZWRTb3VyY2VNYXBDb25zdW1lcl9vcmlnaW5hbFBvc2l0aW9uRm9yKGFBcmdzKSB7XG4gICAgdmFyIG5lZWRsZSA9IHtcbiAgICAgIGdlbmVyYXRlZExpbmU6IHV0aWwuZ2V0QXJnKGFBcmdzLCAnbGluZScpLFxuICAgICAgZ2VuZXJhdGVkQ29sdW1uOiB1dGlsLmdldEFyZyhhQXJncywgJ2NvbHVtbicpXG4gICAgfTtcblxuICAgIC8vIEZpbmQgdGhlIHNlY3Rpb24gY29udGFpbmluZyB0aGUgZ2VuZXJhdGVkIHBvc2l0aW9uIHdlJ3JlIHRyeWluZyB0byBtYXBcbiAgICAvLyB0byBhbiBvcmlnaW5hbCBwb3NpdGlvbi5cbiAgICB2YXIgc2VjdGlvbkluZGV4ID0gYmluYXJ5U2VhcmNoLnNlYXJjaChuZWVkbGUsIHRoaXMuX3NlY3Rpb25zLFxuICAgICAgZnVuY3Rpb24obmVlZGxlLCBzZWN0aW9uKSB7XG4gICAgICAgIHZhciBjbXAgPSBuZWVkbGUuZ2VuZXJhdGVkTGluZSAtIHNlY3Rpb24uZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmU7XG4gICAgICAgIGlmIChjbXApIHtcbiAgICAgICAgICByZXR1cm4gY21wO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIChuZWVkbGUuZ2VuZXJhdGVkQ29sdW1uIC1cbiAgICAgICAgICAgICAgICBzZWN0aW9uLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW4pO1xuICAgICAgfSk7XG4gICAgdmFyIHNlY3Rpb24gPSB0aGlzLl9zZWN0aW9uc1tzZWN0aW9uSW5kZXhdO1xuXG4gICAgaWYgKCFzZWN0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzb3VyY2U6IG51bGwsXG4gICAgICAgIGxpbmU6IG51bGwsXG4gICAgICAgIGNvbHVtbjogbnVsbCxcbiAgICAgICAgbmFtZTogbnVsbFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VjdGlvbi5jb25zdW1lci5vcmlnaW5hbFBvc2l0aW9uRm9yKHtcbiAgICAgIGxpbmU6IG5lZWRsZS5nZW5lcmF0ZWRMaW5lIC1cbiAgICAgICAgKHNlY3Rpb24uZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUgLSAxKSxcbiAgICAgIGNvbHVtbjogbmVlZGxlLmdlbmVyYXRlZENvbHVtbiAtXG4gICAgICAgIChzZWN0aW9uLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lID09PSBuZWVkbGUuZ2VuZXJhdGVkTGluZVxuICAgICAgICAgPyBzZWN0aW9uLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRDb2x1bW4gLSAxXG4gICAgICAgICA6IDApLFxuICAgICAgYmlhczogYUFyZ3MuYmlhc1xuICAgIH0pO1xuICB9O1xuXG4vKipcbiAqIFJldHVybiB0cnVlIGlmIHdlIGhhdmUgdGhlIHNvdXJjZSBjb250ZW50IGZvciBldmVyeSBzb3VyY2UgaW4gdGhlIHNvdXJjZVxuICogbWFwLCBmYWxzZSBvdGhlcndpc2UuXG4gKi9cbkluZGV4ZWRTb3VyY2VNYXBDb25zdW1lci5wcm90b3R5cGUuaGFzQ29udGVudHNPZkFsbFNvdXJjZXMgPVxuICBmdW5jdGlvbiBJbmRleGVkU291cmNlTWFwQ29uc3VtZXJfaGFzQ29udGVudHNPZkFsbFNvdXJjZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NlY3Rpb25zLmV2ZXJ5KGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gcy5jb25zdW1lci5oYXNDb250ZW50c09mQWxsU291cmNlcygpO1xuICAgIH0pO1xuICB9O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG9yaWdpbmFsIHNvdXJjZSBjb250ZW50LiBUaGUgb25seSBhcmd1bWVudCBpcyB0aGUgdXJsIG9mIHRoZVxuICogb3JpZ2luYWwgc291cmNlIGZpbGUuIFJldHVybnMgbnVsbCBpZiBubyBvcmlnaW5hbCBzb3VyY2UgY29udGVudCBpc1xuICogYXZhaWxhYmxlLlxuICovXG5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLnNvdXJjZUNvbnRlbnRGb3IgPVxuICBmdW5jdGlvbiBJbmRleGVkU291cmNlTWFwQ29uc3VtZXJfc291cmNlQ29udGVudEZvcihhU291cmNlLCBudWxsT25NaXNzaW5nKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLl9zZWN0aW9uc1tpXTtcblxuICAgICAgdmFyIGNvbnRlbnQgPSBzZWN0aW9uLmNvbnN1bWVyLnNvdXJjZUNvbnRlbnRGb3IoYVNvdXJjZSwgdHJ1ZSk7XG4gICAgICBpZiAoY29udGVudCkge1xuICAgICAgICByZXR1cm4gY29udGVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG51bGxPbk1pc3NpbmcpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignXCInICsgYVNvdXJjZSArICdcIiBpcyBub3QgaW4gdGhlIFNvdXJjZU1hcC4nKTtcbiAgICB9XG4gIH07XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZ2VuZXJhdGVkIGxpbmUgYW5kIGNvbHVtbiBpbmZvcm1hdGlvbiBmb3IgdGhlIG9yaWdpbmFsIHNvdXJjZSxcbiAqIGxpbmUsIGFuZCBjb2x1bW4gcG9zaXRpb25zIHByb3ZpZGVkLiBUaGUgb25seSBhcmd1bWVudCBpcyBhbiBvYmplY3Qgd2l0aFxuICogdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgLSBzb3VyY2U6IFRoZSBmaWxlbmFtZSBvZiB0aGUgb3JpZ2luYWwgc291cmNlLlxuICogICAtIGxpbmU6IFRoZSBsaW5lIG51bWJlciBpbiB0aGUgb3JpZ2luYWwgc291cmNlLiAgVGhlIGxpbmUgbnVtYmVyXG4gKiAgICAgaXMgMS1iYXNlZC5cbiAqICAgLSBjb2x1bW46IFRoZSBjb2x1bW4gbnVtYmVyIGluIHRoZSBvcmlnaW5hbCBzb3VyY2UuICBUaGUgY29sdW1uXG4gKiAgICAgbnVtYmVyIGlzIDAtYmFzZWQuXG4gKlxuICogYW5kIGFuIG9iamVjdCBpcyByZXR1cm5lZCB3aXRoIHRoZSBmb2xsb3dpbmcgcHJvcGVydGllczpcbiAqXG4gKiAgIC0gbGluZTogVGhlIGxpbmUgbnVtYmVyIGluIHRoZSBnZW5lcmF0ZWQgc291cmNlLCBvciBudWxsLiAgVGhlXG4gKiAgICAgbGluZSBudW1iZXIgaXMgMS1iYXNlZC4gXG4gKiAgIC0gY29sdW1uOiBUaGUgY29sdW1uIG51bWJlciBpbiB0aGUgZ2VuZXJhdGVkIHNvdXJjZSwgb3IgbnVsbC5cbiAqICAgICBUaGUgY29sdW1uIG51bWJlciBpcyAwLWJhc2VkLlxuICovXG5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLmdlbmVyYXRlZFBvc2l0aW9uRm9yID1cbiAgZnVuY3Rpb24gSW5kZXhlZFNvdXJjZU1hcENvbnN1bWVyX2dlbmVyYXRlZFBvc2l0aW9uRm9yKGFBcmdzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9zZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNlY3Rpb24gPSB0aGlzLl9zZWN0aW9uc1tpXTtcblxuICAgICAgLy8gT25seSBjb25zaWRlciB0aGlzIHNlY3Rpb24gaWYgdGhlIHJlcXVlc3RlZCBzb3VyY2UgaXMgaW4gdGhlIGxpc3Qgb2ZcbiAgICAgIC8vIHNvdXJjZXMgb2YgdGhlIGNvbnN1bWVyLlxuICAgICAgaWYgKHNlY3Rpb24uY29uc3VtZXIuX2ZpbmRTb3VyY2VJbmRleCh1dGlsLmdldEFyZyhhQXJncywgJ3NvdXJjZScpKSA9PT0gLTEpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgZ2VuZXJhdGVkUG9zaXRpb24gPSBzZWN0aW9uLmNvbnN1bWVyLmdlbmVyYXRlZFBvc2l0aW9uRm9yKGFBcmdzKTtcbiAgICAgIGlmIChnZW5lcmF0ZWRQb3NpdGlvbikge1xuICAgICAgICB2YXIgcmV0ID0ge1xuICAgICAgICAgIGxpbmU6IGdlbmVyYXRlZFBvc2l0aW9uLmxpbmUgK1xuICAgICAgICAgICAgKHNlY3Rpb24uZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUgLSAxKSxcbiAgICAgICAgICBjb2x1bW46IGdlbmVyYXRlZFBvc2l0aW9uLmNvbHVtbiArXG4gICAgICAgICAgICAoc2VjdGlvbi5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkTGluZSA9PT0gZ2VuZXJhdGVkUG9zaXRpb24ubGluZVxuICAgICAgICAgICAgID8gc2VjdGlvbi5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1uIC0gMVxuICAgICAgICAgICAgIDogMClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbGluZTogbnVsbCxcbiAgICAgIGNvbHVtbjogbnVsbFxuICAgIH07XG4gIH07XG5cbi8qKlxuICogUGFyc2UgdGhlIG1hcHBpbmdzIGluIGEgc3RyaW5nIGluIHRvIGEgZGF0YSBzdHJ1Y3R1cmUgd2hpY2ggd2UgY2FuIGVhc2lseVxuICogcXVlcnkgKHRoZSBvcmRlcmVkIGFycmF5cyBpbiB0aGUgYHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5nc2AgYW5kXG4gKiBgdGhpcy5fX29yaWdpbmFsTWFwcGluZ3NgIHByb3BlcnRpZXMpLlxuICovXG5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIucHJvdG90eXBlLl9wYXJzZU1hcHBpbmdzID1cbiAgZnVuY3Rpb24gSW5kZXhlZFNvdXJjZU1hcENvbnN1bWVyX3BhcnNlTWFwcGluZ3MoYVN0ciwgYVNvdXJjZVJvb3QpIHtcbiAgICB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MgPSBbXTtcbiAgICB0aGlzLl9fb3JpZ2luYWxNYXBwaW5ncyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWN0aW9uID0gdGhpcy5fc2VjdGlvbnNbaV07XG4gICAgICB2YXIgc2VjdGlvbk1hcHBpbmdzID0gc2VjdGlvbi5jb25zdW1lci5fZ2VuZXJhdGVkTWFwcGluZ3M7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNlY3Rpb25NYXBwaW5ncy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgbWFwcGluZyA9IHNlY3Rpb25NYXBwaW5nc1tqXTtcblxuICAgICAgICB2YXIgc291cmNlID0gc2VjdGlvbi5jb25zdW1lci5fc291cmNlcy5hdChtYXBwaW5nLnNvdXJjZSk7XG4gICAgICAgIHNvdXJjZSA9IHV0aWwuY29tcHV0ZVNvdXJjZVVSTChzZWN0aW9uLmNvbnN1bWVyLnNvdXJjZVJvb3QsIHNvdXJjZSwgdGhpcy5fc291cmNlTWFwVVJMKTtcbiAgICAgICAgdGhpcy5fc291cmNlcy5hZGQoc291cmNlKTtcbiAgICAgICAgc291cmNlID0gdGhpcy5fc291cmNlcy5pbmRleE9mKHNvdXJjZSk7XG5cbiAgICAgICAgdmFyIG5hbWUgPSBudWxsO1xuICAgICAgICBpZiAobWFwcGluZy5uYW1lKSB7XG4gICAgICAgICAgbmFtZSA9IHNlY3Rpb24uY29uc3VtZXIuX25hbWVzLmF0KG1hcHBpbmcubmFtZSk7XG4gICAgICAgICAgdGhpcy5fbmFtZXMuYWRkKG5hbWUpO1xuICAgICAgICAgIG5hbWUgPSB0aGlzLl9uYW1lcy5pbmRleE9mKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlIG1hcHBpbmdzIGNvbWluZyBmcm9tIHRoZSBjb25zdW1lciBmb3IgdGhlIHNlY3Rpb24gaGF2ZVxuICAgICAgICAvLyBnZW5lcmF0ZWQgcG9zaXRpb25zIHJlbGF0aXZlIHRvIHRoZSBzdGFydCBvZiB0aGUgc2VjdGlvbiwgc28gd2VcbiAgICAgICAgLy8gbmVlZCB0byBvZmZzZXQgdGhlbSB0byBiZSByZWxhdGl2ZSB0byB0aGUgc3RhcnQgb2YgdGhlIGNvbmNhdGVuYXRlZFxuICAgICAgICAvLyBnZW5lcmF0ZWQgZmlsZS5cbiAgICAgICAgdmFyIGFkanVzdGVkTWFwcGluZyA9IHtcbiAgICAgICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgICAgICBnZW5lcmF0ZWRMaW5lOiBtYXBwaW5nLmdlbmVyYXRlZExpbmUgK1xuICAgICAgICAgICAgKHNlY3Rpb24uZ2VuZXJhdGVkT2Zmc2V0LmdlbmVyYXRlZExpbmUgLSAxKSxcbiAgICAgICAgICBnZW5lcmF0ZWRDb2x1bW46IG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uICtcbiAgICAgICAgICAgIChzZWN0aW9uLmdlbmVyYXRlZE9mZnNldC5nZW5lcmF0ZWRMaW5lID09PSBtYXBwaW5nLmdlbmVyYXRlZExpbmVcbiAgICAgICAgICAgID8gc2VjdGlvbi5nZW5lcmF0ZWRPZmZzZXQuZ2VuZXJhdGVkQ29sdW1uIC0gMVxuICAgICAgICAgICAgOiAwKSxcbiAgICAgICAgICBvcmlnaW5hbExpbmU6IG1hcHBpbmcub3JpZ2luYWxMaW5lLFxuICAgICAgICAgIG9yaWdpbmFsQ29sdW1uOiBtYXBwaW5nLm9yaWdpbmFsQ29sdW1uLFxuICAgICAgICAgIG5hbWU6IG5hbWVcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9fZ2VuZXJhdGVkTWFwcGluZ3MucHVzaChhZGp1c3RlZE1hcHBpbmcpO1xuICAgICAgICBpZiAodHlwZW9mIGFkanVzdGVkTWFwcGluZy5vcmlnaW5hbExpbmUgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgdGhpcy5fX29yaWdpbmFsTWFwcGluZ3MucHVzaChhZGp1c3RlZE1hcHBpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcXVpY2tTb3J0KHRoaXMuX19nZW5lcmF0ZWRNYXBwaW5ncywgdXRpbC5jb21wYXJlQnlHZW5lcmF0ZWRQb3NpdGlvbnNEZWZsYXRlZCk7XG4gICAgcXVpY2tTb3J0KHRoaXMuX19vcmlnaW5hbE1hcHBpbmdzLCB1dGlsLmNvbXBhcmVCeU9yaWdpbmFsUG9zaXRpb25zKTtcbiAgfTtcblxuZXhwb3J0cy5JbmRleGVkU291cmNlTWFwQ29uc3VtZXIgPSBJbmRleGVkU291cmNlTWFwQ29uc3VtZXI7XG4iLCAiLyogLSotIE1vZGU6IGpzOyBqcy1pbmRlbnQtbGV2ZWw6IDI7IC0qLSAqL1xuLypcbiAqIENvcHlyaWdodCAyMDExIE1vemlsbGEgRm91bmRhdGlvbiBhbmQgY29udHJpYnV0b3JzXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTmV3IEJTRCBsaWNlbnNlLiBTZWUgTElDRU5TRSBvcjpcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9CU0QtMy1DbGF1c2VcbiAqL1xuXG52YXIgU291cmNlTWFwR2VuZXJhdG9yID0gcmVxdWlyZSgnLi9zb3VyY2UtbWFwLWdlbmVyYXRvcicpLlNvdXJjZU1hcEdlbmVyYXRvcjtcbnZhciB1dGlsID0gcmVxdWlyZSgnLi91dGlsJyk7XG5cbi8vIE1hdGNoZXMgYSBXaW5kb3dzLXN0eWxlIGBcXHJcXG5gIG5ld2xpbmUgb3IgYSBgXFxuYCBuZXdsaW5lIHVzZWQgYnkgYWxsIG90aGVyXG4vLyBvcGVyYXRpbmcgc3lzdGVtcyB0aGVzZSBkYXlzIChjYXB0dXJpbmcgdGhlIHJlc3VsdCkuXG52YXIgUkVHRVhfTkVXTElORSA9IC8oXFxyP1xcbikvO1xuXG4vLyBOZXdsaW5lIGNoYXJhY3RlciBjb2RlIGZvciBjaGFyQ29kZUF0KCkgY29tcGFyaXNvbnNcbnZhciBORVdMSU5FX0NPREUgPSAxMDtcblxuLy8gUHJpdmF0ZSBzeW1ib2wgZm9yIGlkZW50aWZ5aW5nIGBTb3VyY2VOb2RlYHMgd2hlbiBtdWx0aXBsZSB2ZXJzaW9ucyBvZlxuLy8gdGhlIHNvdXJjZS1tYXAgbGlicmFyeSBhcmUgbG9hZGVkLiBUaGlzIE1VU1QgTk9UIENIQU5HRSBhY3Jvc3Ncbi8vIHZlcnNpb25zIVxudmFyIGlzU291cmNlTm9kZSA9IFwiJCQkaXNTb3VyY2VOb2RlJCQkXCI7XG5cbi8qKlxuICogU291cmNlTm9kZXMgcHJvdmlkZSBhIHdheSB0byBhYnN0cmFjdCBvdmVyIGludGVycG9sYXRpbmcvY29uY2F0ZW5hdGluZ1xuICogc25pcHBldHMgb2YgZ2VuZXJhdGVkIEphdmFTY3JpcHQgc291cmNlIGNvZGUgd2hpbGUgbWFpbnRhaW5pbmcgdGhlIGxpbmUgYW5kXG4gKiBjb2x1bW4gaW5mb3JtYXRpb24gYXNzb2NpYXRlZCB3aXRoIHRoZSBvcmlnaW5hbCBzb3VyY2UgY29kZS5cbiAqXG4gKiBAcGFyYW0gYUxpbmUgVGhlIG9yaWdpbmFsIGxpbmUgbnVtYmVyLlxuICogQHBhcmFtIGFDb2x1bW4gVGhlIG9yaWdpbmFsIGNvbHVtbiBudW1iZXIuXG4gKiBAcGFyYW0gYVNvdXJjZSBUaGUgb3JpZ2luYWwgc291cmNlJ3MgZmlsZW5hbWUuXG4gKiBAcGFyYW0gYUNodW5rcyBPcHRpb25hbC4gQW4gYXJyYXkgb2Ygc3RyaW5ncyB3aGljaCBhcmUgc25pcHBldHMgb2ZcbiAqICAgICAgICBnZW5lcmF0ZWQgSlMsIG9yIG90aGVyIFNvdXJjZU5vZGVzLlxuICogQHBhcmFtIGFOYW1lIFRoZSBvcmlnaW5hbCBpZGVudGlmaWVyLlxuICovXG5mdW5jdGlvbiBTb3VyY2VOb2RlKGFMaW5lLCBhQ29sdW1uLCBhU291cmNlLCBhQ2h1bmtzLCBhTmFtZSkge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuc291cmNlQ29udGVudHMgPSB7fTtcbiAgdGhpcy5saW5lID0gYUxpbmUgPT0gbnVsbCA/IG51bGwgOiBhTGluZTtcbiAgdGhpcy5jb2x1bW4gPSBhQ29sdW1uID09IG51bGwgPyBudWxsIDogYUNvbHVtbjtcbiAgdGhpcy5zb3VyY2UgPSBhU291cmNlID09IG51bGwgPyBudWxsIDogYVNvdXJjZTtcbiAgdGhpcy5uYW1lID0gYU5hbWUgPT0gbnVsbCA/IG51bGwgOiBhTmFtZTtcbiAgdGhpc1tpc1NvdXJjZU5vZGVdID0gdHJ1ZTtcbiAgaWYgKGFDaHVua3MgIT0gbnVsbCkgdGhpcy5hZGQoYUNodW5rcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIFNvdXJjZU5vZGUgZnJvbSBnZW5lcmF0ZWQgY29kZSBhbmQgYSBTb3VyY2VNYXBDb25zdW1lci5cbiAqXG4gKiBAcGFyYW0gYUdlbmVyYXRlZENvZGUgVGhlIGdlbmVyYXRlZCBjb2RlXG4gKiBAcGFyYW0gYVNvdXJjZU1hcENvbnN1bWVyIFRoZSBTb3VyY2VNYXAgZm9yIHRoZSBnZW5lcmF0ZWQgY29kZVxuICogQHBhcmFtIGFSZWxhdGl2ZVBhdGggT3B0aW9uYWwuIFRoZSBwYXRoIHRoYXQgcmVsYXRpdmUgc291cmNlcyBpbiB0aGVcbiAqICAgICAgICBTb3VyY2VNYXBDb25zdW1lciBzaG91bGQgYmUgcmVsYXRpdmUgdG8uXG4gKi9cblNvdXJjZU5vZGUuZnJvbVN0cmluZ1dpdGhTb3VyY2VNYXAgPVxuICBmdW5jdGlvbiBTb3VyY2VOb2RlX2Zyb21TdHJpbmdXaXRoU291cmNlTWFwKGFHZW5lcmF0ZWRDb2RlLCBhU291cmNlTWFwQ29uc3VtZXIsIGFSZWxhdGl2ZVBhdGgpIHtcbiAgICAvLyBUaGUgU291cmNlTm9kZSB3ZSB3YW50IHRvIGZpbGwgd2l0aCB0aGUgZ2VuZXJhdGVkIGNvZGVcbiAgICAvLyBhbmQgdGhlIFNvdXJjZU1hcFxuICAgIHZhciBub2RlID0gbmV3IFNvdXJjZU5vZGUoKTtcblxuICAgIC8vIEFsbCBldmVuIGluZGljZXMgb2YgdGhpcyBhcnJheSBhcmUgb25lIGxpbmUgb2YgdGhlIGdlbmVyYXRlZCBjb2RlLFxuICAgIC8vIHdoaWxlIGFsbCBvZGQgaW5kaWNlcyBhcmUgdGhlIG5ld2xpbmVzIGJldHdlZW4gdHdvIGFkamFjZW50IGxpbmVzXG4gICAgLy8gKHNpbmNlIGBSRUdFWF9ORVdMSU5FYCBjYXB0dXJlcyBpdHMgbWF0Y2gpLlxuICAgIC8vIFByb2Nlc3NlZCBmcmFnbWVudHMgYXJlIGFjY2Vzc2VkIGJ5IGNhbGxpbmcgYHNoaWZ0TmV4dExpbmVgLlxuICAgIHZhciByZW1haW5pbmdMaW5lcyA9IGFHZW5lcmF0ZWRDb2RlLnNwbGl0KFJFR0VYX05FV0xJTkUpO1xuICAgIHZhciByZW1haW5pbmdMaW5lc0luZGV4ID0gMDtcbiAgICB2YXIgc2hpZnROZXh0TGluZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxpbmVDb250ZW50cyA9IGdldE5leHRMaW5lKCk7XG4gICAgICAvLyBUaGUgbGFzdCBsaW5lIG9mIGEgZmlsZSBtaWdodCBub3QgaGF2ZSBhIG5ld2xpbmUuXG4gICAgICB2YXIgbmV3TGluZSA9IGdldE5leHRMaW5lKCkgfHwgXCJcIjtcbiAgICAgIHJldHVybiBsaW5lQ29udGVudHMgKyBuZXdMaW5lO1xuXG4gICAgICBmdW5jdGlvbiBnZXROZXh0TGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHJlbWFpbmluZ0xpbmVzSW5kZXggPCByZW1haW5pbmdMaW5lcy5sZW5ndGggP1xuICAgICAgICAgICAgcmVtYWluaW5nTGluZXNbcmVtYWluaW5nTGluZXNJbmRleCsrXSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gV2UgbmVlZCB0byByZW1lbWJlciB0aGUgcG9zaXRpb24gb2YgXCJyZW1haW5pbmdMaW5lc1wiXG4gICAgdmFyIGxhc3RHZW5lcmF0ZWRMaW5lID0gMSwgbGFzdEdlbmVyYXRlZENvbHVtbiA9IDA7XG5cbiAgICAvLyBUaGUgZ2VuZXJhdGUgU291cmNlTm9kZXMgd2UgbmVlZCBhIGNvZGUgcmFuZ2UuXG4gICAgLy8gVG8gZXh0cmFjdCBpdCBjdXJyZW50IGFuZCBsYXN0IG1hcHBpbmcgaXMgdXNlZC5cbiAgICAvLyBIZXJlIHdlIHN0b3JlIHRoZSBsYXN0IG1hcHBpbmcuXG4gICAgdmFyIGxhc3RNYXBwaW5nID0gbnVsbDtcblxuICAgIGFTb3VyY2VNYXBDb25zdW1lci5lYWNoTWFwcGluZyhmdW5jdGlvbiAobWFwcGluZykge1xuICAgICAgaWYgKGxhc3RNYXBwaW5nICE9PSBudWxsKSB7XG4gICAgICAgIC8vIFdlIGFkZCB0aGUgY29kZSBmcm9tIFwibGFzdE1hcHBpbmdcIiB0byBcIm1hcHBpbmdcIjpcbiAgICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlcmUgaXMgYSBuZXcgbGluZSBpbiBiZXR3ZWVuLlxuICAgICAgICBpZiAobGFzdEdlbmVyYXRlZExpbmUgPCBtYXBwaW5nLmdlbmVyYXRlZExpbmUpIHtcbiAgICAgICAgICAvLyBBc3NvY2lhdGUgZmlyc3QgbGluZSB3aXRoIFwibGFzdE1hcHBpbmdcIlxuICAgICAgICAgIGFkZE1hcHBpbmdXaXRoQ29kZShsYXN0TWFwcGluZywgc2hpZnROZXh0TGluZSgpKTtcbiAgICAgICAgICBsYXN0R2VuZXJhdGVkTGluZSsrO1xuICAgICAgICAgIGxhc3RHZW5lcmF0ZWRDb2x1bW4gPSAwO1xuICAgICAgICAgIC8vIFRoZSByZW1haW5pbmcgY29kZSBpcyBhZGRlZCB3aXRob3V0IG1hcHBpbmdcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGVyZSBpcyBubyBuZXcgbGluZSBpbiBiZXR3ZWVuLlxuICAgICAgICAgIC8vIEFzc29jaWF0ZSB0aGUgY29kZSBiZXR3ZWVuIFwibGFzdEdlbmVyYXRlZENvbHVtblwiIGFuZFxuICAgICAgICAgIC8vIFwibWFwcGluZy5nZW5lcmF0ZWRDb2x1bW5cIiB3aXRoIFwibGFzdE1hcHBpbmdcIlxuICAgICAgICAgIHZhciBuZXh0TGluZSA9IHJlbWFpbmluZ0xpbmVzW3JlbWFpbmluZ0xpbmVzSW5kZXhdIHx8ICcnO1xuICAgICAgICAgIHZhciBjb2RlID0gbmV4dExpbmUuc3Vic3RyKDAsIG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uIC1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0R2VuZXJhdGVkQ29sdW1uKTtcbiAgICAgICAgICByZW1haW5pbmdMaW5lc1tyZW1haW5pbmdMaW5lc0luZGV4XSA9IG5leHRMaW5lLnN1YnN0cihtYXBwaW5nLmdlbmVyYXRlZENvbHVtbiAtXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEdlbmVyYXRlZENvbHVtbik7XG4gICAgICAgICAgbGFzdEdlbmVyYXRlZENvbHVtbiA9IG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uO1xuICAgICAgICAgIGFkZE1hcHBpbmdXaXRoQ29kZShsYXN0TWFwcGluZywgY29kZSk7XG4gICAgICAgICAgLy8gTm8gbW9yZSByZW1haW5pbmcgY29kZSwgY29udGludWVcbiAgICAgICAgICBsYXN0TWFwcGluZyA9IG1hcHBpbmc7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBXZSBhZGQgdGhlIGdlbmVyYXRlZCBjb2RlIHVudGlsIHRoZSBmaXJzdCBtYXBwaW5nXG4gICAgICAvLyB0byB0aGUgU291cmNlTm9kZSB3aXRob3V0IGFueSBtYXBwaW5nLlxuICAgICAgLy8gRWFjaCBsaW5lIGlzIGFkZGVkIGFzIHNlcGFyYXRlIHN0cmluZy5cbiAgICAgIHdoaWxlIChsYXN0R2VuZXJhdGVkTGluZSA8IG1hcHBpbmcuZ2VuZXJhdGVkTGluZSkge1xuICAgICAgICBub2RlLmFkZChzaGlmdE5leHRMaW5lKCkpO1xuICAgICAgICBsYXN0R2VuZXJhdGVkTGluZSsrO1xuICAgICAgfVxuICAgICAgaWYgKGxhc3RHZW5lcmF0ZWRDb2x1bW4gPCBtYXBwaW5nLmdlbmVyYXRlZENvbHVtbikge1xuICAgICAgICB2YXIgbmV4dExpbmUgPSByZW1haW5pbmdMaW5lc1tyZW1haW5pbmdMaW5lc0luZGV4XSB8fCAnJztcbiAgICAgICAgbm9kZS5hZGQobmV4dExpbmUuc3Vic3RyKDAsIG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uKSk7XG4gICAgICAgIHJlbWFpbmluZ0xpbmVzW3JlbWFpbmluZ0xpbmVzSW5kZXhdID0gbmV4dExpbmUuc3Vic3RyKG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uKTtcbiAgICAgICAgbGFzdEdlbmVyYXRlZENvbHVtbiA9IG1hcHBpbmcuZ2VuZXJhdGVkQ29sdW1uO1xuICAgICAgfVxuICAgICAgbGFzdE1hcHBpbmcgPSBtYXBwaW5nO1xuICAgIH0sIHRoaXMpO1xuICAgIC8vIFdlIGhhdmUgcHJvY2Vzc2VkIGFsbCBtYXBwaW5ncy5cbiAgICBpZiAocmVtYWluaW5nTGluZXNJbmRleCA8IHJlbWFpbmluZ0xpbmVzLmxlbmd0aCkge1xuICAgICAgaWYgKGxhc3RNYXBwaW5nKSB7XG4gICAgICAgIC8vIEFzc29jaWF0ZSB0aGUgcmVtYWluaW5nIGNvZGUgaW4gdGhlIGN1cnJlbnQgbGluZSB3aXRoIFwibGFzdE1hcHBpbmdcIlxuICAgICAgICBhZGRNYXBwaW5nV2l0aENvZGUobGFzdE1hcHBpbmcsIHNoaWZ0TmV4dExpbmUoKSk7XG4gICAgICB9XG4gICAgICAvLyBhbmQgYWRkIHRoZSByZW1haW5pbmcgbGluZXMgd2l0aG91dCBhbnkgbWFwcGluZ1xuICAgICAgbm9kZS5hZGQocmVtYWluaW5nTGluZXMuc3BsaWNlKHJlbWFpbmluZ0xpbmVzSW5kZXgpLmpvaW4oXCJcIikpO1xuICAgIH1cblxuICAgIC8vIENvcHkgc291cmNlc0NvbnRlbnQgaW50byBTb3VyY2VOb2RlXG4gICAgYVNvdXJjZU1hcENvbnN1bWVyLnNvdXJjZXMuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlRmlsZSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBhU291cmNlTWFwQ29uc3VtZXIuc291cmNlQ29udGVudEZvcihzb3VyY2VGaWxlKTtcbiAgICAgIGlmIChjb250ZW50ICE9IG51bGwpIHtcbiAgICAgICAgaWYgKGFSZWxhdGl2ZVBhdGggIT0gbnVsbCkge1xuICAgICAgICAgIHNvdXJjZUZpbGUgPSB1dGlsLmpvaW4oYVJlbGF0aXZlUGF0aCwgc291cmNlRmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5zZXRTb3VyY2VDb250ZW50KHNvdXJjZUZpbGUsIGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5vZGU7XG5cbiAgICBmdW5jdGlvbiBhZGRNYXBwaW5nV2l0aENvZGUobWFwcGluZywgY29kZSkge1xuICAgICAgaWYgKG1hcHBpbmcgPT09IG51bGwgfHwgbWFwcGluZy5zb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2RlLmFkZChjb2RlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhUmVsYXRpdmVQYXRoXG4gICAgICAgICAgPyB1dGlsLmpvaW4oYVJlbGF0aXZlUGF0aCwgbWFwcGluZy5zb3VyY2UpXG4gICAgICAgICAgOiBtYXBwaW5nLnNvdXJjZTtcbiAgICAgICAgbm9kZS5hZGQobmV3IFNvdXJjZU5vZGUobWFwcGluZy5vcmlnaW5hbExpbmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmcub3JpZ2luYWxDb2x1bW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNvdXJjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwcGluZy5uYW1lKSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4vKipcbiAqIEFkZCBhIGNodW5rIG9mIGdlbmVyYXRlZCBKUyB0byB0aGlzIHNvdXJjZSBub2RlLlxuICpcbiAqIEBwYXJhbSBhQ2h1bmsgQSBzdHJpbmcgc25pcHBldCBvZiBnZW5lcmF0ZWQgSlMgY29kZSwgYW5vdGhlciBpbnN0YW5jZSBvZlxuICogICAgICAgIFNvdXJjZU5vZGUsIG9yIGFuIGFycmF5IHdoZXJlIGVhY2ggbWVtYmVyIGlzIG9uZSBvZiB0aG9zZSB0aGluZ3MuXG4gKi9cblNvdXJjZU5vZGUucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIFNvdXJjZU5vZGVfYWRkKGFDaHVuaykge1xuICBpZiAoQXJyYXkuaXNBcnJheShhQ2h1bmspKSB7XG4gICAgYUNodW5rLmZvckVhY2goZnVuY3Rpb24gKGNodW5rKSB7XG4gICAgICB0aGlzLmFkZChjaHVuayk7XG4gICAgfSwgdGhpcyk7XG4gIH1cbiAgZWxzZSBpZiAoYUNodW5rW2lzU291cmNlTm9kZV0gfHwgdHlwZW9mIGFDaHVuayA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmIChhQ2h1bmspIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChhQ2h1bmspO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgXCJFeHBlY3RlZCBhIFNvdXJjZU5vZGUsIHN0cmluZywgb3IgYW4gYXJyYXkgb2YgU291cmNlTm9kZXMgYW5kIHN0cmluZ3MuIEdvdCBcIiArIGFDaHVua1xuICAgICk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIEFkZCBhIGNodW5rIG9mIGdlbmVyYXRlZCBKUyB0byB0aGUgYmVnaW5uaW5nIG9mIHRoaXMgc291cmNlIG5vZGUuXG4gKlxuICogQHBhcmFtIGFDaHVuayBBIHN0cmluZyBzbmlwcGV0IG9mIGdlbmVyYXRlZCBKUyBjb2RlLCBhbm90aGVyIGluc3RhbmNlIG9mXG4gKiAgICAgICAgU291cmNlTm9kZSwgb3IgYW4gYXJyYXkgd2hlcmUgZWFjaCBtZW1iZXIgaXMgb25lIG9mIHRob3NlIHRoaW5ncy5cbiAqL1xuU291cmNlTm9kZS5wcm90b3R5cGUucHJlcGVuZCA9IGZ1bmN0aW9uIFNvdXJjZU5vZGVfcHJlcGVuZChhQ2h1bmspIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYUNodW5rKSkge1xuICAgIGZvciAodmFyIGkgPSBhQ2h1bmsubGVuZ3RoLTE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICB0aGlzLnByZXBlbmQoYUNodW5rW2ldKTtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoYUNodW5rW2lzU291cmNlTm9kZV0gfHwgdHlwZW9mIGFDaHVuayA9PT0gXCJzdHJpbmdcIikge1xuICAgIHRoaXMuY2hpbGRyZW4udW5zaGlmdChhQ2h1bmspO1xuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBcIkV4cGVjdGVkIGEgU291cmNlTm9kZSwgc3RyaW5nLCBvciBhbiBhcnJheSBvZiBTb3VyY2VOb2RlcyBhbmQgc3RyaW5ncy4gR290IFwiICsgYUNodW5rXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogV2FsayBvdmVyIHRoZSB0cmVlIG9mIEpTIHNuaXBwZXRzIGluIHRoaXMgbm9kZSBhbmQgaXRzIGNoaWxkcmVuLiBUaGVcbiAqIHdhbGtpbmcgZnVuY3Rpb24gaXMgY2FsbGVkIG9uY2UgZm9yIGVhY2ggc25pcHBldCBvZiBKUyBhbmQgaXMgcGFzc2VkIHRoYXRcbiAqIHNuaXBwZXQgYW5kIHRoZSBpdHMgb3JpZ2luYWwgYXNzb2NpYXRlZCBzb3VyY2UncyBsaW5lL2NvbHVtbiBsb2NhdGlvbi5cbiAqXG4gKiBAcGFyYW0gYUZuIFRoZSB0cmF2ZXJzYWwgZnVuY3Rpb24uXG4gKi9cblNvdXJjZU5vZGUucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiBTb3VyY2VOb2RlX3dhbGsoYUZuKSB7XG4gIHZhciBjaHVuaztcbiAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBjaHVuayA9IHRoaXMuY2hpbGRyZW5baV07XG4gICAgaWYgKGNodW5rW2lzU291cmNlTm9kZV0pIHtcbiAgICAgIGNodW5rLndhbGsoYUZuKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoY2h1bmsgIT09ICcnKSB7XG4gICAgICAgIGFGbihjaHVuaywgeyBzb3VyY2U6IHRoaXMuc291cmNlLFxuICAgICAgICAgICAgICAgICAgICAgbGluZTogdGhpcy5saW5lLFxuICAgICAgICAgICAgICAgICAgICAgY29sdW1uOiB0aGlzLmNvbHVtbixcbiAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTGlrZSBgU3RyaW5nLnByb3RvdHlwZS5qb2luYCBleGNlcHQgZm9yIFNvdXJjZU5vZGVzLiBJbnNlcnRzIGBhU3RyYCBiZXR3ZWVuXG4gKiBlYWNoIG9mIGB0aGlzLmNoaWxkcmVuYC5cbiAqXG4gKiBAcGFyYW0gYVNlcCBUaGUgc2VwYXJhdG9yLlxuICovXG5Tb3VyY2VOb2RlLnByb3RvdHlwZS5qb2luID0gZnVuY3Rpb24gU291cmNlTm9kZV9qb2luKGFTZXApIHtcbiAgdmFyIG5ld0NoaWxkcmVuO1xuICB2YXIgaTtcbiAgdmFyIGxlbiA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuICBpZiAobGVuID4gMCkge1xuICAgIG5ld0NoaWxkcmVuID0gW107XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbi0xOyBpKyspIHtcbiAgICAgIG5ld0NoaWxkcmVuLnB1c2godGhpcy5jaGlsZHJlbltpXSk7XG4gICAgICBuZXdDaGlsZHJlbi5wdXNoKGFTZXApO1xuICAgIH1cbiAgICBuZXdDaGlsZHJlbi5wdXNoKHRoaXMuY2hpbGRyZW5baV0pO1xuICAgIHRoaXMuY2hpbGRyZW4gPSBuZXdDaGlsZHJlbjtcbiAgfVxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogQ2FsbCBTdHJpbmcucHJvdG90eXBlLnJlcGxhY2Ugb24gdGhlIHZlcnkgcmlnaHQtbW9zdCBzb3VyY2Ugc25pcHBldC4gVXNlZnVsXG4gKiBmb3IgdHJpbW1pbmcgd2hpdGVzcGFjZSBmcm9tIHRoZSBlbmQgb2YgYSBzb3VyY2Ugbm9kZSwgZXRjLlxuICpcbiAqIEBwYXJhbSBhUGF0dGVybiBUaGUgcGF0dGVybiB0byByZXBsYWNlLlxuICogQHBhcmFtIGFSZXBsYWNlbWVudCBUaGUgdGhpbmcgdG8gcmVwbGFjZSB0aGUgcGF0dGVybiB3aXRoLlxuICovXG5Tb3VyY2VOb2RlLnByb3RvdHlwZS5yZXBsYWNlUmlnaHQgPSBmdW5jdGlvbiBTb3VyY2VOb2RlX3JlcGxhY2VSaWdodChhUGF0dGVybiwgYVJlcGxhY2VtZW50KSB7XG4gIHZhciBsYXN0Q2hpbGQgPSB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG4gIGlmIChsYXN0Q2hpbGRbaXNTb3VyY2VOb2RlXSkge1xuICAgIGxhc3RDaGlsZC5yZXBsYWNlUmlnaHQoYVBhdHRlcm4sIGFSZXBsYWNlbWVudCk7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIGxhc3RDaGlsZCA9PT0gJ3N0cmluZycpIHtcbiAgICB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoIC0gMV0gPSBsYXN0Q2hpbGQucmVwbGFjZShhUGF0dGVybiwgYVJlcGxhY2VtZW50KTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLmNoaWxkcmVuLnB1c2goJycucmVwbGFjZShhUGF0dGVybiwgYVJlcGxhY2VtZW50KSk7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgc291cmNlIGNvbnRlbnQgZm9yIGEgc291cmNlIGZpbGUuIFRoaXMgd2lsbCBiZSBhZGRlZCB0byB0aGUgU291cmNlTWFwR2VuZXJhdG9yXG4gKiBpbiB0aGUgc291cmNlc0NvbnRlbnQgZmllbGQuXG4gKlxuICogQHBhcmFtIGFTb3VyY2VGaWxlIFRoZSBmaWxlbmFtZSBvZiB0aGUgc291cmNlIGZpbGVcbiAqIEBwYXJhbSBhU291cmNlQ29udGVudCBUaGUgY29udGVudCBvZiB0aGUgc291cmNlIGZpbGVcbiAqL1xuU291cmNlTm9kZS5wcm90b3R5cGUuc2V0U291cmNlQ29udGVudCA9XG4gIGZ1bmN0aW9uIFNvdXJjZU5vZGVfc2V0U291cmNlQ29udGVudChhU291cmNlRmlsZSwgYVNvdXJjZUNvbnRlbnQpIHtcbiAgICB0aGlzLnNvdXJjZUNvbnRlbnRzW3V0aWwudG9TZXRTdHJpbmcoYVNvdXJjZUZpbGUpXSA9IGFTb3VyY2VDb250ZW50O1xuICB9O1xuXG4vKipcbiAqIFdhbGsgb3ZlciB0aGUgdHJlZSBvZiBTb3VyY2VOb2Rlcy4gVGhlIHdhbGtpbmcgZnVuY3Rpb24gaXMgY2FsbGVkIGZvciBlYWNoXG4gKiBzb3VyY2UgZmlsZSBjb250ZW50IGFuZCBpcyBwYXNzZWQgdGhlIGZpbGVuYW1lIGFuZCBzb3VyY2UgY29udGVudC5cbiAqXG4gKiBAcGFyYW0gYUZuIFRoZSB0cmF2ZXJzYWwgZnVuY3Rpb24uXG4gKi9cblNvdXJjZU5vZGUucHJvdG90eXBlLndhbGtTb3VyY2VDb250ZW50cyA9XG4gIGZ1bmN0aW9uIFNvdXJjZU5vZGVfd2Fsa1NvdXJjZUNvbnRlbnRzKGFGbikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5jaGlsZHJlbltpXVtpc1NvdXJjZU5vZGVdKSB7XG4gICAgICAgIHRoaXMuY2hpbGRyZW5baV0ud2Fsa1NvdXJjZUNvbnRlbnRzKGFGbik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNvdXJjZXMgPSBPYmplY3Qua2V5cyh0aGlzLnNvdXJjZUNvbnRlbnRzKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc291cmNlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgYUZuKHV0aWwuZnJvbVNldFN0cmluZyhzb3VyY2VzW2ldKSwgdGhpcy5zb3VyY2VDb250ZW50c1tzb3VyY2VzW2ldXSk7XG4gICAgfVxuICB9O1xuXG4vKipcbiAqIFJldHVybiB0aGUgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgc291cmNlIG5vZGUuIFdhbGtzIG92ZXIgdGhlIHRyZWVcbiAqIGFuZCBjb25jYXRlbmF0ZXMgYWxsIHRoZSB2YXJpb3VzIHNuaXBwZXRzIHRvZ2V0aGVyIHRvIG9uZSBzdHJpbmcuXG4gKi9cblNvdXJjZU5vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gU291cmNlTm9kZV90b1N0cmluZygpIHtcbiAgdmFyIHN0ciA9IFwiXCI7XG4gIHRoaXMud2FsayhmdW5jdGlvbiAoY2h1bmspIHtcbiAgICBzdHIgKz0gY2h1bms7XG4gIH0pO1xuICByZXR1cm4gc3RyO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBzb3VyY2Ugbm9kZSBhbG9uZyB3aXRoIGEgc291cmNlXG4gKiBtYXAuXG4gKi9cblNvdXJjZU5vZGUucHJvdG90eXBlLnRvU3RyaW5nV2l0aFNvdXJjZU1hcCA9IGZ1bmN0aW9uIFNvdXJjZU5vZGVfdG9TdHJpbmdXaXRoU291cmNlTWFwKGFBcmdzKSB7XG4gIHZhciBnZW5lcmF0ZWQgPSB7XG4gICAgY29kZTogXCJcIixcbiAgICBsaW5lOiAxLFxuICAgIGNvbHVtbjogMFxuICB9O1xuICB2YXIgbWFwID0gbmV3IFNvdXJjZU1hcEdlbmVyYXRvcihhQXJncyk7XG4gIHZhciBzb3VyY2VNYXBwaW5nQWN0aXZlID0gZmFsc2U7XG4gIHZhciBsYXN0T3JpZ2luYWxTb3VyY2UgPSBudWxsO1xuICB2YXIgbGFzdE9yaWdpbmFsTGluZSA9IG51bGw7XG4gIHZhciBsYXN0T3JpZ2luYWxDb2x1bW4gPSBudWxsO1xuICB2YXIgbGFzdE9yaWdpbmFsTmFtZSA9IG51bGw7XG4gIHRoaXMud2FsayhmdW5jdGlvbiAoY2h1bmssIG9yaWdpbmFsKSB7XG4gICAgZ2VuZXJhdGVkLmNvZGUgKz0gY2h1bms7XG4gICAgaWYgKG9yaWdpbmFsLnNvdXJjZSAhPT0gbnVsbFxuICAgICAgICAmJiBvcmlnaW5hbC5saW5lICE9PSBudWxsXG4gICAgICAgICYmIG9yaWdpbmFsLmNvbHVtbiAhPT0gbnVsbCkge1xuICAgICAgaWYobGFzdE9yaWdpbmFsU291cmNlICE9PSBvcmlnaW5hbC5zb3VyY2VcbiAgICAgICAgIHx8IGxhc3RPcmlnaW5hbExpbmUgIT09IG9yaWdpbmFsLmxpbmVcbiAgICAgICAgIHx8IGxhc3RPcmlnaW5hbENvbHVtbiAhPT0gb3JpZ2luYWwuY29sdW1uXG4gICAgICAgICB8fCBsYXN0T3JpZ2luYWxOYW1lICE9PSBvcmlnaW5hbC5uYW1lKSB7XG4gICAgICAgIG1hcC5hZGRNYXBwaW5nKHtcbiAgICAgICAgICBzb3VyY2U6IG9yaWdpbmFsLnNvdXJjZSxcbiAgICAgICAgICBvcmlnaW5hbDoge1xuICAgICAgICAgICAgbGluZTogb3JpZ2luYWwubGluZSxcbiAgICAgICAgICAgIGNvbHVtbjogb3JpZ2luYWwuY29sdW1uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZW5lcmF0ZWQ6IHtcbiAgICAgICAgICAgIGxpbmU6IGdlbmVyYXRlZC5saW5lLFxuICAgICAgICAgICAgY29sdW1uOiBnZW5lcmF0ZWQuY29sdW1uXG4gICAgICAgICAgfSxcbiAgICAgICAgICBuYW1lOiBvcmlnaW5hbC5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgbGFzdE9yaWdpbmFsU291cmNlID0gb3JpZ2luYWwuc291cmNlO1xuICAgICAgbGFzdE9yaWdpbmFsTGluZSA9IG9yaWdpbmFsLmxpbmU7XG4gICAgICBsYXN0T3JpZ2luYWxDb2x1bW4gPSBvcmlnaW5hbC5jb2x1bW47XG4gICAgICBsYXN0T3JpZ2luYWxOYW1lID0gb3JpZ2luYWwubmFtZTtcbiAgICAgIHNvdXJjZU1hcHBpbmdBY3RpdmUgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoc291cmNlTWFwcGluZ0FjdGl2ZSkge1xuICAgICAgbWFwLmFkZE1hcHBpbmcoe1xuICAgICAgICBnZW5lcmF0ZWQ6IHtcbiAgICAgICAgICBsaW5lOiBnZW5lcmF0ZWQubGluZSxcbiAgICAgICAgICBjb2x1bW46IGdlbmVyYXRlZC5jb2x1bW5cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsYXN0T3JpZ2luYWxTb3VyY2UgPSBudWxsO1xuICAgICAgc291cmNlTWFwcGluZ0FjdGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpZHggPSAwLCBsZW5ndGggPSBjaHVuay5sZW5ndGg7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHtcbiAgICAgIGlmIChjaHVuay5jaGFyQ29kZUF0KGlkeCkgPT09IE5FV0xJTkVfQ09ERSkge1xuICAgICAgICBnZW5lcmF0ZWQubGluZSsrO1xuICAgICAgICBnZW5lcmF0ZWQuY29sdW1uID0gMDtcbiAgICAgICAgLy8gTWFwcGluZ3MgZW5kIGF0IGVvbFxuICAgICAgICBpZiAoaWR4ICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgbGFzdE9yaWdpbmFsU291cmNlID0gbnVsbDtcbiAgICAgICAgICBzb3VyY2VNYXBwaW5nQWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoc291cmNlTWFwcGluZ0FjdGl2ZSkge1xuICAgICAgICAgIG1hcC5hZGRNYXBwaW5nKHtcbiAgICAgICAgICAgIHNvdXJjZTogb3JpZ2luYWwuc291cmNlLFxuICAgICAgICAgICAgb3JpZ2luYWw6IHtcbiAgICAgICAgICAgICAgbGluZTogb3JpZ2luYWwubGluZSxcbiAgICAgICAgICAgICAgY29sdW1uOiBvcmlnaW5hbC5jb2x1bW5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZW5lcmF0ZWQ6IHtcbiAgICAgICAgICAgICAgbGluZTogZ2VuZXJhdGVkLmxpbmUsXG4gICAgICAgICAgICAgIGNvbHVtbjogZ2VuZXJhdGVkLmNvbHVtblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5hbWU6IG9yaWdpbmFsLm5hbWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VuZXJhdGVkLmNvbHVtbisrO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG4gIHRoaXMud2Fsa1NvdXJjZUNvbnRlbnRzKGZ1bmN0aW9uIChzb3VyY2VGaWxlLCBzb3VyY2VDb250ZW50KSB7XG4gICAgbWFwLnNldFNvdXJjZUNvbnRlbnQoc291cmNlRmlsZSwgc291cmNlQ29udGVudCk7XG4gIH0pO1xuXG4gIHJldHVybiB7IGNvZGU6IGdlbmVyYXRlZC5jb2RlLCBtYXA6IG1hcCB9O1xufTtcblxuZXhwb3J0cy5Tb3VyY2VOb2RlID0gU291cmNlTm9kZTtcbiIsICIvKlxuICogQ29weXJpZ2h0IDIwMDktMjAxMSBNb3ppbGxhIEZvdW5kYXRpb24gYW5kIGNvbnRyaWJ1dG9yc1xuICogTGljZW5zZWQgdW5kZXIgdGhlIE5ldyBCU0QgbGljZW5zZS4gU2VlIExJQ0VOU0UudHh0IG9yOlxuICogaHR0cDovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5leHBvcnRzLlNvdXJjZU1hcEdlbmVyYXRvciA9IHJlcXVpcmUoJy4vbGliL3NvdXJjZS1tYXAtZ2VuZXJhdG9yJykuU291cmNlTWFwR2VuZXJhdG9yO1xuZXhwb3J0cy5Tb3VyY2VNYXBDb25zdW1lciA9IHJlcXVpcmUoJy4vbGliL3NvdXJjZS1tYXAtY29uc3VtZXInKS5Tb3VyY2VNYXBDb25zdW1lcjtcbmV4cG9ydHMuU291cmNlTm9kZSA9IHJlcXVpcmUoJy4vbGliL3NvdXJjZS1ub2RlJykuU291cmNlTm9kZTtcbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBub2RlL25vLWRlcHJlY2F0ZWQtYXBpICovXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmdcblxudmFyIGlzTW9kZXJuID0gKFxuICB0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJlxuICB0eXBlb2YgQnVmZmVyLmFsbG9jID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiBCdWZmZXIuYWxsb2NVbnNhZmUgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIEJ1ZmZlci5mcm9tID09PSAnZnVuY3Rpb24nXG4pXG5cbmZ1bmN0aW9uIGlzQXJyYXlCdWZmZXIgKGlucHV0KSB7XG4gIHJldHVybiB0b1N0cmluZy5jYWxsKGlucHV0KS5zbGljZSg4LCAtMSkgPT09ICdBcnJheUJ1ZmZlcidcbn1cblxuZnVuY3Rpb24gZnJvbUFycmF5QnVmZmVyIChvYmosIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBieXRlT2Zmc2V0ID4+Pj0gMFxuXG4gIHZhciBtYXhMZW5ndGggPSBvYmouYnl0ZUxlbmd0aCAtIGJ5dGVPZmZzZXRcblxuICBpZiAobWF4TGVuZ3RoIDwgMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKFwiJ29mZnNldCcgaXMgb3V0IG9mIGJvdW5kc1wiKVxuICB9XG5cbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gbWF4TGVuZ3RoXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID4+Pj0gMFxuXG4gICAgaWYgKGxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCInbGVuZ3RoJyBpcyBvdXQgb2YgYm91bmRzXCIpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlzTW9kZXJuXG4gICAgPyBCdWZmZXIuZnJvbShvYmouc2xpY2UoYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGxlbmd0aCkpXG4gICAgOiBuZXcgQnVmZmVyKG5ldyBVaW50OEFycmF5KG9iai5zbGljZShieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgbGVuZ3RoKSkpXG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgfVxuXG4gIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxuICB9XG5cbiAgcmV0dXJuIGlzTW9kZXJuXG4gICAgPyBCdWZmZXIuZnJvbShzdHJpbmcsIGVuY29kaW5nKVxuICAgIDogbmV3IEJ1ZmZlcihzdHJpbmcsIGVuY29kaW5nKVxufVxuXG5mdW5jdGlvbiBidWZmZXJGcm9tICh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJ2YWx1ZVwiIGFyZ3VtZW50IG11c3Qgbm90IGJlIGEgbnVtYmVyJylcbiAgfVxuXG4gIGlmIChpc0FycmF5QnVmZmVyKHZhbHVlKSkge1xuICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIGZyb21TdHJpbmcodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQpXG4gIH1cblxuICByZXR1cm4gaXNNb2Rlcm5cbiAgICA/IEJ1ZmZlci5mcm9tKHZhbHVlKVxuICAgIDogbmV3IEJ1ZmZlcih2YWx1ZSlcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBidWZmZXJGcm9tXG4iLCAidmFyIFNvdXJjZU1hcENvbnN1bWVyID0gcmVxdWlyZSgnc291cmNlLW1hcCcpLlNvdXJjZU1hcENvbnN1bWVyO1xudmFyIHBhdGggPSByZXF1aXJlKCdwYXRoJyk7XG5cbnZhciBmcztcbnRyeSB7XG4gIGZzID0gcmVxdWlyZSgnZnMnKTtcbiAgaWYgKCFmcy5leGlzdHNTeW5jIHx8ICFmcy5yZWFkRmlsZVN5bmMpIHtcbiAgICAvLyBmcyBkb2Vzbid0IGhhdmUgYWxsIG1ldGhvZHMgd2UgbmVlZFxuICAgIGZzID0gbnVsbDtcbiAgfVxufSBjYXRjaCAoZXJyKSB7XG4gIC8qIG5vcCAqL1xufVxuXG52YXIgYnVmZmVyRnJvbSA9IHJlcXVpcmUoJ2J1ZmZlci1mcm9tJyk7XG5cbi8qKlxuICogUmVxdWlyZXMgYSBtb2R1bGUgd2hpY2ggaXMgcHJvdGVjdGVkIGFnYWluc3QgYnVuZGxlciBtaW5pZmljYXRpb24uXG4gKlxuICogQHBhcmFtIHtOb2RlTW9kdWxlfSBtb2RcbiAqIEBwYXJhbSB7c3RyaW5nfSByZXF1ZXN0XG4gKi9cbmZ1bmN0aW9uIGR5bmFtaWNSZXF1aXJlKG1vZCwgcmVxdWVzdCkge1xuICByZXR1cm4gbW9kLnJlcXVpcmUocmVxdWVzdCk7XG59XG5cbi8vIE9ubHkgaW5zdGFsbCBvbmNlIGlmIGNhbGxlZCBtdWx0aXBsZSB0aW1lc1xudmFyIGVycm9yRm9ybWF0dGVySW5zdGFsbGVkID0gZmFsc2U7XG52YXIgdW5jYXVnaHRTaGltSW5zdGFsbGVkID0gZmFsc2U7XG5cbi8vIElmIHRydWUsIHRoZSBjYWNoZXMgYXJlIHJlc2V0IGJlZm9yZSBhIHN0YWNrIHRyYWNlIGZvcm1hdHRpbmcgb3BlcmF0aW9uXG52YXIgZW1wdHlDYWNoZUJldHdlZW5PcGVyYXRpb25zID0gZmFsc2U7XG5cbi8vIFN1cHBvcnRzIHticm93c2VyLCBub2RlLCBhdXRvfVxudmFyIGVudmlyb25tZW50ID0gXCJhdXRvXCI7XG5cbi8vIE1hcHMgYSBmaWxlIHBhdGggdG8gYSBzdHJpbmcgY29udGFpbmluZyB0aGUgZmlsZSBjb250ZW50c1xudmFyIGZpbGVDb250ZW50c0NhY2hlID0ge307XG5cbi8vIE1hcHMgYSBmaWxlIHBhdGggdG8gYSBzb3VyY2UgbWFwIGZvciB0aGF0IGZpbGVcbnZhciBzb3VyY2VNYXBDYWNoZSA9IHt9O1xuXG4vLyBSZWdleCBmb3IgZGV0ZWN0aW5nIHNvdXJjZSBtYXBzXG52YXIgcmVTb3VyY2VNYXAgPSAvXmRhdGE6YXBwbGljYXRpb25cXC9qc29uW14sXStiYXNlNjQsLztcblxuLy8gUHJpb3JpdHkgbGlzdCBvZiByZXRyaWV2ZSBoYW5kbGVyc1xudmFyIHJldHJpZXZlRmlsZUhhbmRsZXJzID0gW107XG52YXIgcmV0cmlldmVNYXBIYW5kbGVycyA9IFtdO1xuXG5mdW5jdGlvbiBpc0luQnJvd3NlcigpIHtcbiAgaWYgKGVudmlyb25tZW50ID09PSBcImJyb3dzZXJcIilcbiAgICByZXR1cm4gdHJ1ZTtcbiAgaWYgKGVudmlyb25tZW50ID09PSBcIm5vZGVcIilcbiAgICByZXR1cm4gZmFsc2U7XG4gIHJldHVybiAoKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSAmJiAodHlwZW9mIFhNTEh0dHBSZXF1ZXN0ID09PSAnZnVuY3Rpb24nKSAmJiAhKHdpbmRvdy5yZXF1aXJlICYmIHdpbmRvdy5tb2R1bGUgJiYgd2luZG93LnByb2Nlc3MgJiYgd2luZG93LnByb2Nlc3MudHlwZSA9PT0gXCJyZW5kZXJlclwiKSk7XG59XG5cbmZ1bmN0aW9uIGhhc0dsb2JhbFByb2Nlc3NFdmVudEVtaXR0ZXIoKSB7XG4gIHJldHVybiAoKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JykgJiYgKHByb2Nlc3MgIT09IG51bGwpICYmICh0eXBlb2YgcHJvY2Vzcy5vbiA9PT0gJ2Z1bmN0aW9uJykpO1xufVxuXG5mdW5jdGlvbiBnbG9iYWxQcm9jZXNzVmVyc2lvbigpIHtcbiAgaWYgKCh0eXBlb2YgcHJvY2VzcyA9PT0gJ29iamVjdCcpICYmIChwcm9jZXNzICE9PSBudWxsKSkge1xuICAgIHJldHVybiBwcm9jZXNzLnZlcnNpb247XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdsb2JhbFByb2Nlc3NTdGRlcnIoKSB7XG4gIGlmICgodHlwZW9mIHByb2Nlc3MgPT09ICdvYmplY3QnKSAmJiAocHJvY2VzcyAhPT0gbnVsbCkpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5zdGRlcnI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2xvYmFsUHJvY2Vzc0V4aXQoY29kZSkge1xuICBpZiAoKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0JykgJiYgKHByb2Nlc3MgIT09IG51bGwpICYmICh0eXBlb2YgcHJvY2Vzcy5leGl0ID09PSAnZnVuY3Rpb24nKSkge1xuICAgIHJldHVybiBwcm9jZXNzLmV4aXQoY29kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlckV4ZWMobGlzdCkge1xuICByZXR1cm4gZnVuY3Rpb24oYXJnKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcmV0ID0gbGlzdFtpXShhcmcpO1xuICAgICAgaWYgKHJldCkge1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcbn1cblxudmFyIHJldHJpZXZlRmlsZSA9IGhhbmRsZXJFeGVjKHJldHJpZXZlRmlsZUhhbmRsZXJzKTtcblxucmV0cmlldmVGaWxlSGFuZGxlcnMucHVzaChmdW5jdGlvbihwYXRoKSB7XG4gIC8vIFRyaW0gdGhlIHBhdGggdG8gbWFrZSBzdXJlIHRoZXJlIGlzIG5vIGV4dHJhIHdoaXRlc3BhY2UuXG4gIHBhdGggPSBwYXRoLnRyaW0oKTtcbiAgaWYgKC9eZmlsZTovLnRlc3QocGF0aCkpIHtcbiAgICAvLyBleGlzdHNTeW5jL3JlYWRGaWxlU3luYyBjYW4ndCBoYW5kbGUgZmlsZSBwcm90b2NvbCwgYnV0IG9uY2Ugc3RyaXBwZWQsIGl0IHdvcmtzXG4gICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvZmlsZTpcXC9cXC9cXC8oXFx3Oik/LywgZnVuY3Rpb24ocHJvdG9jb2wsIGRyaXZlKSB7XG4gICAgICByZXR1cm4gZHJpdmUgP1xuICAgICAgICAnJyA6IC8vIGZpbGU6Ly8vQzovZGlyL2ZpbGUgLT4gQzovZGlyL2ZpbGVcbiAgICAgICAgJy8nOyAvLyBmaWxlOi8vL3Jvb3QtZGlyL2ZpbGUgLT4gL3Jvb3QtZGlyL2ZpbGVcbiAgICB9KTtcbiAgfVxuICBpZiAocGF0aCBpbiBmaWxlQ29udGVudHNDYWNoZSkge1xuICAgIHJldHVybiBmaWxlQ29udGVudHNDYWNoZVtwYXRoXTtcbiAgfVxuXG4gIHZhciBjb250ZW50cyA9ICcnO1xuICB0cnkge1xuICAgIGlmICghZnMpIHtcbiAgICAgIC8vIFVzZSBTSkFYIGlmIHdlIGFyZSBpbiB0aGUgYnJvd3NlclxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgeGhyLm9wZW4oJ0dFVCcsIHBhdGgsIC8qKiBhc3luYyAqLyBmYWxzZSk7XG4gICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gNCAmJiB4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgY29udGVudHMgPSB4aHIucmVzcG9uc2VUZXh0O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZnMuZXhpc3RzU3luYyhwYXRoKSkge1xuICAgICAgLy8gT3RoZXJ3aXNlLCB1c2UgdGhlIGZpbGVzeXN0ZW1cbiAgICAgIGNvbnRlbnRzID0gZnMucmVhZEZpbGVTeW5jKHBhdGgsICd1dGY4Jyk7XG4gICAgfVxuICB9IGNhdGNoIChlcikge1xuICAgIC8qIGlnbm9yZSBhbnkgZXJyb3JzICovXG4gIH1cblxuICByZXR1cm4gZmlsZUNvbnRlbnRzQ2FjaGVbcGF0aF0gPSBjb250ZW50cztcbn0pO1xuXG4vLyBTdXBwb3J0IFVSTHMgcmVsYXRpdmUgdG8gYSBkaXJlY3RvcnksIGJ1dCBiZSBjYXJlZnVsIGFib3V0IGEgcHJvdG9jb2wgcHJlZml4XG4vLyBpbiBjYXNlIHdlIGFyZSBpbiB0aGUgYnJvd3NlciAoaS5lLiBkaXJlY3RvcmllcyBtYXkgc3RhcnQgd2l0aCBcImh0dHA6Ly9cIiBvciBcImZpbGU6Ly8vXCIpXG5mdW5jdGlvbiBzdXBwb3J0UmVsYXRpdmVVUkwoZmlsZSwgdXJsKSB7XG4gIGlmICghZmlsZSkgcmV0dXJuIHVybDtcbiAgdmFyIGRpciA9IHBhdGguZGlybmFtZShmaWxlKTtcbiAgdmFyIG1hdGNoID0gL15cXHcrOlxcL1xcL1teXFwvXSovLmV4ZWMoZGlyKTtcbiAgdmFyIHByb3RvY29sID0gbWF0Y2ggPyBtYXRjaFswXSA6ICcnO1xuICB2YXIgc3RhcnRQYXRoID0gZGlyLnNsaWNlKHByb3RvY29sLmxlbmd0aCk7XG4gIGlmIChwcm90b2NvbCAmJiAvXlxcL1xcd1xcOi8udGVzdChzdGFydFBhdGgpKSB7XG4gICAgLy8gaGFuZGxlIGZpbGU6Ly8vQzovIHBhdGhzXG4gICAgcHJvdG9jb2wgKz0gJy8nO1xuICAgIHJldHVybiBwcm90b2NvbCArIHBhdGgucmVzb2x2ZShkaXIuc2xpY2UocHJvdG9jb2wubGVuZ3RoKSwgdXJsKS5yZXBsYWNlKC9cXFxcL2csICcvJyk7XG4gIH1cbiAgcmV0dXJuIHByb3RvY29sICsgcGF0aC5yZXNvbHZlKGRpci5zbGljZShwcm90b2NvbC5sZW5ndGgpLCB1cmwpO1xufVxuXG5mdW5jdGlvbiByZXRyaWV2ZVNvdXJjZU1hcFVSTChzb3VyY2UpIHtcbiAgdmFyIGZpbGVEYXRhO1xuXG4gIGlmIChpc0luQnJvd3NlcigpKSB7XG4gICAgIHRyeSB7XG4gICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgIHhoci5vcGVuKCdHRVQnLCBzb3VyY2UsIGZhbHNlKTtcbiAgICAgICB4aHIuc2VuZChudWxsKTtcbiAgICAgICBmaWxlRGF0YSA9IHhoci5yZWFkeVN0YXRlID09PSA0ID8geGhyLnJlc3BvbnNlVGV4dCA6IG51bGw7XG5cbiAgICAgICAvLyBTdXBwb3J0IHByb3ZpZGluZyBhIHNvdXJjZU1hcHBpbmdVUkwgdmlhIHRoZSBTb3VyY2VNYXAgaGVhZGVyXG4gICAgICAgdmFyIHNvdXJjZU1hcEhlYWRlciA9IHhoci5nZXRSZXNwb25zZUhlYWRlcihcIlNvdXJjZU1hcFwiKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLVNvdXJjZU1hcFwiKTtcbiAgICAgICBpZiAoc291cmNlTWFwSGVhZGVyKSB7XG4gICAgICAgICByZXR1cm4gc291cmNlTWFwSGVhZGVyO1xuICAgICAgIH1cbiAgICAgfSBjYXRjaCAoZSkge1xuICAgICB9XG4gIH1cblxuICAvLyBHZXQgdGhlIFVSTCBvZiB0aGUgc291cmNlIG1hcFxuICBmaWxlRGF0YSA9IHJldHJpZXZlRmlsZShzb3VyY2UpO1xuICB2YXIgcmUgPSAvKD86XFwvXFwvW0AjXVtcXHNdKnNvdXJjZU1hcHBpbmdVUkw9KFteXFxzJ1wiXSspW1xcc10qJCl8KD86XFwvXFwqW0AjXVtcXHNdKnNvdXJjZU1hcHBpbmdVUkw9KFteXFxzKidcIl0rKVtcXHNdKig/OlxcKlxcLylbXFxzXSokKS9tZztcbiAgLy8gS2VlcCBleGVjdXRpbmcgdGhlIHNlYXJjaCB0byBmaW5kIHRoZSAqbGFzdCogc291cmNlTWFwcGluZ1VSTCB0byBhdm9pZFxuICAvLyBwaWNraW5nIHVwIHNvdXJjZU1hcHBpbmdVUkxzIGZyb20gY29tbWVudHMsIHN0cmluZ3MsIGV0Yy5cbiAgdmFyIGxhc3RNYXRjaCwgbWF0Y2g7XG4gIHdoaWxlIChtYXRjaCA9IHJlLmV4ZWMoZmlsZURhdGEpKSBsYXN0TWF0Y2ggPSBtYXRjaDtcbiAgaWYgKCFsYXN0TWF0Y2gpIHJldHVybiBudWxsO1xuICByZXR1cm4gbGFzdE1hdGNoWzFdO1xufTtcblxuLy8gQ2FuIGJlIG92ZXJyaWRkZW4gYnkgdGhlIHJldHJpZXZlU291cmNlTWFwIG9wdGlvbiB0byBpbnN0YWxsLiBUYWtlcyBhXG4vLyBnZW5lcmF0ZWQgc291cmNlIGZpbGVuYW1lOyByZXR1cm5zIGEge21hcCwgb3B0aW9uYWwgdXJsfSBvYmplY3QsIG9yIG51bGwgaWZcbi8vIHRoZXJlIGlzIG5vIHNvdXJjZSBtYXAuICBUaGUgbWFwIGZpZWxkIG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgb3IgdGhlIHBhcnNlZFxuLy8gSlNPTiBvYmplY3QgKGllLCBpdCBtdXN0IGJlIGEgdmFsaWQgYXJndW1lbnQgdG8gdGhlIFNvdXJjZU1hcENvbnN1bWVyXG4vLyBjb25zdHJ1Y3RvcikuXG52YXIgcmV0cmlldmVTb3VyY2VNYXAgPSBoYW5kbGVyRXhlYyhyZXRyaWV2ZU1hcEhhbmRsZXJzKTtcbnJldHJpZXZlTWFwSGFuZGxlcnMucHVzaChmdW5jdGlvbihzb3VyY2UpIHtcbiAgdmFyIHNvdXJjZU1hcHBpbmdVUkwgPSByZXRyaWV2ZVNvdXJjZU1hcFVSTChzb3VyY2UpO1xuICBpZiAoIXNvdXJjZU1hcHBpbmdVUkwpIHJldHVybiBudWxsO1xuXG4gIC8vIFJlYWQgdGhlIGNvbnRlbnRzIG9mIHRoZSBzb3VyY2UgbWFwXG4gIHZhciBzb3VyY2VNYXBEYXRhO1xuICBpZiAocmVTb3VyY2VNYXAudGVzdChzb3VyY2VNYXBwaW5nVVJMKSkge1xuICAgIC8vIFN1cHBvcnQgc291cmNlIG1hcCBVUkwgYXMgYSBkYXRhIHVybFxuICAgIHZhciByYXdEYXRhID0gc291cmNlTWFwcGluZ1VSTC5zbGljZShzb3VyY2VNYXBwaW5nVVJMLmluZGV4T2YoJywnKSArIDEpO1xuICAgIHNvdXJjZU1hcERhdGEgPSBidWZmZXJGcm9tKHJhd0RhdGEsIFwiYmFzZTY0XCIpLnRvU3RyaW5nKCk7XG4gICAgc291cmNlTWFwcGluZ1VSTCA9IHNvdXJjZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBTdXBwb3J0IHNvdXJjZSBtYXAgVVJMcyByZWxhdGl2ZSB0byB0aGUgc291cmNlIFVSTFxuICAgIHNvdXJjZU1hcHBpbmdVUkwgPSBzdXBwb3J0UmVsYXRpdmVVUkwoc291cmNlLCBzb3VyY2VNYXBwaW5nVVJMKTtcbiAgICBzb3VyY2VNYXBEYXRhID0gcmV0cmlldmVGaWxlKHNvdXJjZU1hcHBpbmdVUkwpO1xuICB9XG5cbiAgaWYgKCFzb3VyY2VNYXBEYXRhKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHVybDogc291cmNlTWFwcGluZ1VSTCxcbiAgICBtYXA6IHNvdXJjZU1hcERhdGFcbiAgfTtcbn0pO1xuXG5mdW5jdGlvbiBtYXBTb3VyY2VQb3NpdGlvbihwb3NpdGlvbikge1xuICB2YXIgc291cmNlTWFwID0gc291cmNlTWFwQ2FjaGVbcG9zaXRpb24uc291cmNlXTtcbiAgaWYgKCFzb3VyY2VNYXApIHtcbiAgICAvLyBDYWxsIHRoZSAob3ZlcnJpZGVhYmxlKSByZXRyaWV2ZVNvdXJjZU1hcCBmdW5jdGlvbiB0byBnZXQgdGhlIHNvdXJjZSBtYXAuXG4gICAgdmFyIHVybEFuZE1hcCA9IHJldHJpZXZlU291cmNlTWFwKHBvc2l0aW9uLnNvdXJjZSk7XG4gICAgaWYgKHVybEFuZE1hcCkge1xuICAgICAgc291cmNlTWFwID0gc291cmNlTWFwQ2FjaGVbcG9zaXRpb24uc291cmNlXSA9IHtcbiAgICAgICAgdXJsOiB1cmxBbmRNYXAudXJsLFxuICAgICAgICBtYXA6IG5ldyBTb3VyY2VNYXBDb25zdW1lcih1cmxBbmRNYXAubWFwKVxuICAgICAgfTtcblxuICAgICAgLy8gTG9hZCBhbGwgc291cmNlcyBzdG9yZWQgaW5saW5lIHdpdGggdGhlIHNvdXJjZSBtYXAgaW50byB0aGUgZmlsZSBjYWNoZVxuICAgICAgLy8gdG8gcHJldGVuZCBsaWtlIHRoZXkgYXJlIGFscmVhZHkgbG9hZGVkLiBUaGV5IG1heSBub3QgZXhpc3Qgb24gZGlzay5cbiAgICAgIGlmIChzb3VyY2VNYXAubWFwLnNvdXJjZXNDb250ZW50KSB7XG4gICAgICAgIHNvdXJjZU1hcC5tYXAuc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHNvdXJjZSwgaSkge1xuICAgICAgICAgIHZhciBjb250ZW50cyA9IHNvdXJjZU1hcC5tYXAuc291cmNlc0NvbnRlbnRbaV07XG4gICAgICAgICAgaWYgKGNvbnRlbnRzKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gc3VwcG9ydFJlbGF0aXZlVVJMKHNvdXJjZU1hcC51cmwsIHNvdXJjZSk7XG4gICAgICAgICAgICBmaWxlQ29udGVudHNDYWNoZVt1cmxdID0gY29udGVudHM7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc291cmNlTWFwID0gc291cmNlTWFwQ2FjaGVbcG9zaXRpb24uc291cmNlXSA9IHtcbiAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICBtYXA6IG51bGxcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gUmVzb2x2ZSB0aGUgc291cmNlIFVSTCByZWxhdGl2ZSB0byB0aGUgVVJMIG9mIHRoZSBzb3VyY2UgbWFwXG4gIGlmIChzb3VyY2VNYXAgJiYgc291cmNlTWFwLm1hcCAmJiB0eXBlb2Ygc291cmNlTWFwLm1hcC5vcmlnaW5hbFBvc2l0aW9uRm9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdmFyIG9yaWdpbmFsUG9zaXRpb24gPSBzb3VyY2VNYXAubWFwLm9yaWdpbmFsUG9zaXRpb25Gb3IocG9zaXRpb24pO1xuXG4gICAgLy8gT25seSByZXR1cm4gdGhlIG9yaWdpbmFsIHBvc2l0aW9uIGlmIGEgbWF0Y2hpbmcgbGluZSB3YXMgZm91bmQuIElmIG5vXG4gICAgLy8gbWF0Y2hpbmcgbGluZSBpcyBmb3VuZCB0aGVuIHdlIHJldHVybiBwb3NpdGlvbiBpbnN0ZWFkLCB3aGljaCB3aWxsIGNhdXNlXG4gICAgLy8gdGhlIHN0YWNrIHRyYWNlIHRvIHByaW50IHRoZSBwYXRoIGFuZCBsaW5lIGZvciB0aGUgY29tcGlsZWQgZmlsZS4gSXQgaXNcbiAgICAvLyBiZXR0ZXIgdG8gZ2l2ZSBhIHByZWNpc2UgbG9jYXRpb24gaW4gdGhlIGNvbXBpbGVkIGZpbGUgdGhhbiBhIHZhZ3VlXG4gICAgLy8gbG9jYXRpb24gaW4gdGhlIG9yaWdpbmFsIGZpbGUuXG4gICAgaWYgKG9yaWdpbmFsUG9zaXRpb24uc291cmNlICE9PSBudWxsKSB7XG4gICAgICBvcmlnaW5hbFBvc2l0aW9uLnNvdXJjZSA9IHN1cHBvcnRSZWxhdGl2ZVVSTChcbiAgICAgICAgc291cmNlTWFwLnVybCwgb3JpZ2luYWxQb3NpdGlvbi5zb3VyY2UpO1xuICAgICAgcmV0dXJuIG9yaWdpbmFsUG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHBvc2l0aW9uO1xufVxuXG4vLyBQYXJzZXMgY29kZSBnZW5lcmF0ZWQgYnkgRm9ybWF0RXZhbE9yaWdpbigpLCBhIGZ1bmN0aW9uIGluc2lkZSBWODpcbi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avdjgvc291cmNlL2Jyb3dzZS90cnVuay9zcmMvbWVzc2FnZXMuanNcbmZ1bmN0aW9uIG1hcEV2YWxPcmlnaW4ob3JpZ2luKSB7XG4gIC8vIE1vc3QgZXZhbCgpIGNhbGxzIGFyZSBpbiB0aGlzIGZvcm1hdFxuICB2YXIgbWF0Y2ggPSAvXmV2YWwgYXQgKFteKF0rKSBcXCgoLispOihcXGQrKTooXFxkKylcXCkkLy5leGVjKG9yaWdpbik7XG4gIGlmIChtYXRjaCkge1xuICAgIHZhciBwb3NpdGlvbiA9IG1hcFNvdXJjZVBvc2l0aW9uKHtcbiAgICAgIHNvdXJjZTogbWF0Y2hbMl0sXG4gICAgICBsaW5lOiArbWF0Y2hbM10sXG4gICAgICBjb2x1bW46IG1hdGNoWzRdIC0gMVxuICAgIH0pO1xuICAgIHJldHVybiAnZXZhbCBhdCAnICsgbWF0Y2hbMV0gKyAnICgnICsgcG9zaXRpb24uc291cmNlICsgJzonICtcbiAgICAgIHBvc2l0aW9uLmxpbmUgKyAnOicgKyAocG9zaXRpb24uY29sdW1uICsgMSkgKyAnKSc7XG4gIH1cblxuICAvLyBQYXJzZSBuZXN0ZWQgZXZhbCgpIGNhbGxzIHVzaW5nIHJlY3Vyc2lvblxuICBtYXRjaCA9IC9eZXZhbCBhdCAoW14oXSspIFxcKCguKylcXCkkLy5leGVjKG9yaWdpbik7XG4gIGlmIChtYXRjaCkge1xuICAgIHJldHVybiAnZXZhbCBhdCAnICsgbWF0Y2hbMV0gKyAnICgnICsgbWFwRXZhbE9yaWdpbihtYXRjaFsyXSkgKyAnKSc7XG4gIH1cblxuICAvLyBNYWtlIHN1cmUgd2Ugc3RpbGwgcmV0dXJuIHVzZWZ1bCBpbmZvcm1hdGlvbiBpZiB3ZSBkaWRuJ3QgZmluZCBhbnl0aGluZ1xuICByZXR1cm4gb3JpZ2luO1xufVxuXG4vLyBUaGlzIGlzIGNvcGllZCBhbG1vc3QgdmVyYmF0aW0gZnJvbSB0aGUgVjggc291cmNlIGNvZGUgYXRcbi8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3Avdjgvc291cmNlL2Jyb3dzZS90cnVuay9zcmMvbWVzc2FnZXMuanMuIFRoZVxuLy8gaW1wbGVtZW50YXRpb24gb2Ygd3JhcENhbGxTaXRlKCkgdXNlZCB0byBqdXN0IGZvcndhcmQgdG8gdGhlIGFjdHVhbCBzb3VyY2Vcbi8vIGNvZGUgb2YgQ2FsbFNpdGUucHJvdG90eXBlLnRvU3RyaW5nIGJ1dCB1bmZvcnR1bmF0ZWx5IGEgbmV3IHJlbGVhc2Ugb2YgVjhcbi8vIGRpZCBzb21ldGhpbmcgdG8gdGhlIHByb3RvdHlwZSBjaGFpbiBhbmQgYnJva2UgdGhlIHNoaW0uIFRoZSBvbmx5IGZpeCBJXG4vLyBjb3VsZCBmaW5kIHdhcyBjb3B5L3Bhc3RlLlxuZnVuY3Rpb24gQ2FsbFNpdGVUb1N0cmluZygpIHtcbiAgdmFyIGZpbGVOYW1lO1xuICB2YXIgZmlsZUxvY2F0aW9uID0gXCJcIjtcbiAgaWYgKHRoaXMuaXNOYXRpdmUoKSkge1xuICAgIGZpbGVMb2NhdGlvbiA9IFwibmF0aXZlXCI7XG4gIH0gZWxzZSB7XG4gICAgZmlsZU5hbWUgPSB0aGlzLmdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpO1xuICAgIGlmICghZmlsZU5hbWUgJiYgdGhpcy5pc0V2YWwoKSkge1xuICAgICAgZmlsZUxvY2F0aW9uID0gdGhpcy5nZXRFdmFsT3JpZ2luKCk7XG4gICAgICBmaWxlTG9jYXRpb24gKz0gXCIsIFwiOyAgLy8gRXhwZWN0aW5nIHNvdXJjZSBwb3NpdGlvbiB0byBmb2xsb3cuXG4gICAgfVxuXG4gICAgaWYgKGZpbGVOYW1lKSB7XG4gICAgICBmaWxlTG9jYXRpb24gKz0gZmlsZU5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNvdXJjZSBjb2RlIGRvZXMgbm90IG9yaWdpbmF0ZSBmcm9tIGEgZmlsZSBhbmQgaXMgbm90IG5hdGl2ZSwgYnV0IHdlXG4gICAgICAvLyBjYW4gc3RpbGwgZ2V0IHRoZSBzb3VyY2UgcG9zaXRpb24gaW5zaWRlIHRoZSBzb3VyY2Ugc3RyaW5nLCBlLmcuIGluXG4gICAgICAvLyBhbiBldmFsIHN0cmluZy5cbiAgICAgIGZpbGVMb2NhdGlvbiArPSBcIjxhbm9ueW1vdXM+XCI7XG4gICAgfVxuICAgIHZhciBsaW5lTnVtYmVyID0gdGhpcy5nZXRMaW5lTnVtYmVyKCk7XG4gICAgaWYgKGxpbmVOdW1iZXIgIT0gbnVsbCkge1xuICAgICAgZmlsZUxvY2F0aW9uICs9IFwiOlwiICsgbGluZU51bWJlcjtcbiAgICAgIHZhciBjb2x1bW5OdW1iZXIgPSB0aGlzLmdldENvbHVtbk51bWJlcigpO1xuICAgICAgaWYgKGNvbHVtbk51bWJlcikge1xuICAgICAgICBmaWxlTG9jYXRpb24gKz0gXCI6XCIgKyBjb2x1bW5OdW1iZXI7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGxpbmUgPSBcIlwiO1xuICB2YXIgZnVuY3Rpb25OYW1lID0gdGhpcy5nZXRGdW5jdGlvbk5hbWUoKTtcbiAgdmFyIGFkZFN1ZmZpeCA9IHRydWU7XG4gIHZhciBpc0NvbnN0cnVjdG9yID0gdGhpcy5pc0NvbnN0cnVjdG9yKCk7XG4gIHZhciBpc01ldGhvZENhbGwgPSAhKHRoaXMuaXNUb3BsZXZlbCgpIHx8IGlzQ29uc3RydWN0b3IpO1xuICBpZiAoaXNNZXRob2RDYWxsKSB7XG4gICAgdmFyIHR5cGVOYW1lID0gdGhpcy5nZXRUeXBlTmFtZSgpO1xuICAgIC8vIEZpeGVzIHNoaW0gdG8gYmUgYmFja3dhcmQgY29tcGF0YWJsZSB3aXRoIE5vZGUgdjAgdG8gdjRcbiAgICBpZiAodHlwZU5hbWUgPT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcbiAgICAgIHR5cGVOYW1lID0gXCJudWxsXCI7XG4gICAgfVxuICAgIHZhciBtZXRob2ROYW1lID0gdGhpcy5nZXRNZXRob2ROYW1lKCk7XG4gICAgaWYgKGZ1bmN0aW9uTmFtZSkge1xuICAgICAgaWYgKHR5cGVOYW1lICYmIGZ1bmN0aW9uTmFtZS5pbmRleE9mKHR5cGVOYW1lKSAhPSAwKSB7XG4gICAgICAgIGxpbmUgKz0gdHlwZU5hbWUgKyBcIi5cIjtcbiAgICAgIH1cbiAgICAgIGxpbmUgKz0gZnVuY3Rpb25OYW1lO1xuICAgICAgaWYgKG1ldGhvZE5hbWUgJiYgZnVuY3Rpb25OYW1lLmluZGV4T2YoXCIuXCIgKyBtZXRob2ROYW1lKSAhPSBmdW5jdGlvbk5hbWUubGVuZ3RoIC0gbWV0aG9kTmFtZS5sZW5ndGggLSAxKSB7XG4gICAgICAgIGxpbmUgKz0gXCIgW2FzIFwiICsgbWV0aG9kTmFtZSArIFwiXVwiO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lICs9IHR5cGVOYW1lICsgXCIuXCIgKyAobWV0aG9kTmFtZSB8fCBcIjxhbm9ueW1vdXM+XCIpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChpc0NvbnN0cnVjdG9yKSB7XG4gICAgbGluZSArPSBcIm5ldyBcIiArIChmdW5jdGlvbk5hbWUgfHwgXCI8YW5vbnltb3VzPlwiKTtcbiAgfSBlbHNlIGlmIChmdW5jdGlvbk5hbWUpIHtcbiAgICBsaW5lICs9IGZ1bmN0aW9uTmFtZTtcbiAgfSBlbHNlIHtcbiAgICBsaW5lICs9IGZpbGVMb2NhdGlvbjtcbiAgICBhZGRTdWZmaXggPSBmYWxzZTtcbiAgfVxuICBpZiAoYWRkU3VmZml4KSB7XG4gICAgbGluZSArPSBcIiAoXCIgKyBmaWxlTG9jYXRpb24gKyBcIilcIjtcbiAgfVxuICByZXR1cm4gbGluZTtcbn1cblxuZnVuY3Rpb24gY2xvbmVDYWxsU2l0ZShmcmFtZSkge1xuICB2YXIgb2JqZWN0ID0ge307XG4gIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKE9iamVjdC5nZXRQcm90b3R5cGVPZihmcmFtZSkpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgIG9iamVjdFtuYW1lXSA9IC9eKD86aXN8Z2V0KS8udGVzdChuYW1lKSA/IGZ1bmN0aW9uKCkgeyByZXR1cm4gZnJhbWVbbmFtZV0uY2FsbChmcmFtZSk7IH0gOiBmcmFtZVtuYW1lXTtcbiAgfSk7XG4gIG9iamVjdC50b1N0cmluZyA9IENhbGxTaXRlVG9TdHJpbmc7XG4gIHJldHVybiBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIHdyYXBDYWxsU2l0ZShmcmFtZSwgc3RhdGUpIHtcbiAgLy8gcHJvdmlkZXMgaW50ZXJmYWNlIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICBzdGF0ZSA9IHsgbmV4dFBvc2l0aW9uOiBudWxsLCBjdXJQb3NpdGlvbjogbnVsbCB9XG4gIH1cbiAgaWYoZnJhbWUuaXNOYXRpdmUoKSkge1xuICAgIHN0YXRlLmN1clBvc2l0aW9uID0gbnVsbDtcbiAgICByZXR1cm4gZnJhbWU7XG4gIH1cblxuICAvLyBNb3N0IGNhbGwgc2l0ZXMgd2lsbCByZXR1cm4gdGhlIHNvdXJjZSBmaWxlIGZyb20gZ2V0RmlsZU5hbWUoKSwgYnV0IGNvZGVcbiAgLy8gcGFzc2VkIHRvIGV2YWwoKSBlbmRpbmcgaW4gXCIvLyMgc291cmNlVVJMPS4uLlwiIHdpbGwgcmV0dXJuIHRoZSBzb3VyY2UgZmlsZVxuICAvLyBmcm9tIGdldFNjcmlwdE5hbWVPclNvdXJjZVVSTCgpIGluc3RlYWRcbiAgdmFyIHNvdXJjZSA9IGZyYW1lLmdldEZpbGVOYW1lKCkgfHwgZnJhbWUuZ2V0U2NyaXB0TmFtZU9yU291cmNlVVJMKCk7XG4gIGlmIChzb3VyY2UpIHtcbiAgICB2YXIgbGluZSA9IGZyYW1lLmdldExpbmVOdW1iZXIoKTtcbiAgICB2YXIgY29sdW1uID0gZnJhbWUuZ2V0Q29sdW1uTnVtYmVyKCkgLSAxO1xuXG4gICAgLy8gRml4IHBvc2l0aW9uIGluIE5vZGUgd2hlcmUgc29tZSAoaW50ZXJuYWwpIGNvZGUgaXMgcHJlcGVuZGVkLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZXZhbncvbm9kZS1zb3VyY2UtbWFwLXN1cHBvcnQvaXNzdWVzLzM2XG4gICAgLy8gSGVhZGVyIHJlbW92ZWQgaW4gbm9kZSBhdCBeMTAuMTYgfHwgPj0xMS4xMS4wXG4gICAgLy8gdjExIGlzIG5vdCBhbiBMVFMgY2FuZGlkYXRlLCB3ZSBjYW4ganVzdCB0ZXN0IHRoZSBvbmUgdmVyc2lvbiB3aXRoIGl0LlxuICAgIC8vIFRlc3Qgbm9kZSB2ZXJzaW9ucyBmb3I6IDEwLjE2LTE5LCAxMC4yMCssIDEyLTE5LCAyMC05OSwgMTAwKywgb3IgMTEuMTFcbiAgICB2YXIgbm9IZWFkZXIgPSAvXnYoMTBcXC4xWzYtOV18MTBcXC5bMi05XVswLTldfDEwXFwuWzAtOV17Myx9fDFbMi05XVxcZCp8WzItOV1cXGR8XFxkezMsfXwxMVxcLjExKS87XG4gICAgdmFyIGhlYWRlckxlbmd0aCA9IG5vSGVhZGVyLnRlc3QoZ2xvYmFsUHJvY2Vzc1ZlcnNpb24oKSkgPyAwIDogNjI7XG4gICAgaWYgKGxpbmUgPT09IDEgJiYgY29sdW1uID4gaGVhZGVyTGVuZ3RoICYmICFpc0luQnJvd3NlcigpICYmICFmcmFtZS5pc0V2YWwoKSkge1xuICAgICAgY29sdW1uIC09IGhlYWRlckxlbmd0aDtcbiAgICB9XG5cbiAgICB2YXIgcG9zaXRpb24gPSBtYXBTb3VyY2VQb3NpdGlvbih7XG4gICAgICBzb3VyY2U6IHNvdXJjZSxcbiAgICAgIGxpbmU6IGxpbmUsXG4gICAgICBjb2x1bW46IGNvbHVtblxuICAgIH0pO1xuICAgIHN0YXRlLmN1clBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgZnJhbWUgPSBjbG9uZUNhbGxTaXRlKGZyYW1lKTtcbiAgICB2YXIgb3JpZ2luYWxGdW5jdGlvbk5hbWUgPSBmcmFtZS5nZXRGdW5jdGlvbk5hbWU7XG4gICAgZnJhbWUuZ2V0RnVuY3Rpb25OYW1lID0gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoc3RhdGUubmV4dFBvc2l0aW9uID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb25OYW1lKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc3RhdGUubmV4dFBvc2l0aW9uLm5hbWUgfHwgb3JpZ2luYWxGdW5jdGlvbk5hbWUoKTtcbiAgICB9O1xuICAgIGZyYW1lLmdldEZpbGVOYW1lID0gZnVuY3Rpb24oKSB7IHJldHVybiBwb3NpdGlvbi5zb3VyY2U7IH07XG4gICAgZnJhbWUuZ2V0TGluZU51bWJlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gcG9zaXRpb24ubGluZTsgfTtcbiAgICBmcmFtZS5nZXRDb2x1bW5OdW1iZXIgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHBvc2l0aW9uLmNvbHVtbiArIDE7IH07XG4gICAgZnJhbWUuZ2V0U2NyaXB0TmFtZU9yU291cmNlVVJMID0gZnVuY3Rpb24oKSB7IHJldHVybiBwb3NpdGlvbi5zb3VyY2U7IH07XG4gICAgcmV0dXJuIGZyYW1lO1xuICB9XG5cbiAgLy8gQ29kZSBjYWxsZWQgdXNpbmcgZXZhbCgpIG5lZWRzIHNwZWNpYWwgaGFuZGxpbmdcbiAgdmFyIG9yaWdpbiA9IGZyYW1lLmlzRXZhbCgpICYmIGZyYW1lLmdldEV2YWxPcmlnaW4oKTtcbiAgaWYgKG9yaWdpbikge1xuICAgIG9yaWdpbiA9IG1hcEV2YWxPcmlnaW4ob3JpZ2luKTtcbiAgICBmcmFtZSA9IGNsb25lQ2FsbFNpdGUoZnJhbWUpO1xuICAgIGZyYW1lLmdldEV2YWxPcmlnaW4gPSBmdW5jdGlvbigpIHsgcmV0dXJuIG9yaWdpbjsgfTtcbiAgICByZXR1cm4gZnJhbWU7XG4gIH1cblxuICAvLyBJZiB3ZSBnZXQgaGVyZSB0aGVuIHdlIHdlcmUgdW5hYmxlIHRvIGNoYW5nZSB0aGUgc291cmNlIHBvc2l0aW9uXG4gIHJldHVybiBmcmFtZTtcbn1cblxuLy8gVGhpcyBmdW5jdGlvbiBpcyBwYXJ0IG9mIHRoZSBWOCBzdGFjayB0cmFjZSBBUEksIGZvciBtb3JlIGluZm8gc2VlOlxuLy8gaHR0cHM6Ly92OC5kZXYvZG9jcy9zdGFjay10cmFjZS1hcGlcbmZ1bmN0aW9uIHByZXBhcmVTdGFja1RyYWNlKGVycm9yLCBzdGFjaykge1xuICBpZiAoZW1wdHlDYWNoZUJldHdlZW5PcGVyYXRpb25zKSB7XG4gICAgZmlsZUNvbnRlbnRzQ2FjaGUgPSB7fTtcbiAgICBzb3VyY2VNYXBDYWNoZSA9IHt9O1xuICB9XG5cbiAgdmFyIG5hbWUgPSBlcnJvci5uYW1lIHx8ICdFcnJvcic7XG4gIHZhciBtZXNzYWdlID0gZXJyb3IubWVzc2FnZSB8fCAnJztcbiAgdmFyIGVycm9yU3RyaW5nID0gbmFtZSArIFwiOiBcIiArIG1lc3NhZ2U7XG5cbiAgdmFyIHN0YXRlID0geyBuZXh0UG9zaXRpb246IG51bGwsIGN1clBvc2l0aW9uOiBudWxsIH07XG4gIHZhciBwcm9jZXNzZWRTdGFjayA9IFtdO1xuICBmb3IgKHZhciBpID0gc3RhY2subGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBwcm9jZXNzZWRTdGFjay5wdXNoKCdcXG4gICAgYXQgJyArIHdyYXBDYWxsU2l0ZShzdGFja1tpXSwgc3RhdGUpKTtcbiAgICBzdGF0ZS5uZXh0UG9zaXRpb24gPSBzdGF0ZS5jdXJQb3NpdGlvbjtcbiAgfVxuICBzdGF0ZS5jdXJQb3NpdGlvbiA9IHN0YXRlLm5leHRQb3NpdGlvbiA9IG51bGw7XG4gIHJldHVybiBlcnJvclN0cmluZyArIHByb2Nlc3NlZFN0YWNrLnJldmVyc2UoKS5qb2luKCcnKTtcbn1cblxuLy8gR2VuZXJhdGUgcG9zaXRpb24gYW5kIHNuaXBwZXQgb2Ygb3JpZ2luYWwgc291cmNlIHdpdGggcG9pbnRlclxuZnVuY3Rpb24gZ2V0RXJyb3JTb3VyY2UoZXJyb3IpIHtcbiAgdmFyIG1hdGNoID0gL1xcbiAgICBhdCBbXihdKyBcXCgoLiopOihcXGQrKTooXFxkKylcXCkvLmV4ZWMoZXJyb3Iuc3RhY2spO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgc291cmNlID0gbWF0Y2hbMV07XG4gICAgdmFyIGxpbmUgPSArbWF0Y2hbMl07XG4gICAgdmFyIGNvbHVtbiA9ICttYXRjaFszXTtcblxuICAgIC8vIFN1cHBvcnQgdGhlIGlubGluZSBzb3VyY2VDb250ZW50cyBpbnNpZGUgdGhlIHNvdXJjZSBtYXBcbiAgICB2YXIgY29udGVudHMgPSBmaWxlQ29udGVudHNDYWNoZVtzb3VyY2VdO1xuXG4gICAgLy8gU3VwcG9ydCBmaWxlcyBvbiBkaXNrXG4gICAgaWYgKCFjb250ZW50cyAmJiBmcyAmJiBmcy5leGlzdHNTeW5jKHNvdXJjZSkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnRlbnRzID0gZnMucmVhZEZpbGVTeW5jKHNvdXJjZSwgJ3V0ZjgnKTtcbiAgICAgIH0gY2F0Y2ggKGVyKSB7XG4gICAgICAgIGNvbnRlbnRzID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHRoZSBsaW5lIGZyb20gdGhlIG9yaWdpbmFsIHNvdXJjZSBjb2RlIGxpa2Ugbm9kZSBkb2VzXG4gICAgaWYgKGNvbnRlbnRzKSB7XG4gICAgICB2YXIgY29kZSA9IGNvbnRlbnRzLnNwbGl0KC8oPzpcXHJcXG58XFxyfFxcbikvKVtsaW5lIC0gMV07XG4gICAgICBpZiAoY29kZSkge1xuICAgICAgICByZXR1cm4gc291cmNlICsgJzonICsgbGluZSArICdcXG4nICsgY29kZSArICdcXG4nICtcbiAgICAgICAgICBuZXcgQXJyYXkoY29sdW1uKS5qb2luKCcgJykgKyAnXic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBwcmludEVycm9yQW5kRXhpdCAoZXJyb3IpIHtcbiAgdmFyIHNvdXJjZSA9IGdldEVycm9yU291cmNlKGVycm9yKTtcblxuICAvLyBFbnN1cmUgZXJyb3IgaXMgcHJpbnRlZCBzeW5jaHJvbm91c2x5IGFuZCBub3QgdHJ1bmNhdGVkXG4gIHZhciBzdGRlcnIgPSBnbG9iYWxQcm9jZXNzU3RkZXJyKCk7XG4gIGlmIChzdGRlcnIgJiYgc3RkZXJyLl9oYW5kbGUgJiYgc3RkZXJyLl9oYW5kbGUuc2V0QmxvY2tpbmcpIHtcbiAgICBzdGRlcnIuX2hhbmRsZS5zZXRCbG9ja2luZyh0cnVlKTtcbiAgfVxuXG4gIGlmIChzb3VyY2UpIHtcbiAgICBjb25zb2xlLmVycm9yKCk7XG4gICAgY29uc29sZS5lcnJvcihzb3VyY2UpO1xuICB9XG5cbiAgY29uc29sZS5lcnJvcihlcnJvci5zdGFjayk7XG4gIGdsb2JhbFByb2Nlc3NFeGl0KDEpO1xufVxuXG5mdW5jdGlvbiBzaGltRW1pdFVuY2F1Z2h0RXhjZXB0aW9uICgpIHtcbiAgdmFyIG9yaWdFbWl0ID0gcHJvY2Vzcy5lbWl0O1xuXG4gIHByb2Nlc3MuZW1pdCA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgaWYgKHR5cGUgPT09ICd1bmNhdWdodEV4Y2VwdGlvbicpIHtcbiAgICAgIHZhciBoYXNTdGFjayA9IChhcmd1bWVudHNbMV0gJiYgYXJndW1lbnRzWzFdLnN0YWNrKTtcbiAgICAgIHZhciBoYXNMaXN0ZW5lcnMgPSAodGhpcy5saXN0ZW5lcnModHlwZSkubGVuZ3RoID4gMCk7XG5cbiAgICAgIGlmIChoYXNTdGFjayAmJiAhaGFzTGlzdGVuZXJzKSB7XG4gICAgICAgIHJldHVybiBwcmludEVycm9yQW5kRXhpdChhcmd1bWVudHNbMV0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvcmlnRW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xufVxuXG52YXIgb3JpZ2luYWxSZXRyaWV2ZUZpbGVIYW5kbGVycyA9IHJldHJpZXZlRmlsZUhhbmRsZXJzLnNsaWNlKDApO1xudmFyIG9yaWdpbmFsUmV0cmlldmVNYXBIYW5kbGVycyA9IHJldHJpZXZlTWFwSGFuZGxlcnMuc2xpY2UoMCk7XG5cbmV4cG9ydHMud3JhcENhbGxTaXRlID0gd3JhcENhbGxTaXRlO1xuZXhwb3J0cy5nZXRFcnJvclNvdXJjZSA9IGdldEVycm9yU291cmNlO1xuZXhwb3J0cy5tYXBTb3VyY2VQb3NpdGlvbiA9IG1hcFNvdXJjZVBvc2l0aW9uO1xuZXhwb3J0cy5yZXRyaWV2ZVNvdXJjZU1hcCA9IHJldHJpZXZlU291cmNlTWFwO1xuXG5leHBvcnRzLmluc3RhbGwgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIGlmIChvcHRpb25zLmVudmlyb25tZW50KSB7XG4gICAgZW52aXJvbm1lbnQgPSBvcHRpb25zLmVudmlyb25tZW50O1xuICAgIGlmIChbXCJub2RlXCIsIFwiYnJvd3NlclwiLCBcImF1dG9cIl0uaW5kZXhPZihlbnZpcm9ubWVudCkgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbnZpcm9ubWVudCBcIiArIGVudmlyb25tZW50ICsgXCIgd2FzIHVua25vd24uIEF2YWlsYWJsZSBvcHRpb25zIGFyZSB7YXV0bywgYnJvd3Nlciwgbm9kZX1cIilcbiAgICB9XG4gIH1cblxuICAvLyBBbGxvdyBzb3VyY2VzIHRvIGJlIGZvdW5kIGJ5IG1ldGhvZHMgb3RoZXIgdGhhbiByZWFkaW5nIHRoZSBmaWxlc1xuICAvLyBkaXJlY3RseSBmcm9tIGRpc2suXG4gIGlmIChvcHRpb25zLnJldHJpZXZlRmlsZSkge1xuICAgIGlmIChvcHRpb25zLm92ZXJyaWRlUmV0cmlldmVGaWxlKSB7XG4gICAgICByZXRyaWV2ZUZpbGVIYW5kbGVycy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHJldHJpZXZlRmlsZUhhbmRsZXJzLnVuc2hpZnQob3B0aW9ucy5yZXRyaWV2ZUZpbGUpO1xuICB9XG5cbiAgLy8gQWxsb3cgc291cmNlIG1hcHMgdG8gYmUgZm91bmQgYnkgbWV0aG9kcyBvdGhlciB0aGFuIHJlYWRpbmcgdGhlIGZpbGVzXG4gIC8vIGRpcmVjdGx5IGZyb20gZGlzay5cbiAgaWYgKG9wdGlvbnMucmV0cmlldmVTb3VyY2VNYXApIHtcbiAgICBpZiAob3B0aW9ucy5vdmVycmlkZVJldHJpZXZlU291cmNlTWFwKSB7XG4gICAgICByZXRyaWV2ZU1hcEhhbmRsZXJzLmxlbmd0aCA9IDA7XG4gICAgfVxuXG4gICAgcmV0cmlldmVNYXBIYW5kbGVycy51bnNoaWZ0KG9wdGlvbnMucmV0cmlldmVTb3VyY2VNYXApO1xuICB9XG5cbiAgLy8gU3VwcG9ydCBydW50aW1lIHRyYW5zcGlsZXJzIHRoYXQgaW5jbHVkZSBpbmxpbmUgc291cmNlIG1hcHNcbiAgaWYgKG9wdGlvbnMuaG9va1JlcXVpcmUgJiYgIWlzSW5Ccm93c2VyKCkpIHtcbiAgICAvLyBVc2UgZHluYW1pY1JlcXVpcmUgdG8gYXZvaWQgaW5jbHVkaW5nIGluIGJyb3dzZXIgYnVuZGxlc1xuICAgIHZhciBNb2R1bGUgPSBkeW5hbWljUmVxdWlyZShtb2R1bGUsICdtb2R1bGUnKTtcbiAgICB2YXIgJGNvbXBpbGUgPSBNb2R1bGUucHJvdG90eXBlLl9jb21waWxlO1xuXG4gICAgaWYgKCEkY29tcGlsZS5fX3NvdXJjZU1hcFN1cHBvcnQpIHtcbiAgICAgIE1vZHVsZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbihjb250ZW50LCBmaWxlbmFtZSkge1xuICAgICAgICBmaWxlQ29udGVudHNDYWNoZVtmaWxlbmFtZV0gPSBjb250ZW50O1xuICAgICAgICBzb3VyY2VNYXBDYWNoZVtmaWxlbmFtZV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIHJldHVybiAkY29tcGlsZS5jYWxsKHRoaXMsIGNvbnRlbnQsIGZpbGVuYW1lKTtcbiAgICAgIH07XG5cbiAgICAgIE1vZHVsZS5wcm90b3R5cGUuX2NvbXBpbGUuX19zb3VyY2VNYXBTdXBwb3J0ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBDb25maWd1cmUgb3B0aW9uc1xuICBpZiAoIWVtcHR5Q2FjaGVCZXR3ZWVuT3BlcmF0aW9ucykge1xuICAgIGVtcHR5Q2FjaGVCZXR3ZWVuT3BlcmF0aW9ucyA9ICdlbXB0eUNhY2hlQmV0d2Vlbk9wZXJhdGlvbnMnIGluIG9wdGlvbnMgP1xuICAgICAgb3B0aW9ucy5lbXB0eUNhY2hlQmV0d2Vlbk9wZXJhdGlvbnMgOiBmYWxzZTtcbiAgfVxuXG4gIC8vIEluc3RhbGwgdGhlIGVycm9yIHJlZm9ybWF0dGVyXG4gIGlmICghZXJyb3JGb3JtYXR0ZXJJbnN0YWxsZWQpIHtcbiAgICBlcnJvckZvcm1hdHRlckluc3RhbGxlZCA9IHRydWU7XG4gICAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBwcmVwYXJlU3RhY2tUcmFjZTtcbiAgfVxuXG4gIGlmICghdW5jYXVnaHRTaGltSW5zdGFsbGVkKSB7XG4gICAgdmFyIGluc3RhbGxIYW5kbGVyID0gJ2hhbmRsZVVuY2F1Z2h0RXhjZXB0aW9ucycgaW4gb3B0aW9ucyA/XG4gICAgICBvcHRpb25zLmhhbmRsZVVuY2F1Z2h0RXhjZXB0aW9ucyA6IHRydWU7XG5cbiAgICAvLyBEbyBub3Qgb3ZlcnJpZGUgJ3VuY2F1Z2h0RXhjZXB0aW9uJyB3aXRoIG91ciBvd24gaGFuZGxlciBpbiBOb2RlLmpzXG4gICAgLy8gV29ya2VyIHRocmVhZHMuIFdvcmtlcnMgcGFzcyB0aGUgZXJyb3IgdG8gdGhlIG1haW4gdGhyZWFkIGFzIGFuIGV2ZW50LFxuICAgIC8vIHJhdGhlciB0aGFuIHByaW50aW5nIHNvbWV0aGluZyB0byBzdGRlcnIgYW5kIGV4aXRpbmcuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFdlIG5lZWQgdG8gdXNlIGBkeW5hbWljUmVxdWlyZWAgYmVjYXVzZSBgcmVxdWlyZWAgb24gaXQncyBvd24gd2lsbCBiZSBvcHRpbWl6ZWQgYnkgV2ViUGFjay9Ccm93c2VyaWZ5LlxuICAgICAgdmFyIHdvcmtlcl90aHJlYWRzID0gZHluYW1pY1JlcXVpcmUobW9kdWxlLCAnd29ya2VyX3RocmVhZHMnKTtcbiAgICAgIGlmICh3b3JrZXJfdGhyZWFkcy5pc01haW5UaHJlYWQgPT09IGZhbHNlKSB7XG4gICAgICAgIGluc3RhbGxIYW5kbGVyID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSBjYXRjaChlKSB7fVxuXG4gICAgLy8gUHJvdmlkZSB0aGUgb3B0aW9uIHRvIG5vdCBpbnN0YWxsIHRoZSB1bmNhdWdodCBleGNlcHRpb24gaGFuZGxlci4gVGhpcyBpc1xuICAgIC8vIHRvIHN1cHBvcnQgb3RoZXIgdW5jYXVnaHQgZXhjZXB0aW9uIGhhbmRsZXJzIChpbiB0ZXN0IGZyYW1ld29ya3MsIGZvclxuICAgIC8vIGV4YW1wbGUpLiBJZiB0aGlzIGhhbmRsZXIgaXMgbm90IGluc3RhbGxlZCBhbmQgdGhlcmUgYXJlIG5vIG90aGVyIHVuY2F1Z2h0XG4gICAgLy8gZXhjZXB0aW9uIGhhbmRsZXJzLCB1bmNhdWdodCBleGNlcHRpb25zIHdpbGwgYmUgY2F1Z2h0IGJ5IG5vZGUncyBidWlsdC1pblxuICAgIC8vIGV4Y2VwdGlvbiBoYW5kbGVyIGFuZCB0aGUgcHJvY2VzcyB3aWxsIHN0aWxsIGJlIHRlcm1pbmF0ZWQuIEhvd2V2ZXIsIHRoZVxuICAgIC8vIGdlbmVyYXRlZCBKYXZhU2NyaXB0IGNvZGUgd2lsbCBiZSBzaG93biBhYm92ZSB0aGUgc3RhY2sgdHJhY2UgaW5zdGVhZCBvZlxuICAgIC8vIHRoZSBvcmlnaW5hbCBzb3VyY2UgY29kZS5cbiAgICBpZiAoaW5zdGFsbEhhbmRsZXIgJiYgaGFzR2xvYmFsUHJvY2Vzc0V2ZW50RW1pdHRlcigpKSB7XG4gICAgICB1bmNhdWdodFNoaW1JbnN0YWxsZWQgPSB0cnVlO1xuICAgICAgc2hpbUVtaXRVbmNhdWdodEV4Y2VwdGlvbigpO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0cy5yZXNldFJldHJpZXZlSGFuZGxlcnMgPSBmdW5jdGlvbigpIHtcbiAgcmV0cmlldmVGaWxlSGFuZGxlcnMubGVuZ3RoID0gMDtcbiAgcmV0cmlldmVNYXBIYW5kbGVycy5sZW5ndGggPSAwO1xuXG4gIHJldHJpZXZlRmlsZUhhbmRsZXJzID0gb3JpZ2luYWxSZXRyaWV2ZUZpbGVIYW5kbGVycy5zbGljZSgwKTtcbiAgcmV0cmlldmVNYXBIYW5kbGVycyA9IG9yaWdpbmFsUmV0cmlldmVNYXBIYW5kbGVycy5zbGljZSgwKTtcblxuICByZXRyaWV2ZVNvdXJjZU1hcCA9IGhhbmRsZXJFeGVjKHJldHJpZXZlTWFwSGFuZGxlcnMpO1xuICByZXRyaWV2ZUZpbGUgPSBoYW5kbGVyRXhlYyhyZXRyaWV2ZUZpbGVIYW5kbGVycyk7XG59XG4iLCBudWxsLCBudWxsLCBudWxsLCAiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5mdW5jdGlvbiBnZXRQcm94eVVybChyZXFVcmwpIHtcbiAgICBsZXQgdXNpbmdTc2wgPSByZXFVcmwucHJvdG9jb2wgPT09ICdodHRwczonO1xuICAgIGxldCBwcm94eVVybDtcbiAgICBpZiAoY2hlY2tCeXBhc3MocmVxVXJsKSkge1xuICAgICAgICByZXR1cm4gcHJveHlVcmw7XG4gICAgfVxuICAgIGxldCBwcm94eVZhcjtcbiAgICBpZiAodXNpbmdTc2wpIHtcbiAgICAgICAgcHJveHlWYXIgPSBwcm9jZXNzLmVudlsnaHR0cHNfcHJveHknXSB8fCBwcm9jZXNzLmVudlsnSFRUUFNfUFJPWFknXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHByb3h5VmFyID0gcHJvY2Vzcy5lbnZbJ2h0dHBfcHJveHknXSB8fCBwcm9jZXNzLmVudlsnSFRUUF9QUk9YWSddO1xuICAgIH1cbiAgICBpZiAocHJveHlWYXIpIHtcbiAgICAgICAgcHJveHlVcmwgPSBuZXcgVVJMKHByb3h5VmFyKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb3h5VXJsO1xufVxuZXhwb3J0cy5nZXRQcm94eVVybCA9IGdldFByb3h5VXJsO1xuZnVuY3Rpb24gY2hlY2tCeXBhc3MocmVxVXJsKSB7XG4gICAgaWYgKCFyZXFVcmwuaG9zdG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBsZXQgbm9Qcm94eSA9IHByb2Nlc3MuZW52Wydub19wcm94eSddIHx8IHByb2Nlc3MuZW52WydOT19QUk9YWSddIHx8ICcnO1xuICAgIGlmICghbm9Qcm94eSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIERldGVybWluZSB0aGUgcmVxdWVzdCBwb3J0XG4gICAgbGV0IHJlcVBvcnQ7XG4gICAgaWYgKHJlcVVybC5wb3J0KSB7XG4gICAgICAgIHJlcVBvcnQgPSBOdW1iZXIocmVxVXJsLnBvcnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXFVcmwucHJvdG9jb2wgPT09ICdodHRwOicpIHtcbiAgICAgICAgcmVxUG9ydCA9IDgwO1xuICAgIH1cbiAgICBlbHNlIGlmIChyZXFVcmwucHJvdG9jb2wgPT09ICdodHRwczonKSB7XG4gICAgICAgIHJlcVBvcnQgPSA0NDM7XG4gICAgfVxuICAgIC8vIEZvcm1hdCB0aGUgcmVxdWVzdCBob3N0bmFtZSBhbmQgaG9zdG5hbWUgd2l0aCBwb3J0XG4gICAgbGV0IHVwcGVyUmVxSG9zdHMgPSBbcmVxVXJsLmhvc3RuYW1lLnRvVXBwZXJDYXNlKCldO1xuICAgIGlmICh0eXBlb2YgcmVxUG9ydCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdXBwZXJSZXFIb3N0cy5wdXNoKGAke3VwcGVyUmVxSG9zdHNbMF19OiR7cmVxUG9ydH1gKTtcbiAgICB9XG4gICAgLy8gQ29tcGFyZSByZXF1ZXN0IGhvc3QgYWdhaW5zdCBub3Byb3h5XG4gICAgZm9yIChsZXQgdXBwZXJOb1Byb3h5SXRlbSBvZiBub1Byb3h5XG4gICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgIC5tYXAoeCA9PiB4LnRyaW0oKS50b1VwcGVyQ2FzZSgpKVxuICAgICAgICAuZmlsdGVyKHggPT4geCkpIHtcbiAgICAgICAgaWYgKHVwcGVyUmVxSG9zdHMuc29tZSh4ID0+IHggPT09IHVwcGVyTm9Qcm94eUl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnRzLmNoZWNrQnlwYXNzID0gY2hlY2tCeXBhc3M7XG4iLCAiJ3VzZSBzdHJpY3QnO1xuXG52YXIgbmV0ID0gcmVxdWlyZSgnbmV0Jyk7XG52YXIgdGxzID0gcmVxdWlyZSgndGxzJyk7XG52YXIgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbnZhciBodHRwcyA9IHJlcXVpcmUoJ2h0dHBzJyk7XG52YXIgZXZlbnRzID0gcmVxdWlyZSgnZXZlbnRzJyk7XG52YXIgYXNzZXJ0ID0gcmVxdWlyZSgnYXNzZXJ0Jyk7XG52YXIgdXRpbCA9IHJlcXVpcmUoJ3V0aWwnKTtcblxuXG5leHBvcnRzLmh0dHBPdmVySHR0cCA9IGh0dHBPdmVySHR0cDtcbmV4cG9ydHMuaHR0cHNPdmVySHR0cCA9IGh0dHBzT3Zlckh0dHA7XG5leHBvcnRzLmh0dHBPdmVySHR0cHMgPSBodHRwT3Zlckh0dHBzO1xuZXhwb3J0cy5odHRwc092ZXJIdHRwcyA9IGh0dHBzT3Zlckh0dHBzO1xuXG5cbmZ1bmN0aW9uIGh0dHBPdmVySHR0cChvcHRpb25zKSB7XG4gIHZhciBhZ2VudCA9IG5ldyBUdW5uZWxpbmdBZ2VudChvcHRpb25zKTtcbiAgYWdlbnQucmVxdWVzdCA9IGh0dHAucmVxdWVzdDtcbiAgcmV0dXJuIGFnZW50O1xufVxuXG5mdW5jdGlvbiBodHRwc092ZXJIdHRwKG9wdGlvbnMpIHtcbiAgdmFyIGFnZW50ID0gbmV3IFR1bm5lbGluZ0FnZW50KG9wdGlvbnMpO1xuICBhZ2VudC5yZXF1ZXN0ID0gaHR0cC5yZXF1ZXN0O1xuICBhZ2VudC5jcmVhdGVTb2NrZXQgPSBjcmVhdGVTZWN1cmVTb2NrZXQ7XG4gIGFnZW50LmRlZmF1bHRQb3J0ID0gNDQzO1xuICByZXR1cm4gYWdlbnQ7XG59XG5cbmZ1bmN0aW9uIGh0dHBPdmVySHR0cHMob3B0aW9ucykge1xuICB2YXIgYWdlbnQgPSBuZXcgVHVubmVsaW5nQWdlbnQob3B0aW9ucyk7XG4gIGFnZW50LnJlcXVlc3QgPSBodHRwcy5yZXF1ZXN0O1xuICByZXR1cm4gYWdlbnQ7XG59XG5cbmZ1bmN0aW9uIGh0dHBzT3Zlckh0dHBzKG9wdGlvbnMpIHtcbiAgdmFyIGFnZW50ID0gbmV3IFR1bm5lbGluZ0FnZW50KG9wdGlvbnMpO1xuICBhZ2VudC5yZXF1ZXN0ID0gaHR0cHMucmVxdWVzdDtcbiAgYWdlbnQuY3JlYXRlU29ja2V0ID0gY3JlYXRlU2VjdXJlU29ja2V0O1xuICBhZ2VudC5kZWZhdWx0UG9ydCA9IDQ0MztcbiAgcmV0dXJuIGFnZW50O1xufVxuXG5cbmZ1bmN0aW9uIFR1bm5lbGluZ0FnZW50KG9wdGlvbnMpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBzZWxmLnByb3h5T3B0aW9ucyA9IHNlbGYub3B0aW9ucy5wcm94eSB8fCB7fTtcbiAgc2VsZi5tYXhTb2NrZXRzID0gc2VsZi5vcHRpb25zLm1heFNvY2tldHMgfHwgaHR0cC5BZ2VudC5kZWZhdWx0TWF4U29ja2V0cztcbiAgc2VsZi5yZXF1ZXN0cyA9IFtdO1xuICBzZWxmLnNvY2tldHMgPSBbXTtcblxuICBzZWxmLm9uKCdmcmVlJywgZnVuY3Rpb24gb25GcmVlKHNvY2tldCwgaG9zdCwgcG9ydCwgbG9jYWxBZGRyZXNzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0b09wdGlvbnMoaG9zdCwgcG9ydCwgbG9jYWxBZGRyZXNzKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gc2VsZi5yZXF1ZXN0cy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xuICAgICAgdmFyIHBlbmRpbmcgPSBzZWxmLnJlcXVlc3RzW2ldO1xuICAgICAgaWYgKHBlbmRpbmcuaG9zdCA9PT0gb3B0aW9ucy5ob3N0ICYmIHBlbmRpbmcucG9ydCA9PT0gb3B0aW9ucy5wb3J0KSB7XG4gICAgICAgIC8vIERldGVjdCB0aGUgcmVxdWVzdCB0byBjb25uZWN0IHNhbWUgb3JpZ2luIHNlcnZlcixcbiAgICAgICAgLy8gcmV1c2UgdGhlIGNvbm5lY3Rpb24uXG4gICAgICAgIHNlbGYucmVxdWVzdHMuc3BsaWNlKGksIDEpO1xuICAgICAgICBwZW5kaW5nLnJlcXVlc3Qub25Tb2NrZXQoc29ja2V0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBzb2NrZXQuZGVzdHJveSgpO1xuICAgIHNlbGYucmVtb3ZlU29ja2V0KHNvY2tldCk7XG4gIH0pO1xufVxudXRpbC5pbmhlcml0cyhUdW5uZWxpbmdBZ2VudCwgZXZlbnRzLkV2ZW50RW1pdHRlcik7XG5cblR1bm5lbGluZ0FnZW50LnByb3RvdHlwZS5hZGRSZXF1ZXN0ID0gZnVuY3Rpb24gYWRkUmVxdWVzdChyZXEsIGhvc3QsIHBvcnQsIGxvY2FsQWRkcmVzcykge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHtyZXF1ZXN0OiByZXF9LCBzZWxmLm9wdGlvbnMsIHRvT3B0aW9ucyhob3N0LCBwb3J0LCBsb2NhbEFkZHJlc3MpKTtcblxuICBpZiAoc2VsZi5zb2NrZXRzLmxlbmd0aCA+PSB0aGlzLm1heFNvY2tldHMpIHtcbiAgICAvLyBXZSBhcmUgb3ZlciBsaW1pdCBzbyB3ZSdsbCBhZGQgaXQgdG8gdGhlIHF1ZXVlLlxuICAgIHNlbGYucmVxdWVzdHMucHVzaChvcHRpb25zKTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBJZiB3ZSBhcmUgdW5kZXIgbWF4U29ja2V0cyBjcmVhdGUgYSBuZXcgb25lLlxuICBzZWxmLmNyZWF0ZVNvY2tldChvcHRpb25zLCBmdW5jdGlvbihzb2NrZXQpIHtcbiAgICBzb2NrZXQub24oJ2ZyZWUnLCBvbkZyZWUpO1xuICAgIHNvY2tldC5vbignY2xvc2UnLCBvbkNsb3NlT3JSZW1vdmUpO1xuICAgIHNvY2tldC5vbignYWdlbnRSZW1vdmUnLCBvbkNsb3NlT3JSZW1vdmUpO1xuICAgIHJlcS5vblNvY2tldChzb2NrZXQpO1xuXG4gICAgZnVuY3Rpb24gb25GcmVlKCkge1xuICAgICAgc2VsZi5lbWl0KCdmcmVlJywgc29ja2V0LCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbkNsb3NlT3JSZW1vdmUoZXJyKSB7XG4gICAgICBzZWxmLnJlbW92ZVNvY2tldChzb2NrZXQpO1xuICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdmcmVlJywgb25GcmVlKTtcbiAgICAgIHNvY2tldC5yZW1vdmVMaXN0ZW5lcignY2xvc2UnLCBvbkNsb3NlT3JSZW1vdmUpO1xuICAgICAgc29ja2V0LnJlbW92ZUxpc3RlbmVyKCdhZ2VudFJlbW92ZScsIG9uQ2xvc2VPclJlbW92ZSk7XG4gICAgfVxuICB9KTtcbn07XG5cblR1bm5lbGluZ0FnZW50LnByb3RvdHlwZS5jcmVhdGVTb2NrZXQgPSBmdW5jdGlvbiBjcmVhdGVTb2NrZXQob3B0aW9ucywgY2IpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgcGxhY2Vob2xkZXIgPSB7fTtcbiAgc2VsZi5zb2NrZXRzLnB1c2gocGxhY2Vob2xkZXIpO1xuXG4gIHZhciBjb25uZWN0T3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh7fSwgc2VsZi5wcm94eU9wdGlvbnMsIHtcbiAgICBtZXRob2Q6ICdDT05ORUNUJyxcbiAgICBwYXRoOiBvcHRpb25zLmhvc3QgKyAnOicgKyBvcHRpb25zLnBvcnQsXG4gICAgYWdlbnQ6IGZhbHNlLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgIGhvc3Q6IG9wdGlvbnMuaG9zdCArICc6JyArIG9wdGlvbnMucG9ydFxuICAgIH1cbiAgfSk7XG4gIGlmIChvcHRpb25zLmxvY2FsQWRkcmVzcykge1xuICAgIGNvbm5lY3RPcHRpb25zLmxvY2FsQWRkcmVzcyA9IG9wdGlvbnMubG9jYWxBZGRyZXNzO1xuICB9XG4gIGlmIChjb25uZWN0T3B0aW9ucy5wcm94eUF1dGgpIHtcbiAgICBjb25uZWN0T3B0aW9ucy5oZWFkZXJzID0gY29ubmVjdE9wdGlvbnMuaGVhZGVycyB8fCB7fTtcbiAgICBjb25uZWN0T3B0aW9ucy5oZWFkZXJzWydQcm94eS1BdXRob3JpemF0aW9uJ10gPSAnQmFzaWMgJyArXG4gICAgICAgIG5ldyBCdWZmZXIoY29ubmVjdE9wdGlvbnMucHJveHlBdXRoKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBkZWJ1ZygnbWFraW5nIENPTk5FQ1QgcmVxdWVzdCcpO1xuICB2YXIgY29ubmVjdFJlcSA9IHNlbGYucmVxdWVzdChjb25uZWN0T3B0aW9ucyk7XG4gIGNvbm5lY3RSZXEudXNlQ2h1bmtlZEVuY29kaW5nQnlEZWZhdWx0ID0gZmFsc2U7IC8vIGZvciB2MC42XG4gIGNvbm5lY3RSZXEub25jZSgncmVzcG9uc2UnLCBvblJlc3BvbnNlKTsgLy8gZm9yIHYwLjZcbiAgY29ubmVjdFJlcS5vbmNlKCd1cGdyYWRlJywgb25VcGdyYWRlKTsgICAvLyBmb3IgdjAuNlxuICBjb25uZWN0UmVxLm9uY2UoJ2Nvbm5lY3QnLCBvbkNvbm5lY3QpOyAgIC8vIGZvciB2MC43IG9yIGxhdGVyXG4gIGNvbm5lY3RSZXEub25jZSgnZXJyb3InLCBvbkVycm9yKTtcbiAgY29ubmVjdFJlcS5lbmQoKTtcblxuICBmdW5jdGlvbiBvblJlc3BvbnNlKHJlcykge1xuICAgIC8vIFZlcnkgaGFja3kuIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIGF2b2lkIGh0dHAtcGFyc2VyIGxlYWtzLlxuICAgIHJlcy51cGdyYWRlID0gdHJ1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uVXBncmFkZShyZXMsIHNvY2tldCwgaGVhZCkge1xuICAgIC8vIEhhY2t5LlxuICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24oKSB7XG4gICAgICBvbkNvbm5lY3QocmVzLCBzb2NrZXQsIGhlYWQpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gb25Db25uZWN0KHJlcywgc29ja2V0LCBoZWFkKSB7XG4gICAgY29ubmVjdFJlcS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICBzb2NrZXQucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAocmVzLnN0YXR1c0NvZGUgIT09IDIwMCkge1xuICAgICAgZGVidWcoJ3R1bm5lbGluZyBzb2NrZXQgY291bGQgbm90IGJlIGVzdGFibGlzaGVkLCBzdGF0dXNDb2RlPSVkJyxcbiAgICAgICAgcmVzLnN0YXR1c0NvZGUpO1xuICAgICAgc29ja2V0LmRlc3Ryb3koKTtcbiAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcigndHVubmVsaW5nIHNvY2tldCBjb3VsZCBub3QgYmUgZXN0YWJsaXNoZWQsICcgK1xuICAgICAgICAnc3RhdHVzQ29kZT0nICsgcmVzLnN0YXR1c0NvZGUpO1xuICAgICAgZXJyb3IuY29kZSA9ICdFQ09OTlJFU0VUJztcbiAgICAgIG9wdGlvbnMucmVxdWVzdC5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICAgIHNlbGYucmVtb3ZlU29ja2V0KHBsYWNlaG9sZGVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGhlYWQubGVuZ3RoID4gMCkge1xuICAgICAgZGVidWcoJ2dvdCBpbGxlZ2FsIHJlc3BvbnNlIGJvZHkgZnJvbSBwcm94eScpO1xuICAgICAgc29ja2V0LmRlc3Ryb3koKTtcbiAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignZ290IGlsbGVnYWwgcmVzcG9uc2UgYm9keSBmcm9tIHByb3h5Jyk7XG4gICAgICBlcnJvci5jb2RlID0gJ0VDT05OUkVTRVQnO1xuICAgICAgb3B0aW9ucy5yZXF1ZXN0LmVtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgICAgc2VsZi5yZW1vdmVTb2NrZXQocGxhY2Vob2xkZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZWJ1ZygndHVubmVsaW5nIGNvbm5lY3Rpb24gaGFzIGVzdGFibGlzaGVkJyk7XG4gICAgc2VsZi5zb2NrZXRzW3NlbGYuc29ja2V0cy5pbmRleE9mKHBsYWNlaG9sZGVyKV0gPSBzb2NrZXQ7XG4gICAgcmV0dXJuIGNiKHNvY2tldCk7XG4gIH1cblxuICBmdW5jdGlvbiBvbkVycm9yKGNhdXNlKSB7XG4gICAgY29ubmVjdFJlcS5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGRlYnVnKCd0dW5uZWxpbmcgc29ja2V0IGNvdWxkIG5vdCBiZSBlc3RhYmxpc2hlZCwgY2F1c2U9JXNcXG4nLFxuICAgICAgICAgIGNhdXNlLm1lc3NhZ2UsIGNhdXNlLnN0YWNrKTtcbiAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ3R1bm5lbGluZyBzb2NrZXQgY291bGQgbm90IGJlIGVzdGFibGlzaGVkLCAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NhdXNlPScgKyBjYXVzZS5tZXNzYWdlKTtcbiAgICBlcnJvci5jb2RlID0gJ0VDT05OUkVTRVQnO1xuICAgIG9wdGlvbnMucmVxdWVzdC5lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICBzZWxmLnJlbW92ZVNvY2tldChwbGFjZWhvbGRlcik7XG4gIH1cbn07XG5cblR1bm5lbGluZ0FnZW50LnByb3RvdHlwZS5yZW1vdmVTb2NrZXQgPSBmdW5jdGlvbiByZW1vdmVTb2NrZXQoc29ja2V0KSB7XG4gIHZhciBwb3MgPSB0aGlzLnNvY2tldHMuaW5kZXhPZihzb2NrZXQpXG4gIGlmIChwb3MgPT09IC0xKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuc29ja2V0cy5zcGxpY2UocG9zLCAxKTtcblxuICB2YXIgcGVuZGluZyA9IHRoaXMucmVxdWVzdHMuc2hpZnQoKTtcbiAgaWYgKHBlbmRpbmcpIHtcbiAgICAvLyBJZiB3ZSBoYXZlIHBlbmRpbmcgcmVxdWVzdHMgYW5kIGEgc29ja2V0IGdldHMgY2xvc2VkIGEgbmV3IG9uZVxuICAgIC8vIG5lZWRzIHRvIGJlIGNyZWF0ZWQgdG8gdGFrZSBvdmVyIGluIHRoZSBwb29sIGZvciB0aGUgb25lIHRoYXQgY2xvc2VkLlxuICAgIHRoaXMuY3JlYXRlU29ja2V0KHBlbmRpbmcsIGZ1bmN0aW9uKHNvY2tldCkge1xuICAgICAgcGVuZGluZy5yZXF1ZXN0Lm9uU29ja2V0KHNvY2tldCk7XG4gICAgfSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVNlY3VyZVNvY2tldChvcHRpb25zLCBjYikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIFR1bm5lbGluZ0FnZW50LnByb3RvdHlwZS5jcmVhdGVTb2NrZXQuY2FsbChzZWxmLCBvcHRpb25zLCBmdW5jdGlvbihzb2NrZXQpIHtcbiAgICB2YXIgaG9zdEhlYWRlciA9IG9wdGlvbnMucmVxdWVzdC5nZXRIZWFkZXIoJ2hvc3QnKTtcbiAgICB2YXIgdGxzT3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh7fSwgc2VsZi5vcHRpb25zLCB7XG4gICAgICBzb2NrZXQ6IHNvY2tldCxcbiAgICAgIHNlcnZlcm5hbWU6IGhvc3RIZWFkZXIgPyBob3N0SGVhZGVyLnJlcGxhY2UoLzouKiQvLCAnJykgOiBvcHRpb25zLmhvc3RcbiAgICB9KTtcblxuICAgIC8vIDAgaXMgZHVtbXkgcG9ydCBmb3IgdjAuNlxuICAgIHZhciBzZWN1cmVTb2NrZXQgPSB0bHMuY29ubmVjdCgwLCB0bHNPcHRpb25zKTtcbiAgICBzZWxmLnNvY2tldHNbc2VsZi5zb2NrZXRzLmluZGV4T2Yoc29ja2V0KV0gPSBzZWN1cmVTb2NrZXQ7XG4gICAgY2Ioc2VjdXJlU29ja2V0KTtcbiAgfSk7XG59XG5cblxuZnVuY3Rpb24gdG9PcHRpb25zKGhvc3QsIHBvcnQsIGxvY2FsQWRkcmVzcykge1xuICBpZiAodHlwZW9mIGhvc3QgPT09ICdzdHJpbmcnKSB7IC8vIHNpbmNlIHYwLjEwXG4gICAgcmV0dXJuIHtcbiAgICAgIGhvc3Q6IGhvc3QsXG4gICAgICBwb3J0OiBwb3J0LFxuICAgICAgbG9jYWxBZGRyZXNzOiBsb2NhbEFkZHJlc3NcbiAgICB9O1xuICB9XG4gIHJldHVybiBob3N0OyAvLyBmb3IgdjAuMTEgb3IgbGF0ZXJcbn1cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XG4gICAgdmFyIG92ZXJyaWRlcyA9IGFyZ3VtZW50c1tpXTtcbiAgICBpZiAodHlwZW9mIG92ZXJyaWRlcyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob3ZlcnJpZGVzKTtcbiAgICAgIGZvciAodmFyIGogPSAwLCBrZXlMZW4gPSBrZXlzLmxlbmd0aDsgaiA8IGtleUxlbjsgKytqKSB7XG4gICAgICAgIHZhciBrID0ga2V5c1tqXTtcbiAgICAgICAgaWYgKG92ZXJyaWRlc1trXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgdGFyZ2V0W2tdID0gb3ZlcnJpZGVzW2tdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cblxudmFyIGRlYnVnO1xuaWYgKHByb2Nlc3MuZW52Lk5PREVfREVCVUcgJiYgL1xcYnR1bm5lbFxcYi8udGVzdChwcm9jZXNzLmVudi5OT0RFX0RFQlVHKSkge1xuICBkZWJ1ZyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICBhcmdzWzBdID0gJ1RVTk5FTDogJyArIGFyZ3NbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MudW5zaGlmdCgnVFVOTkVMOicpO1xuICAgIH1cbiAgICBjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsIGFyZ3MpO1xuICB9XG59IGVsc2Uge1xuICBkZWJ1ZyA9IGZ1bmN0aW9uKCkge307XG59XG5leHBvcnRzLmRlYnVnID0gZGVidWc7IC8vIGZvciB0ZXN0XG4iLCAibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi90dW5uZWwnKTtcbiIsICJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNvbnN0IGh0dHAgPSByZXF1aXJlKFwiaHR0cFwiKTtcbmNvbnN0IGh0dHBzID0gcmVxdWlyZShcImh0dHBzXCIpO1xuY29uc3QgcG0gPSByZXF1aXJlKFwiLi9wcm94eVwiKTtcbmxldCB0dW5uZWw7XG52YXIgSHR0cENvZGVzO1xuKGZ1bmN0aW9uIChIdHRwQ29kZXMpIHtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiT0tcIl0gPSAyMDBdID0gXCJPS1wiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJNdWx0aXBsZUNob2ljZXNcIl0gPSAzMDBdID0gXCJNdWx0aXBsZUNob2ljZXNcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiTW92ZWRQZXJtYW5lbnRseVwiXSA9IDMwMV0gPSBcIk1vdmVkUGVybWFuZW50bHlcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiUmVzb3VyY2VNb3ZlZFwiXSA9IDMwMl0gPSBcIlJlc291cmNlTW92ZWRcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiU2VlT3RoZXJcIl0gPSAzMDNdID0gXCJTZWVPdGhlclwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJOb3RNb2RpZmllZFwiXSA9IDMwNF0gPSBcIk5vdE1vZGlmaWVkXCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIlVzZVByb3h5XCJdID0gMzA1XSA9IFwiVXNlUHJveHlcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiU3dpdGNoUHJveHlcIl0gPSAzMDZdID0gXCJTd2l0Y2hQcm94eVwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJUZW1wb3JhcnlSZWRpcmVjdFwiXSA9IDMwN10gPSBcIlRlbXBvcmFyeVJlZGlyZWN0XCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIlBlcm1hbmVudFJlZGlyZWN0XCJdID0gMzA4XSA9IFwiUGVybWFuZW50UmVkaXJlY3RcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiQmFkUmVxdWVzdFwiXSA9IDQwMF0gPSBcIkJhZFJlcXVlc3RcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiVW5hdXRob3JpemVkXCJdID0gNDAxXSA9IFwiVW5hdXRob3JpemVkXCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIlBheW1lbnRSZXF1aXJlZFwiXSA9IDQwMl0gPSBcIlBheW1lbnRSZXF1aXJlZFwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJGb3JiaWRkZW5cIl0gPSA0MDNdID0gXCJGb3JiaWRkZW5cIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiTm90Rm91bmRcIl0gPSA0MDRdID0gXCJOb3RGb3VuZFwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJNZXRob2ROb3RBbGxvd2VkXCJdID0gNDA1XSA9IFwiTWV0aG9kTm90QWxsb3dlZFwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJOb3RBY2NlcHRhYmxlXCJdID0gNDA2XSA9IFwiTm90QWNjZXB0YWJsZVwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJQcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWRcIl0gPSA0MDddID0gXCJQcm94eUF1dGhlbnRpY2F0aW9uUmVxdWlyZWRcIjtcbiAgICBIdHRwQ29kZXNbSHR0cENvZGVzW1wiUmVxdWVzdFRpbWVvdXRcIl0gPSA0MDhdID0gXCJSZXF1ZXN0VGltZW91dFwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJDb25mbGljdFwiXSA9IDQwOV0gPSBcIkNvbmZsaWN0XCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIkdvbmVcIl0gPSA0MTBdID0gXCJHb25lXCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIlRvb01hbnlSZXF1ZXN0c1wiXSA9IDQyOV0gPSBcIlRvb01hbnlSZXF1ZXN0c1wiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJJbnRlcm5hbFNlcnZlckVycm9yXCJdID0gNTAwXSA9IFwiSW50ZXJuYWxTZXJ2ZXJFcnJvclwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJOb3RJbXBsZW1lbnRlZFwiXSA9IDUwMV0gPSBcIk5vdEltcGxlbWVudGVkXCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIkJhZEdhdGV3YXlcIl0gPSA1MDJdID0gXCJCYWRHYXRld2F5XCI7XG4gICAgSHR0cENvZGVzW0h0dHBDb2Rlc1tcIlNlcnZpY2VVbmF2YWlsYWJsZVwiXSA9IDUwM10gPSBcIlNlcnZpY2VVbmF2YWlsYWJsZVwiO1xuICAgIEh0dHBDb2Rlc1tIdHRwQ29kZXNbXCJHYXRld2F5VGltZW91dFwiXSA9IDUwNF0gPSBcIkdhdGV3YXlUaW1lb3V0XCI7XG59KShIdHRwQ29kZXMgPSBleHBvcnRzLkh0dHBDb2RlcyB8fCAoZXhwb3J0cy5IdHRwQ29kZXMgPSB7fSkpO1xudmFyIEhlYWRlcnM7XG4oZnVuY3Rpb24gKEhlYWRlcnMpIHtcbiAgICBIZWFkZXJzW1wiQWNjZXB0XCJdID0gXCJhY2NlcHRcIjtcbiAgICBIZWFkZXJzW1wiQ29udGVudFR5cGVcIl0gPSBcImNvbnRlbnQtdHlwZVwiO1xufSkoSGVhZGVycyA9IGV4cG9ydHMuSGVhZGVycyB8fCAoZXhwb3J0cy5IZWFkZXJzID0ge30pKTtcbnZhciBNZWRpYVR5cGVzO1xuKGZ1bmN0aW9uIChNZWRpYVR5cGVzKSB7XG4gICAgTWVkaWFUeXBlc1tcIkFwcGxpY2F0aW9uSnNvblwiXSA9IFwiYXBwbGljYXRpb24vanNvblwiO1xufSkoTWVkaWFUeXBlcyA9IGV4cG9ydHMuTWVkaWFUeXBlcyB8fCAoZXhwb3J0cy5NZWRpYVR5cGVzID0ge30pKTtcbi8qKlxuICogUmV0dXJucyB0aGUgcHJveHkgVVJMLCBkZXBlbmRpbmcgdXBvbiB0aGUgc3VwcGxpZWQgdXJsIGFuZCBwcm94eSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKiBAcGFyYW0gc2VydmVyVXJsICBUaGUgc2VydmVyIFVSTCB3aGVyZSB0aGUgcmVxdWVzdCB3aWxsIGJlIHNlbnQuIEZvciBleGFtcGxlLCBodHRwczovL2FwaS5naXRodWIuY29tXG4gKi9cbmZ1bmN0aW9uIGdldFByb3h5VXJsKHNlcnZlclVybCkge1xuICAgIGxldCBwcm94eVVybCA9IHBtLmdldFByb3h5VXJsKG5ldyBVUkwoc2VydmVyVXJsKSk7XG4gICAgcmV0dXJuIHByb3h5VXJsID8gcHJveHlVcmwuaHJlZiA6ICcnO1xufVxuZXhwb3J0cy5nZXRQcm94eVVybCA9IGdldFByb3h5VXJsO1xuY29uc3QgSHR0cFJlZGlyZWN0Q29kZXMgPSBbXG4gICAgSHR0cENvZGVzLk1vdmVkUGVybWFuZW50bHksXG4gICAgSHR0cENvZGVzLlJlc291cmNlTW92ZWQsXG4gICAgSHR0cENvZGVzLlNlZU90aGVyLFxuICAgIEh0dHBDb2Rlcy5UZW1wb3JhcnlSZWRpcmVjdCxcbiAgICBIdHRwQ29kZXMuUGVybWFuZW50UmVkaXJlY3Rcbl07XG5jb25zdCBIdHRwUmVzcG9uc2VSZXRyeUNvZGVzID0gW1xuICAgIEh0dHBDb2Rlcy5CYWRHYXRld2F5LFxuICAgIEh0dHBDb2Rlcy5TZXJ2aWNlVW5hdmFpbGFibGUsXG4gICAgSHR0cENvZGVzLkdhdGV3YXlUaW1lb3V0XG5dO1xuY29uc3QgUmV0cnlhYmxlSHR0cFZlcmJzID0gWydPUFRJT05TJywgJ0dFVCcsICdERUxFVEUnLCAnSEVBRCddO1xuY29uc3QgRXhwb25lbnRpYWxCYWNrb2ZmQ2VpbGluZyA9IDEwO1xuY29uc3QgRXhwb25lbnRpYWxCYWNrb2ZmVGltZVNsaWNlID0gNTtcbmNsYXNzIEh0dHBDbGllbnRFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlKSB7XG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xuICAgICAgICB0aGlzLm5hbWUgPSAnSHR0cENsaWVudEVycm9yJztcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEh0dHBDbGllbnRFcnJvci5wcm90b3R5cGUpO1xuICAgIH1cbn1cbmV4cG9ydHMuSHR0cENsaWVudEVycm9yID0gSHR0cENsaWVudEVycm9yO1xuY2xhc3MgSHR0cENsaWVudFJlc3BvbnNlIHtcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgfVxuICAgIHJlYWRCb2R5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IG91dHB1dCA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZS5vbignZGF0YScsIChjaHVuaykgPT4ge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IEJ1ZmZlci5jb25jYXQoW291dHB1dCwgY2h1bmtdKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShvdXRwdXQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0cy5IdHRwQ2xpZW50UmVzcG9uc2UgPSBIdHRwQ2xpZW50UmVzcG9uc2U7XG5mdW5jdGlvbiBpc0h0dHBzKHJlcXVlc3RVcmwpIHtcbiAgICBsZXQgcGFyc2VkVXJsID0gbmV3IFVSTChyZXF1ZXN0VXJsKTtcbiAgICByZXR1cm4gcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6Jztcbn1cbmV4cG9ydHMuaXNIdHRwcyA9IGlzSHR0cHM7XG5jbGFzcyBIdHRwQ2xpZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih1c2VyQWdlbnQsIGhhbmRsZXJzLCByZXF1ZXN0T3B0aW9ucykge1xuICAgICAgICB0aGlzLl9pZ25vcmVTc2xFcnJvciA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9hbGxvd1JlZGlyZWN0cyA9IHRydWU7XG4gICAgICAgIHRoaXMuX2FsbG93UmVkaXJlY3REb3duZ3JhZGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbWF4UmVkaXJlY3RzID0gNTA7XG4gICAgICAgIHRoaXMuX2FsbG93UmV0cmllcyA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tYXhSZXRyaWVzID0gMTtcbiAgICAgICAgdGhpcy5fa2VlcEFsaXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudXNlckFnZW50ID0gdXNlckFnZW50O1xuICAgICAgICB0aGlzLmhhbmRsZXJzID0gaGFuZGxlcnMgfHwgW107XG4gICAgICAgIHRoaXMucmVxdWVzdE9wdGlvbnMgPSByZXF1ZXN0T3B0aW9ucztcbiAgICAgICAgaWYgKHJlcXVlc3RPcHRpb25zKSB7XG4gICAgICAgICAgICBpZiAocmVxdWVzdE9wdGlvbnMuaWdub3JlU3NsRXJyb3IgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2lnbm9yZVNzbEVycm9yID0gcmVxdWVzdE9wdGlvbnMuaWdub3JlU3NsRXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9zb2NrZXRUaW1lb3V0ID0gcmVxdWVzdE9wdGlvbnMuc29ja2V0VGltZW91dDtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0T3B0aW9ucy5hbGxvd1JlZGlyZWN0cyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWxsb3dSZWRpcmVjdHMgPSByZXF1ZXN0T3B0aW9ucy5hbGxvd1JlZGlyZWN0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0T3B0aW9ucy5hbGxvd1JlZGlyZWN0RG93bmdyYWRlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hbGxvd1JlZGlyZWN0RG93bmdyYWRlID0gcmVxdWVzdE9wdGlvbnMuYWxsb3dSZWRpcmVjdERvd25ncmFkZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXF1ZXN0T3B0aW9ucy5tYXhSZWRpcmVjdHMgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX21heFJlZGlyZWN0cyA9IE1hdGgubWF4KHJlcXVlc3RPcHRpb25zLm1heFJlZGlyZWN0cywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdE9wdGlvbnMua2VlcEFsaXZlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9rZWVwQWxpdmUgPSByZXF1ZXN0T3B0aW9ucy5rZWVwQWxpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdE9wdGlvbnMuYWxsb3dSZXRyaWVzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hbGxvd1JldHJpZXMgPSByZXF1ZXN0T3B0aW9ucy5hbGxvd1JldHJpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVxdWVzdE9wdGlvbnMubWF4UmV0cmllcyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWF4UmV0cmllcyA9IHJlcXVlc3RPcHRpb25zLm1heFJldHJpZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3B0aW9ucyhyZXF1ZXN0VXJsLCBhZGRpdGlvbmFsSGVhZGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KCdPUFRJT05TJywgcmVxdWVzdFVybCwgbnVsbCwgYWRkaXRpb25hbEhlYWRlcnMgfHwge30pO1xuICAgIH1cbiAgICBnZXQocmVxdWVzdFVybCwgYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnR0VUJywgcmVxdWVzdFVybCwgbnVsbCwgYWRkaXRpb25hbEhlYWRlcnMgfHwge30pO1xuICAgIH1cbiAgICBkZWwocmVxdWVzdFVybCwgYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnREVMRVRFJywgcmVxdWVzdFVybCwgbnVsbCwgYWRkaXRpb25hbEhlYWRlcnMgfHwge30pO1xuICAgIH1cbiAgICBwb3N0KHJlcXVlc3RVcmwsIGRhdGEsIGFkZGl0aW9uYWxIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BPU1QnLCByZXF1ZXN0VXJsLCBkYXRhLCBhZGRpdGlvbmFsSGVhZGVycyB8fCB7fSk7XG4gICAgfVxuICAgIHBhdGNoKHJlcXVlc3RVcmwsIGRhdGEsIGFkZGl0aW9uYWxIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ1BBVENIJywgcmVxdWVzdFVybCwgZGF0YSwgYWRkaXRpb25hbEhlYWRlcnMgfHwge30pO1xuICAgIH1cbiAgICBwdXQocmVxdWVzdFVybCwgZGF0YSwgYWRkaXRpb25hbEhlYWRlcnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVxdWVzdCgnUFVUJywgcmVxdWVzdFVybCwgZGF0YSwgYWRkaXRpb25hbEhlYWRlcnMgfHwge30pO1xuICAgIH1cbiAgICBoZWFkKHJlcXVlc3RVcmwsIGFkZGl0aW9uYWxIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlcXVlc3QoJ0hFQUQnLCByZXF1ZXN0VXJsLCBudWxsLCBhZGRpdGlvbmFsSGVhZGVycyB8fCB7fSk7XG4gICAgfVxuICAgIHNlbmRTdHJlYW0odmVyYiwgcmVxdWVzdFVybCwgc3RyZWFtLCBhZGRpdGlvbmFsSGVhZGVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KHZlcmIsIHJlcXVlc3RVcmwsIHN0cmVhbSwgYWRkaXRpb25hbEhlYWRlcnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgdHlwZWQgb2JqZWN0IGZyb20gYW4gZW5kcG9pbnRcbiAgICAgKiBCZSBhd2FyZSB0aGF0IG5vdCBmb3VuZCByZXR1cm5zIGEgbnVsbC4gIE90aGVyIGVycm9ycyAoNHh4LCA1eHgpIHJlamVjdCB0aGUgcHJvbWlzZVxuICAgICAqL1xuICAgIGFzeW5jIGdldEpzb24ocmVxdWVzdFVybCwgYWRkaXRpb25hbEhlYWRlcnMgPSB7fSkge1xuICAgICAgICBhZGRpdGlvbmFsSGVhZGVyc1tIZWFkZXJzLkFjY2VwdF0gPSB0aGlzLl9nZXRFeGlzdGluZ09yRGVmYXVsdEhlYWRlcihhZGRpdGlvbmFsSGVhZGVycywgSGVhZGVycy5BY2NlcHQsIE1lZGlhVHlwZXMuQXBwbGljYXRpb25Kc29uKTtcbiAgICAgICAgbGV0IHJlcyA9IGF3YWl0IHRoaXMuZ2V0KHJlcXVlc3RVcmwsIGFkZGl0aW9uYWxIZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMsIHRoaXMucmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBwb3N0SnNvbihyZXF1ZXN0VXJsLCBvYmosIGFkZGl0aW9uYWxIZWFkZXJzID0ge30pIHtcbiAgICAgICAgbGV0IGRhdGEgPSBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgICAgICBhZGRpdGlvbmFsSGVhZGVyc1tIZWFkZXJzLkFjY2VwdF0gPSB0aGlzLl9nZXRFeGlzdGluZ09yRGVmYXVsdEhlYWRlcihhZGRpdGlvbmFsSGVhZGVycywgSGVhZGVycy5BY2NlcHQsIE1lZGlhVHlwZXMuQXBwbGljYXRpb25Kc29uKTtcbiAgICAgICAgYWRkaXRpb25hbEhlYWRlcnNbSGVhZGVycy5Db250ZW50VHlwZV0gPSB0aGlzLl9nZXRFeGlzdGluZ09yRGVmYXVsdEhlYWRlcihhZGRpdGlvbmFsSGVhZGVycywgSGVhZGVycy5Db250ZW50VHlwZSwgTWVkaWFUeXBlcy5BcHBsaWNhdGlvbkpzb24pO1xuICAgICAgICBsZXQgcmVzID0gYXdhaXQgdGhpcy5wb3N0KHJlcXVlc3RVcmwsIGRhdGEsIGFkZGl0aW9uYWxIZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMsIHRoaXMucmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBwdXRKc29uKHJlcXVlc3RVcmwsIG9iaiwgYWRkaXRpb25hbEhlYWRlcnMgPSB7fSkge1xuICAgICAgICBsZXQgZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgICAgIGFkZGl0aW9uYWxIZWFkZXJzW0hlYWRlcnMuQWNjZXB0XSA9IHRoaXMuX2dldEV4aXN0aW5nT3JEZWZhdWx0SGVhZGVyKGFkZGl0aW9uYWxIZWFkZXJzLCBIZWFkZXJzLkFjY2VwdCwgTWVkaWFUeXBlcy5BcHBsaWNhdGlvbkpzb24pO1xuICAgICAgICBhZGRpdGlvbmFsSGVhZGVyc1tIZWFkZXJzLkNvbnRlbnRUeXBlXSA9IHRoaXMuX2dldEV4aXN0aW5nT3JEZWZhdWx0SGVhZGVyKGFkZGl0aW9uYWxIZWFkZXJzLCBIZWFkZXJzLkNvbnRlbnRUeXBlLCBNZWRpYVR5cGVzLkFwcGxpY2F0aW9uSnNvbik7XG4gICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLnB1dChyZXF1ZXN0VXJsLCBkYXRhLCBhZGRpdGlvbmFsSGVhZGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9jZXNzUmVzcG9uc2UocmVzLCB0aGlzLnJlcXVlc3RPcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgcGF0Y2hKc29uKHJlcXVlc3RVcmwsIG9iaiwgYWRkaXRpb25hbEhlYWRlcnMgPSB7fSkge1xuICAgICAgICBsZXQgZGF0YSA9IEpTT04uc3RyaW5naWZ5KG9iaiwgbnVsbCwgMik7XG4gICAgICAgIGFkZGl0aW9uYWxIZWFkZXJzW0hlYWRlcnMuQWNjZXB0XSA9IHRoaXMuX2dldEV4aXN0aW5nT3JEZWZhdWx0SGVhZGVyKGFkZGl0aW9uYWxIZWFkZXJzLCBIZWFkZXJzLkFjY2VwdCwgTWVkaWFUeXBlcy5BcHBsaWNhdGlvbkpzb24pO1xuICAgICAgICBhZGRpdGlvbmFsSGVhZGVyc1tIZWFkZXJzLkNvbnRlbnRUeXBlXSA9IHRoaXMuX2dldEV4aXN0aW5nT3JEZWZhdWx0SGVhZGVyKGFkZGl0aW9uYWxIZWFkZXJzLCBIZWFkZXJzLkNvbnRlbnRUeXBlLCBNZWRpYVR5cGVzLkFwcGxpY2F0aW9uSnNvbik7XG4gICAgICAgIGxldCByZXMgPSBhd2FpdCB0aGlzLnBhdGNoKHJlcXVlc3RVcmwsIGRhdGEsIGFkZGl0aW9uYWxIZWFkZXJzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2Nlc3NSZXNwb25zZShyZXMsIHRoaXMucmVxdWVzdE9wdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBhIHJhdyBodHRwIHJlcXVlc3QuXG4gICAgICogQWxsIG90aGVyIG1ldGhvZHMgc3VjaCBhcyBnZXQsIHBvc3QsIHBhdGNoLCBhbmQgcmVxdWVzdCB1bHRpbWF0ZWx5IGNhbGwgdGhpcy5cbiAgICAgKiBQcmVmZXIgZ2V0LCBkZWwsIHBvc3QgYW5kIHBhdGNoXG4gICAgICovXG4gICAgYXN5bmMgcmVxdWVzdCh2ZXJiLCByZXF1ZXN0VXJsLCBkYXRhLCBoZWFkZXJzKSB7XG4gICAgICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDbGllbnQgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZC4nKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgcGFyc2VkVXJsID0gbmV3IFVSTChyZXF1ZXN0VXJsKTtcbiAgICAgICAgbGV0IGluZm8gPSB0aGlzLl9wcmVwYXJlUmVxdWVzdCh2ZXJiLCBwYXJzZWRVcmwsIGhlYWRlcnMpO1xuICAgICAgICAvLyBPbmx5IHBlcmZvcm0gcmV0cmllcyBvbiByZWFkcyBzaW5jZSB3cml0ZXMgbWF5IG5vdCBiZSBpZGVtcG90ZW50LlxuICAgICAgICBsZXQgbWF4VHJpZXMgPSB0aGlzLl9hbGxvd1JldHJpZXMgJiYgUmV0cnlhYmxlSHR0cFZlcmJzLmluZGV4T2YodmVyYikgIT0gLTFcbiAgICAgICAgICAgID8gdGhpcy5fbWF4UmV0cmllcyArIDFcbiAgICAgICAgICAgIDogMTtcbiAgICAgICAgbGV0IG51bVRyaWVzID0gMDtcbiAgICAgICAgbGV0IHJlc3BvbnNlO1xuICAgICAgICB3aGlsZSAobnVtVHJpZXMgPCBtYXhUcmllcykge1xuICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlcXVlc3RSYXcoaW5mbywgZGF0YSk7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBpdCdzIGFuIGF1dGhlbnRpY2F0aW9uIGNoYWxsZW5nZVxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UubWVzc2FnZSAmJlxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLm1lc3NhZ2Uuc3RhdHVzQ29kZSA9PT0gSHR0cENvZGVzLlVuYXV0aG9yaXplZCkge1xuICAgICAgICAgICAgICAgIGxldCBhdXRoZW50aWNhdGlvbkhhbmRsZXI7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhhbmRsZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhbmRsZXJzW2ldLmNhbkhhbmRsZUF1dGhlbnRpY2F0aW9uKHJlc3BvbnNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb25IYW5kbGVyID0gdGhpcy5oYW5kbGVyc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhdXRoZW50aWNhdGlvbkhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1dGhlbnRpY2F0aW9uSGFuZGxlci5oYW5kbGVBdXRoZW50aWNhdGlvbih0aGlzLCBpbmZvLCBkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgcmVjZWl2ZWQgYW4gdW5hdXRob3JpemVkIHJlc3BvbnNlIGJ1dCBoYXZlIG5vIGhhbmRsZXJzIHRvIGhhbmRsZSBpdC5cbiAgICAgICAgICAgICAgICAgICAgLy8gTGV0IHRoZSByZXNwb25zZSByZXR1cm4gdG8gdGhlIGNhbGxlci5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCByZWRpcmVjdHNSZW1haW5pbmcgPSB0aGlzLl9tYXhSZWRpcmVjdHM7XG4gICAgICAgICAgICB3aGlsZSAoSHR0cFJlZGlyZWN0Q29kZXMuaW5kZXhPZihyZXNwb25zZS5tZXNzYWdlLnN0YXR1c0NvZGUpICE9IC0xICYmXG4gICAgICAgICAgICAgICAgdGhpcy5fYWxsb3dSZWRpcmVjdHMgJiZcbiAgICAgICAgICAgICAgICByZWRpcmVjdHNSZW1haW5pbmcgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSByZXNwb25zZS5tZXNzYWdlLmhlYWRlcnNbJ2xvY2F0aW9uJ107XG4gICAgICAgICAgICAgICAgaWYgKCFyZWRpcmVjdFVybCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vIGxvY2F0aW9uIHRvIHJlZGlyZWN0IHRvLCB3ZSB3b24ndFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZFJlZGlyZWN0VXJsID0gbmV3IFVSTChyZWRpcmVjdFVybCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZFVybC5wcm90b2NvbCA9PSAnaHR0cHM6JyAmJlxuICAgICAgICAgICAgICAgICAgICBwYXJzZWRVcmwucHJvdG9jb2wgIT0gcGFyc2VkUmVkaXJlY3RVcmwucHJvdG9jb2wgJiZcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuX2FsbG93UmVkaXJlY3REb3duZ3JhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWRpcmVjdCBmcm9tIEhUVFBTIHRvIEhUVFAgcHJvdG9jb2wuIFRoaXMgZG93bmdyYWRlIGlzIG5vdCBhbGxvd2VkIGZvciBzZWN1cml0eSByZWFzb25zLiBJZiB5b3Ugd2FudCB0byBhbGxvdyB0aGlzIGJlaGF2aW9yLCBzZXQgdGhlIGFsbG93UmVkaXJlY3REb3duZ3JhZGUgb3B0aW9uIHRvIHRydWUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gZmluaXNoIHJlYWRpbmcgdGhlIHJlc3BvbnNlIGJlZm9yZSByZWFzc2lnbmluZyByZXNwb25zZVxuICAgICAgICAgICAgICAgIC8vIHdoaWNoIHdpbGwgbGVhayB0aGUgb3BlbiBzb2NrZXQuXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzcG9uc2UucmVhZEJvZHkoKTtcbiAgICAgICAgICAgICAgICAvLyBzdHJpcCBhdXRob3JpemF0aW9uIGhlYWRlciBpZiByZWRpcmVjdGVkIHRvIGEgZGlmZmVyZW50IGhvc3RuYW1lXG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZFJlZGlyZWN0VXJsLmhvc3RuYW1lICE9PSBwYXJzZWRVcmwuaG9zdG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaGVhZGVyIGluIGhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGhlYWRlciBuYW1lcyBhcmUgY2FzZSBpbnNlbnNpdGl2ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlci50b0xvd2VyQ2FzZSgpID09PSAnYXV0aG9yaXphdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaGVhZGVyc1toZWFkZXJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIGxldCdzIG1ha2UgdGhlIHJlcXVlc3Qgd2l0aCB0aGUgbmV3IHJlZGlyZWN0VXJsXG4gICAgICAgICAgICAgICAgaW5mbyA9IHRoaXMuX3ByZXBhcmVSZXF1ZXN0KHZlcmIsIHBhcnNlZFJlZGlyZWN0VXJsLCBoZWFkZXJzKTtcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdFJhdyhpbmZvLCBkYXRhKTtcbiAgICAgICAgICAgICAgICByZWRpcmVjdHNSZW1haW5pbmctLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChIdHRwUmVzcG9uc2VSZXRyeUNvZGVzLmluZGV4T2YocmVzcG9uc2UubWVzc2FnZS5zdGF0dXNDb2RlKSA9PSAtMSkge1xuICAgICAgICAgICAgICAgIC8vIElmIG5vdCBhIHJldHJ5IGNvZGUsIHJldHVybiBpbW1lZGlhdGVseSBpbnN0ZWFkIG9mIHJldHJ5aW5nXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbnVtVHJpZXMgKz0gMTtcbiAgICAgICAgICAgIGlmIChudW1UcmllcyA8IG1heFRyaWVzKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzcG9uc2UucmVhZEJvZHkoKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLl9wZXJmb3JtRXhwb25lbnRpYWxCYWNrb2ZmKG51bVRyaWVzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5lZWRzIHRvIGJlIGNhbGxlZCBpZiBrZWVwQWxpdmUgaXMgc2V0IHRvIHRydWUgaW4gcmVxdWVzdCBvcHRpb25zLlxuICAgICAqL1xuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLl9hZ2VudCkge1xuICAgICAgICAgICAgdGhpcy5fYWdlbnQuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmF3IHJlcXVlc3QuXG4gICAgICogQHBhcmFtIGluZm9cbiAgICAgKiBAcGFyYW0gZGF0YVxuICAgICAqL1xuICAgIHJlcXVlc3RSYXcoaW5mbywgZGF0YSkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgbGV0IGNhbGxiYWNrRm9yUmVzdWx0ID0gZnVuY3Rpb24gKGVyciwgcmVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdFJhd1dpdGhDYWxsYmFjayhpbmZvLCBkYXRhLCBjYWxsYmFja0ZvclJlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSYXcgcmVxdWVzdCB3aXRoIGNhbGxiYWNrLlxuICAgICAqIEBwYXJhbSBpbmZvXG4gICAgICogQHBhcmFtIGRhdGFcbiAgICAgKiBAcGFyYW0gb25SZXN1bHRcbiAgICAgKi9cbiAgICByZXF1ZXN0UmF3V2l0aENhbGxiYWNrKGluZm8sIGRhdGEsIG9uUmVzdWx0KSB7XG4gICAgICAgIGxldCBzb2NrZXQ7XG4gICAgICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGluZm8ub3B0aW9ucy5oZWFkZXJzWydDb250ZW50LUxlbmd0aCddID0gQnVmZmVyLmJ5dGVMZW5ndGgoZGF0YSwgJ3V0ZjgnKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY2FsbGJhY2tDYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgbGV0IGhhbmRsZVJlc3VsdCA9IChlcnIsIHJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKCFjYWxsYmFja0NhbGxlZCkge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBvblJlc3VsdChlcnIsIHJlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGxldCByZXEgPSBpbmZvLmh0dHBNb2R1bGUucmVxdWVzdChpbmZvLm9wdGlvbnMsIChtc2cpID0+IHtcbiAgICAgICAgICAgIGxldCByZXMgPSBuZXcgSHR0cENsaWVudFJlc3BvbnNlKG1zZyk7XG4gICAgICAgICAgICBoYW5kbGVSZXN1bHQobnVsbCwgcmVzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcS5vbignc29ja2V0Jywgc29jayA9PiB7XG4gICAgICAgICAgICBzb2NrZXQgPSBzb2NrO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gSWYgd2UgZXZlciBnZXQgZGlzY29ubmVjdGVkLCB3ZSB3YW50IHRoZSBzb2NrZXQgdG8gdGltZW91dCBldmVudHVhbGx5XG4gICAgICAgIHJlcS5zZXRUaW1lb3V0KHRoaXMuX3NvY2tldFRpbWVvdXQgfHwgMyAqIDYwMDAwLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoc29ja2V0KSB7XG4gICAgICAgICAgICAgICAgc29ja2V0LmVuZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlUmVzdWx0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0OiAnICsgaW5mby5vcHRpb25zLnBhdGgpLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlcS5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAvLyBlcnIgaGFzIHN0YXR1c0NvZGUgcHJvcGVydHlcbiAgICAgICAgICAgIC8vIHJlcyBzaG91bGQgaGF2ZSBoZWFkZXJzXG4gICAgICAgICAgICBoYW5kbGVSZXN1bHQoZXJyLCBudWxsKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChkYXRhICYmIHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmVxLndyaXRlKGRhdGEsICd1dGY4Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRhdGEgJiYgdHlwZW9mIGRhdGEgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBkYXRhLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXEuZW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGRhdGEucGlwZShyZXEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVxLmVuZCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gaHR0cCBhZ2VudC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VmdWwgd2hlbiB5b3UgbmVlZCBhbiBodHRwIGFnZW50IHRoYXQgaGFuZGxlc1xuICAgICAqIHJvdXRpbmcgdGhyb3VnaCBhIHByb3h5IHNlcnZlciAtIGRlcGVuZGluZyB1cG9uIHRoZSB1cmwgYW5kIHByb3h5IGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAgICAgKiBAcGFyYW0gc2VydmVyVXJsICBUaGUgc2VydmVyIFVSTCB3aGVyZSB0aGUgcmVxdWVzdCB3aWxsIGJlIHNlbnQuIEZvciBleGFtcGxlLCBodHRwczovL2FwaS5naXRodWIuY29tXG4gICAgICovXG4gICAgZ2V0QWdlbnQoc2VydmVyVXJsKSB7XG4gICAgICAgIGxldCBwYXJzZWRVcmwgPSBuZXcgVVJMKHNlcnZlclVybCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRBZ2VudChwYXJzZWRVcmwpO1xuICAgIH1cbiAgICBfcHJlcGFyZVJlcXVlc3QobWV0aG9kLCByZXF1ZXN0VXJsLCBoZWFkZXJzKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB7fTtcbiAgICAgICAgaW5mby5wYXJzZWRVcmwgPSByZXF1ZXN0VXJsO1xuICAgICAgICBjb25zdCB1c2luZ1NzbCA9IGluZm8ucGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcbiAgICAgICAgaW5mby5odHRwTW9kdWxlID0gdXNpbmdTc2wgPyBodHRwcyA6IGh0dHA7XG4gICAgICAgIGNvbnN0IGRlZmF1bHRQb3J0ID0gdXNpbmdTc2wgPyA0NDMgOiA4MDtcbiAgICAgICAgaW5mby5vcHRpb25zID0ge307XG4gICAgICAgIGluZm8ub3B0aW9ucy5ob3N0ID0gaW5mby5wYXJzZWRVcmwuaG9zdG5hbWU7XG4gICAgICAgIGluZm8ub3B0aW9ucy5wb3J0ID0gaW5mby5wYXJzZWRVcmwucG9ydFxuICAgICAgICAgICAgPyBwYXJzZUludChpbmZvLnBhcnNlZFVybC5wb3J0KVxuICAgICAgICAgICAgOiBkZWZhdWx0UG9ydDtcbiAgICAgICAgaW5mby5vcHRpb25zLnBhdGggPVxuICAgICAgICAgICAgKGluZm8ucGFyc2VkVXJsLnBhdGhuYW1lIHx8ICcnKSArIChpbmZvLnBhcnNlZFVybC5zZWFyY2ggfHwgJycpO1xuICAgICAgICBpbmZvLm9wdGlvbnMubWV0aG9kID0gbWV0aG9kO1xuICAgICAgICBpbmZvLm9wdGlvbnMuaGVhZGVycyA9IHRoaXMuX21lcmdlSGVhZGVycyhoZWFkZXJzKTtcbiAgICAgICAgaWYgKHRoaXMudXNlckFnZW50ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGluZm8ub3B0aW9ucy5oZWFkZXJzWyd1c2VyLWFnZW50J10gPSB0aGlzLnVzZXJBZ2VudDtcbiAgICAgICAgfVxuICAgICAgICBpbmZvLm9wdGlvbnMuYWdlbnQgPSB0aGlzLl9nZXRBZ2VudChpbmZvLnBhcnNlZFVybCk7XG4gICAgICAgIC8vIGdpdmVzIGhhbmRsZXJzIGFuIG9wcG9ydHVuaXR5IHRvIHBhcnRpY2lwYXRlXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzLmZvckVhY2goaGFuZGxlciA9PiB7XG4gICAgICAgICAgICAgICAgaGFuZGxlci5wcmVwYXJlUmVxdWVzdChpbmZvLm9wdGlvbnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuICAgIF9tZXJnZUhlYWRlcnMoaGVhZGVycykge1xuICAgICAgICBjb25zdCBsb3dlcmNhc2VLZXlzID0gb2JqID0+IE9iamVjdC5rZXlzKG9iaikucmVkdWNlKChjLCBrKSA9PiAoKGNbay50b0xvd2VyQ2FzZSgpXSA9IG9ialtrXSksIGMpLCB7fSk7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RPcHRpb25zICYmIHRoaXMucmVxdWVzdE9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGxvd2VyY2FzZUtleXModGhpcy5yZXF1ZXN0T3B0aW9ucy5oZWFkZXJzKSwgbG93ZXJjYXNlS2V5cyhoZWFkZXJzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvd2VyY2FzZUtleXMoaGVhZGVycyB8fCB7fSk7XG4gICAgfVxuICAgIF9nZXRFeGlzdGluZ09yRGVmYXVsdEhlYWRlcihhZGRpdGlvbmFsSGVhZGVycywgaGVhZGVyLCBfZGVmYXVsdCkge1xuICAgICAgICBjb25zdCBsb3dlcmNhc2VLZXlzID0gb2JqID0+IE9iamVjdC5rZXlzKG9iaikucmVkdWNlKChjLCBrKSA9PiAoKGNbay50b0xvd2VyQ2FzZSgpXSA9IG9ialtrXSksIGMpLCB7fSk7XG4gICAgICAgIGxldCBjbGllbnRIZWFkZXI7XG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3RPcHRpb25zICYmIHRoaXMucmVxdWVzdE9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICAgICAgY2xpZW50SGVhZGVyID0gbG93ZXJjYXNlS2V5cyh0aGlzLnJlcXVlc3RPcHRpb25zLmhlYWRlcnMpW2hlYWRlcl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFkZGl0aW9uYWxIZWFkZXJzW2hlYWRlcl0gfHwgY2xpZW50SGVhZGVyIHx8IF9kZWZhdWx0O1xuICAgIH1cbiAgICBfZ2V0QWdlbnQocGFyc2VkVXJsKSB7XG4gICAgICAgIGxldCBhZ2VudDtcbiAgICAgICAgbGV0IHByb3h5VXJsID0gcG0uZ2V0UHJveHlVcmwocGFyc2VkVXJsKTtcbiAgICAgICAgbGV0IHVzZVByb3h5ID0gcHJveHlVcmwgJiYgcHJveHlVcmwuaG9zdG5hbWU7XG4gICAgICAgIGlmICh0aGlzLl9rZWVwQWxpdmUgJiYgdXNlUHJveHkpIHtcbiAgICAgICAgICAgIGFnZW50ID0gdGhpcy5fcHJveHlBZ2VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fa2VlcEFsaXZlICYmICF1c2VQcm94eSkge1xuICAgICAgICAgICAgYWdlbnQgPSB0aGlzLl9hZ2VudDtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBhZ2VudCBpcyBhbHJlYWR5IGFzc2lnbmVkIHVzZSB0aGF0IGFnZW50LlxuICAgICAgICBpZiAoISFhZ2VudCkge1xuICAgICAgICAgICAgcmV0dXJuIGFnZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzaW5nU3NsID0gcGFyc2VkVXJsLnByb3RvY29sID09PSAnaHR0cHM6JztcbiAgICAgICAgbGV0IG1heFNvY2tldHMgPSAxMDA7XG4gICAgICAgIGlmICghIXRoaXMucmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgICAgICAgIG1heFNvY2tldHMgPSB0aGlzLnJlcXVlc3RPcHRpb25zLm1heFNvY2tldHMgfHwgaHR0cC5nbG9iYWxBZ2VudC5tYXhTb2NrZXRzO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1c2VQcm94eSkge1xuICAgICAgICAgICAgLy8gSWYgdXNpbmcgcHJveHksIG5lZWQgdHVubmVsXG4gICAgICAgICAgICBpZiAoIXR1bm5lbCkge1xuICAgICAgICAgICAgICAgIHR1bm5lbCA9IHJlcXVpcmUoJ3R1bm5lbCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYWdlbnRPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIG1heFNvY2tldHM6IG1heFNvY2tldHMsXG4gICAgICAgICAgICAgICAga2VlcEFsaXZlOiB0aGlzLl9rZWVwQWxpdmUsXG4gICAgICAgICAgICAgICAgcHJveHk6IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKChwcm94eVVybC51c2VybmFtZSB8fCBwcm94eVVybC5wYXNzd29yZCkgJiYge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJveHlBdXRoOiBgJHtwcm94eVVybC51c2VybmFtZX06JHtwcm94eVVybC5wYXNzd29yZH1gXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBob3N0OiBwcm94eVVybC5ob3N0bmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcG9ydDogcHJveHlVcmwucG9ydFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBsZXQgdHVubmVsQWdlbnQ7XG4gICAgICAgICAgICBjb25zdCBvdmVySHR0cHMgPSBwcm94eVVybC5wcm90b2NvbCA9PT0gJ2h0dHBzOic7XG4gICAgICAgICAgICBpZiAodXNpbmdTc2wpIHtcbiAgICAgICAgICAgICAgICB0dW5uZWxBZ2VudCA9IG92ZXJIdHRwcyA/IHR1bm5lbC5odHRwc092ZXJIdHRwcyA6IHR1bm5lbC5odHRwc092ZXJIdHRwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdHVubmVsQWdlbnQgPSBvdmVySHR0cHMgPyB0dW5uZWwuaHR0cE92ZXJIdHRwcyA6IHR1bm5lbC5odHRwT3Zlckh0dHA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZ2VudCA9IHR1bm5lbEFnZW50KGFnZW50T3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLl9wcm94eUFnZW50ID0gYWdlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgcmV1c2luZyBhZ2VudCBhY3Jvc3MgcmVxdWVzdCBhbmQgdHVubmVsaW5nIGFnZW50IGlzbid0IGFzc2lnbmVkIGNyZWF0ZSBhIG5ldyBhZ2VudFxuICAgICAgICBpZiAodGhpcy5fa2VlcEFsaXZlICYmICFhZ2VudCkge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsga2VlcEFsaXZlOiB0aGlzLl9rZWVwQWxpdmUsIG1heFNvY2tldHM6IG1heFNvY2tldHMgfTtcbiAgICAgICAgICAgIGFnZW50ID0gdXNpbmdTc2wgPyBuZXcgaHR0cHMuQWdlbnQob3B0aW9ucykgOiBuZXcgaHR0cC5BZ2VudChvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMuX2FnZW50ID0gYWdlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgbm90IHVzaW5nIHByaXZhdGUgYWdlbnQgYW5kIHR1bm5lbCBhZ2VudCBpc24ndCBzZXR1cCB0aGVuIHVzZSBnbG9iYWwgYWdlbnRcbiAgICAgICAgaWYgKCFhZ2VudCkge1xuICAgICAgICAgICAgYWdlbnQgPSB1c2luZ1NzbCA/IGh0dHBzLmdsb2JhbEFnZW50IDogaHR0cC5nbG9iYWxBZ2VudDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXNpbmdTc2wgJiYgdGhpcy5faWdub3JlU3NsRXJyb3IpIHtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gc2V0IE5PREVfVExTX1JFSkVDVF9VTkFVVEhPUklaRUQ9MCBzaW5jZSB0aGF0IHdpbGwgYWZmZWN0IHJlcXVlc3QgZm9yIGVudGlyZSBwcm9jZXNzXG4gICAgICAgICAgICAvLyBodHRwLlJlcXVlc3RPcHRpb25zIGRvZXNuJ3QgZXhwb3NlIGEgd2F5IHRvIG1vZGlmeSBSZXF1ZXN0T3B0aW9ucy5hZ2VudC5vcHRpb25zXG4gICAgICAgICAgICAvLyB3ZSBoYXZlIHRvIGNhc3QgaXQgdG8gYW55IGFuZCBjaGFuZ2UgaXQgZGlyZWN0bHlcbiAgICAgICAgICAgIGFnZW50Lm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKGFnZW50Lm9wdGlvbnMgfHwge30sIHtcbiAgICAgICAgICAgICAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWdlbnQ7XG4gICAgfVxuICAgIF9wZXJmb3JtRXhwb25lbnRpYWxCYWNrb2ZmKHJldHJ5TnVtYmVyKSB7XG4gICAgICAgIHJldHJ5TnVtYmVyID0gTWF0aC5taW4oRXhwb25lbnRpYWxCYWNrb2ZmQ2VpbGluZywgcmV0cnlOdW1iZXIpO1xuICAgICAgICBjb25zdCBtcyA9IEV4cG9uZW50aWFsQmFja29mZlRpbWVTbGljZSAqIE1hdGgucG93KDIsIHJldHJ5TnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCksIG1zKSk7XG4gICAgfVxuICAgIHN0YXRpYyBkYXRlVGltZURlc2VyaWFsaXplcihrZXksIHZhbHVlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgYSA9IG5ldyBEYXRlKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICghaXNOYU4oYS52YWx1ZU9mKCkpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgICBhc3luYyBfcHJvY2Vzc1Jlc3BvbnNlKHJlcywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzQ29kZSA9IHJlcy5tZXNzYWdlLnN0YXR1c0NvZGU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICBzdGF0dXNDb2RlOiBzdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgIHJlc3VsdDogbnVsbCxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7fVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIG5vdCBmb3VuZCBsZWFkcyB0byBudWxsIG9iaiByZXR1cm5lZFxuICAgICAgICAgICAgaWYgKHN0YXR1c0NvZGUgPT0gSHR0cENvZGVzLk5vdEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgb2JqO1xuICAgICAgICAgICAgbGV0IGNvbnRlbnRzO1xuICAgICAgICAgICAgLy8gZ2V0IHRoZSByZXN1bHQgZnJvbSB0aGUgYm9keVxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb250ZW50cyA9IGF3YWl0IHJlcy5yZWFkQm9keSgpO1xuICAgICAgICAgICAgICAgIGlmIChjb250ZW50cyAmJiBjb250ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuZGVzZXJpYWxpemVEYXRlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gSlNPTi5wYXJzZShjb250ZW50cywgSHR0cENsaWVudC5kYXRlVGltZURlc2VyaWFsaXplcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBKU09OLnBhcnNlKGNvbnRlbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZS5yZXN1bHQgPSBvYmo7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmhlYWRlcnMgPSByZXMubWVzc2FnZS5oZWFkZXJzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIC8vIEludmFsaWQgcmVzb3VyY2UgKGNvbnRlbnRzIG5vdCBqc29uKTsgIGxlYXZpbmcgcmVzdWx0IG9iaiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBub3RlIHRoYXQgM3h4IHJlZGlyZWN0cyBhcmUgaGFuZGxlZCBieSB0aGUgaHR0cCBsYXllci5cbiAgICAgICAgICAgIGlmIChzdGF0dXNDb2RlID4gMjk5KSB7XG4gICAgICAgICAgICAgICAgbGV0IG1zZztcbiAgICAgICAgICAgICAgICAvLyBpZiBleGNlcHRpb24vZXJyb3IgaW4gYm9keSwgYXR0ZW1wdCB0byBnZXQgYmV0dGVyIGVycm9yXG4gICAgICAgICAgICAgICAgaWYgKG9iaiAmJiBvYmoubWVzc2FnZSkge1xuICAgICAgICAgICAgICAgICAgICBtc2cgPSBvYmoubWVzc2FnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoY29udGVudHMgJiYgY29udGVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBpdCBtYXkgYmUgdGhlIGNhc2UgdGhhdCB0aGUgZXhjZXB0aW9uIGlzIGluIHRoZSBib2R5IG1lc3NhZ2UgYXMgc3RyaW5nXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGNvbnRlbnRzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbXNnID0gJ0ZhaWxlZCByZXF1ZXN0OiAoJyArIHN0YXR1c0NvZGUgKyAnKSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBlcnIgPSBuZXcgSHR0cENsaWVudEVycm9yKG1zZywgc3RhdHVzQ29kZSk7XG4gICAgICAgICAgICAgICAgZXJyLnJlc3VsdCA9IHJlc3BvbnNlLnJlc3VsdDtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLkh0dHBDbGllbnQgPSBIdHRwQ2xpZW50O1xuIiwgIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY2xhc3MgQmFzaWNDcmVkZW50aWFsSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgIHRoaXMudXNlcm5hbWUgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5wYXNzd29yZCA9IHBhc3N3b3JkO1xuICAgIH1cbiAgICBwcmVwYXJlUmVxdWVzdChvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID1cbiAgICAgICAgICAgICdCYXNpYyAnICtcbiAgICAgICAgICAgICAgICBCdWZmZXIuZnJvbSh0aGlzLnVzZXJuYW1lICsgJzonICsgdGhpcy5wYXNzd29yZCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgIH1cbiAgICAvLyBUaGlzIGhhbmRsZXIgY2Fubm90IGhhbmRsZSA0MDFcbiAgICBjYW5IYW5kbGVBdXRoZW50aWNhdGlvbihyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhbmRsZUF1dGhlbnRpY2F0aW9uKGh0dHBDbGllbnQsIHJlcXVlc3RJbmZvLCBvYmpzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmV4cG9ydHMuQmFzaWNDcmVkZW50aWFsSGFuZGxlciA9IEJhc2ljQ3JlZGVudGlhbEhhbmRsZXI7XG5jbGFzcyBCZWFyZXJDcmVkZW50aWFsSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodG9rZW4pIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIH1cbiAgICAvLyBjdXJyZW50bHkgaW1wbGVtZW50cyBwcmUtYXV0aG9yaXphdGlvblxuICAgIC8vIFRPRE86IHN1cHBvcnQgcHJlQXV0aCA9IGZhbHNlIHdoZXJlIGl0IGhvb2tzIG9uIDQwMVxuICAgIHByZXBhcmVSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyB0aGlzLnRva2VuO1xuICAgIH1cbiAgICAvLyBUaGlzIGhhbmRsZXIgY2Fubm90IGhhbmRsZSA0MDFcbiAgICBjYW5IYW5kbGVBdXRoZW50aWNhdGlvbihyZXNwb25zZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGhhbmRsZUF1dGhlbnRpY2F0aW9uKGh0dHBDbGllbnQsIHJlcXVlc3RJbmZvLCBvYmpzKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cbmV4cG9ydHMuQmVhcmVyQ3JlZGVudGlhbEhhbmRsZXIgPSBCZWFyZXJDcmVkZW50aWFsSGFuZGxlcjtcbmNsYXNzIFBlcnNvbmFsQWNjZXNzVG9rZW5DcmVkZW50aWFsSGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IodG9rZW4pIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHRva2VuO1xuICAgIH1cbiAgICAvLyBjdXJyZW50bHkgaW1wbGVtZW50cyBwcmUtYXV0aG9yaXphdGlvblxuICAgIC8vIFRPRE86IHN1cHBvcnQgcHJlQXV0aCA9IGZhbHNlIHdoZXJlIGl0IGhvb2tzIG9uIDQwMVxuICAgIHByZXBhcmVSZXF1ZXN0KG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPVxuICAgICAgICAgICAgJ0Jhc2ljICcgKyBCdWZmZXIuZnJvbSgnUEFUOicgKyB0aGlzLnRva2VuKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gICAgfVxuICAgIC8vIFRoaXMgaGFuZGxlciBjYW5ub3QgaGFuZGxlIDQwMVxuICAgIGNhbkhhbmRsZUF1dGhlbnRpY2F0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFuZGxlQXV0aGVudGljYXRpb24oaHR0cENsaWVudCwgcmVxdWVzdEluZm8sIG9ianMpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuZXhwb3J0cy5QZXJzb25hbEFjY2Vzc1Rva2VuQ3JlZGVudGlhbEhhbmRsZXIgPSBQZXJzb25hbEFjY2Vzc1Rva2VuQ3JlZGVudGlhbEhhbmRsZXI7XG4iLCBudWxsLCBudWxsLCAiY29uc3QgY29yZSA9IHJlcXVpcmUoJ0BhY3Rpb25zL2NvcmUnKTtcblxuLyoqXG4gKiBXaGVuIHRoZSBHaXRIdWIgQWN0aW9ucyBqb2IgaXMgZG9uZSwgY2xlYW4gdXAgYW55IGVudmlyb25tZW50IHZhcmlhYmxlcyB0aGF0XG4gKiBtYXkgaGF2ZSBiZWVuIHNldCBieSB0aGUgY29uZmlndXJlLWF3cy1jcmVkZW50aWFscyBzdGVwcyBpbiB0aGUgam9iLlxuICpcbiAqIEVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbm90IGludGVuZGVkIHRvIGJlIHNoYXJlZCBhY3Jvc3MgZGlmZmVyZW50IGpvYnMgaW5cbiAqIHRoZSBzYW1lIEdpdEh1YiBBY3Rpb25zIHdvcmtmbG93OiBHaXRIdWIgQWN0aW9ucyBkb2N1bWVudGF0aW9uIHN0YXRlcyB0aGF0XG4gKiBlYWNoIGpvYiBydW5zIGluIGEgZnJlc2ggaW5zdGFuY2UuICBIb3dldmVyLCBkb2luZyBvdXIgb3duIGNsZWFudXAgd2lsbFxuICogZ2l2ZSB1cyBhZGRpdGlvbmFsIGFzc3VyYW5jZSB0aGF0IHRoZXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbm90IHNoYXJlZFxuICogd2l0aCBhbnkgb3RoZXIgam9icy5cbiAqL1xuXG5hc3luYyBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICB0cnkge1xuICAgIC8vIFRoZSBHaXRIdWIgQWN0aW9ucyB0b29sa2l0IGRvZXMgbm90IGhhdmUgYW4gb3B0aW9uIHRvIGNvbXBsZXRlbHkgdW5zZXRcbiAgICAvLyBlbnZpcm9ubWVudCB2YXJpYWJsZXMsIHNvIHdlIG92ZXJ3cml0ZSB0aGUgY3VycmVudCB2YWx1ZSB3aXRoIGFuIGVtcHR5XG4gICAgLy8gc3RyaW5nLiBUaGUgQVdTIENMSSBhbmQgQVdTIFNES3Mgd2lsbCBiZWhhdmUgY29ycmVjdGx5OiB0aGV5IHRyZWF0IGFuXG4gICAgLy8gZW1wdHkgc3RyaW5nIHZhbHVlIGFzIGlmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBkb2VzIG5vdCBleGlzdC5cbiAgICBjb3JlLmV4cG9ydFZhcmlhYmxlKCdBV1NfQUNDRVNTX0tFWV9JRCcsICcnKTtcbiAgICBjb3JlLmV4cG9ydFZhcmlhYmxlKCdBV1NfU0VDUkVUX0FDQ0VTU19LRVknLCAnJyk7XG4gICAgY29yZS5leHBvcnRWYXJpYWJsZSgnQVdTX1NFU1NJT05fVE9LRU4nLCAnJyk7XG4gICAgY29yZS5leHBvcnRWYXJpYWJsZSgnQVdTX0RFRkFVTFRfUkVHSU9OJywgJycpO1xuICAgIGNvcmUuZXhwb3J0VmFyaWFibGUoJ0FXU19SRUdJT04nLCAnJyk7XG4gIH1cbiAgY2F0Y2ggKGVycm9yKSB7XG4gICAgY29yZS5zZXRGYWlsZWQoZXJyb3IubWVzc2FnZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBjbGVhbnVwO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaWYgKHJlcXVpcmUubWFpbiA9PT0gbW9kdWxlKSB7XG4gIGNsZWFudXAoKTtcbn1cbiIsICJyZXF1aXJlKCcuLycpLmluc3RhbGwoKTtcbiIsICJpbXBvcnQgJ3NvdXJjZS1tYXAtc3VwcG9ydC9yZWdpc3RlcidcblxuaW1wb3J0IGNsZWFudXAgZnJvbSAnYXdzLWFjdGlvbnMtY29uZmlndXJlLWF3cy1jcmVkZW50aWFscy9jbGVhbnVwJ1xuXG5pbXBvcnQgeyBleHBvcnRWYXJpYWJsZSB9IGZyb20gJ0BhY3Rpb25zL2NvcmUnXG5cbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xuICBleHBvcnRWYXJpYWJsZSgnQVdTX0FWQUlMQUJMRV9ST0xFUycsICcnKVxuICBleHBvcnRWYXJpYWJsZSgnSU5QVVRfQVdTLVJFR0lPTicsICcnKVxuICBleHBvcnRWYXJpYWJsZSgnSU5QVVRfTUFTSy1BV1MtQUNDT1VOVC1JRCcsICcnKVxuICBleHBvcnRWYXJpYWJsZSgnSU5QVVRfUk9MRS1UTy1BU1NVTUUnLCAnJylcbiAgZXhwb3J0VmFyaWFibGUoJ0lOUFVUX1JPTEUtRFVSQVRJT04tU0VDT05EUycsICcnKVxuICBleHBvcnRWYXJpYWJsZSgnSU5QVVRfQ09ORklHJywgJycpXG4gIGNsZWFudXAoKVxufVxuIl0sCiAgIm1hcHBpbmdzIjogImc0QkFBQSxjQU9BLEdBQUksSUFBZSxtRUFBbUUsTUFBTSxFQUFFLEVBSzlGLEdBQVEsT0FBUyxTQUFVLEVBQVEsQ0FDakMsR0FBSSxHQUFLLEdBQVUsRUFBUyxHQUFhLE9BQ3ZDLE1BQU8sSUFBYSxHQUV0QixLQUFNLElBQUksV0FBVSw2QkFBK0IsQ0FBTSxDQUMzRCxFQU1BLEdBQVEsT0FBUyxTQUFVLEVBQVUsQ0FDbkMsR0FBSSxHQUFPLEdBQ1AsRUFBTyxHQUVQLEVBQVUsR0FDVixFQUFVLElBRVYsRUFBTyxHQUNQLEVBQU8sR0FFUCxFQUFPLEdBQ1AsRUFBUSxHQUVSLEVBQWUsR0FDZixFQUFlLEdBR25CLE1BQUksSUFBUSxHQUFZLEdBQVksRUFDMUIsRUFBVyxFQUlqQixHQUFXLEdBQVksR0FBWSxFQUM3QixFQUFXLEVBQVUsRUFJM0IsR0FBUSxHQUFZLEdBQVksRUFDMUIsRUFBVyxFQUFPLEVBSXhCLEdBQVksRUFDUCxHQUlMLEdBQVksRUFDUCxHQUlGLEVBQ1QsSUNsRUEsY0FxQ0EsR0FBSSxJQUFTLEtBY1QsR0FBaUIsRUFHakIsR0FBVyxHQUFLLEdBR2hCLEdB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
